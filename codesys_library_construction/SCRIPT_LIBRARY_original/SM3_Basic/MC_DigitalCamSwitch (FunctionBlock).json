{
  "library": "SM3_Basic",
  "title": "MC_DigitalCamSwitch (FunctionBlock)",
  "url": "https://content.helpme-codesys.com/en/libs/SM3_Basic/Current/SM3_Basic/POUs/Additional/MC_DigitalCamSwitch.html",
  "page_title": "MC_DigitalCamSwitch (FB)",
  "text": "GlobalTextList (GlobalTextList)\nImages\nLibrary Information\nGetLibVersion (Function)\nGetLibVersionNumber (Function)\nIsLibReleased (Function)\nProject Information\nGetBooleanProperty (Function)\nGetCompany (Function)\nGetNumberProperty (Function)\nGetTextProperty (Function)\nGetTextProperty2 (Function)\nGetTitle (Function)\nGetVersion (Function)\nGetVersionProperty (Function)\nSM3_Basic\nDataTypes\nAdditional\nMC_CAMSWITCH_REF (Struct)\nMC_CAMSWITCH_TR (Struct)\nMC_OUTPUT_REF (Alias)\nMC_TAPPETMODE (Enum)\nMC_TRACK_REF (Alias)\nMC_TRACK_TR (Struct)\nTRIGGER_REF (Struct)\nAdministrative/Configuration\nSMC3_BrakeSetState (Enum)\nSMC3_PersistPositionDiag (Enum)\nSMC3_PersistPosition_Data (Struct)\nSMC_AXIS_AUTORESTART_MODE (Enum)\nCAM\nCamSegment\nMC_CAM_ID (Struct)\nMC_CAM_REF (FunctionBlock)\nMC_STARTMODE (Enum)\nSMC_CAMTAPPETACTION (Enum)\nSMC_CAMTAPPETTYPE (Enum)\nSMC_CAMTable_LREAL_128_1 (Struct)\nSMC_CAMTable_LREAL_128_2 (Struct)\nSMC_CAMTable_LREAL_256_1 (Struct)\nSMC_CAMTable_LREAL_256_2 (Struct)\nSMC_CAMTable_REAL_128_1 (Struct)\nSMC_CAMTable_REAL_128_2 (Struct)\nSMC_CAMTable_REAL_256_1 (Struct)\nSMC_CAMTable_REAL_256_2 (Struct)\nSMC_CAMTable_UDINT_128_1 (Struct)\nSMC_CAMTable_UDINT_128_2 (Struct)\nSMC_CAMTable_UDINT_256_1 (Struct)\nSMC_CAMTable_UDINT_256_2 (Struct)\nSMC_CAMTable_UINT_128_1 (Struct)\nSMC_CAMTable_UINT_128_2 (Struct)\nSMC_CAMTable_UINT_256_1 (Struct)\nSMC_CAMTable_UINT_256_2 (Struct)\nSMC_CAMTappet (Struct)\nSMC_CAMXYVA (Struct)\nSMC_CAM_TYPE (Enum)\nDiagnostics\nSMC_CommunicationState (Enum)\nSMC_LOGGERMODE (Enum)\nDriveInterface\nMC_DIRECTION (Enum)\nSMC3_CaptureDescription (Struct)\nSMC3_CheckPositionLagMode (Enum)\nSMC3_DriveAcyclicTel (Struct)\nSMC3_MappingEntry (Alias)\nSMC3_ParamCommunicationMethod_Enum (Enum)\nSMC_AXIS_STATE (Enum)\nSMC_AXIS_TYPE (Enum)\nSMC_CONTROLLER_MODE (Enum)\nSMC_ENCODER_REF (Struct)\nSMC_FBERROR (Struct)\nSMC_MOTOR_TYPE (Enum)\nSMC_MOVEMENTTYPE (Enum)\nSMC_RAMPTYPE (Enum)\nSMC_SWITCHING_STATE (Enum)\nSMC_ValueSelect (Enum)\nMovement\nMC_TA_REF (Struct)\nMC_TP_REF (Struct)\nMC_TV_REF (Struct)\nSMC_BACKLASH_MODE (Enum)\nSMC_BACKLASH_STARTSTATE (Enum)\nSMC_HOMING_MODE (Enum)\nSMC_TA (Struct)\nSMC_TP (Struct)\nSMC_TV (Struct)\nDriveInterface\nAXIS_REF\nAXIS_REF_SM3 (FunctionBlock)\nIAxisRef (Interface)\nSMC3_ReinitDrive (FunctionBlock)\nSMC_AxisChangeSettings (FunctionBlock)\nSMC_AxisReadSettings (FunctionBlock)\nAXIS_REF_LOGICAL\nAXIS_REF_LOGICAL_SM3 (FunctionBlock)\nAXIS_REF_MAPPING\nAXIS_REF_MAPPING_SM3 (FunctionBlock)\nAXIS_REF_VIRTUAL\nAXIS_REF_VIRTUAL_SM3 (FunctionBlock)\nENCODER_REF\nENCODER_REF_SM3 (FunctionBlock)\nFREE_ENCODER_REF\nFREE_ENCODER_REF (FunctionBlock)\nGlobals\nLibParams (ParamList)\nSMC_DriveBasic_GlobalVariables (GVL)\nSM_PLCOpen_GlobalVariables (GVL)\nPOUs\nAdditional\nMC_AbortTrigger (FunctionBlock)\nMC_DigitalCamSwitch (FunctionBlock)\nMC_TouchProbe (FunctionBlock)\nSMC_CAMSWITCH_TOGGLE_EVENT (Struct)\nSMC_CAMSWITCH_TOGGLE_EVENTS (Struct)\nSMC_CAMSWITCH_TRACKS_EVENTS (Alias)\nSMC_DigitalCamSwitch_HighPrecision (FunctionBlock)\nSMC_FreeEncoder (FunctionBlock)\nSMC_Logical_Axis (FunctionBlock)\nSMC_StartupDrive (FunctionBlock)\nSMC_VIRTUAL_AXIS (FunctionBlock)\nAdministrative/Configuration\nMC_Power (FunctionBlock)\nMC_Reset (FunctionBlock)\nMC_SetPosition (FunctionBlock)\nSMC3_BrakeControl (FunctionBlock)\nSMC3_PersistPosition (FunctionBlock)\nSMC3_PersistPositionLogical (FunctionBlock)\nSMC3_PersistPositionSingleturn (FunctionBlock)\nSMC_ChangeAxisScalingLinear (FunctionBlock)\nSMC_ChangeAxisScalingRotary (FunctionBlock)\nSMC_ChangeDynamicLimits (FunctionBlock)\nSMC_ChangeGearingRatio (FunctionBlock)\nSMC_GetForecast (FunctionBlock)\nSMC_GetTravelTime (FunctionBlock)\nSMC_SetAdditionalConversionFactors (FunctionBlock)\nSMC_SetControllerMode (FunctionBlock)\nSMC_SetCustomRampType (FunctionBlock)\nSMC_SetForecast (FunctionBlock)\nSMC_SetMovementType (FunctionBlock)\nSMC_SetRampType (FunctionBlock)\nSMC_SetSoftwareLimits (FunctionBlock)\nCAM\nMC_CamTableSelect (FunctionBlock)\nSMC_CAMBounds (FunctionBlock)\nSMC_CAMBounds_Pos (FunctionBlock)\nSMC_CamEditor (FunctionBlock)\nSMC_CamRegister (FunctionBlock)\nSMC_CamTableEvaluate (Function)\nSMC_GetCamSlaveSetPosition (FunctionBlock)\nSMC_GetTappetValue (FunctionBlock)\nSMC_ReadCAM (FunctionBlock)\nSMC_WriteCAM (FunctionBlock)\nDiagnostics\nFBError\nMC_ReadActualPosition (FunctionBlock)\nMC_ReadActualTorque (FunctionBlock)\nMC_ReadActualVelocity (FunctionBlock)\nMC_ReadAxisError (FunctionBlock)\nMC_ReadStatus (FunctionBlock)\nSMC3_BrakeStatus (FunctionBlock)\nSMC_AxisDiagnosticLog (FunctionBlock)\nSMC_CheckAxisCommunication (FunctionBlock)\nSMC_CheckLimits (FunctionBlock)\nSMC_EstimateDeadTime (FunctionBlock)\nSMC_GetMaxSetAccDec (FunctionBlock)\nSMC_GetMaxSetVelocity (FunctionBlock)\nSMC_GetTrackingError (FunctionBlock)\nSMC_InPosition (FunctionBlock)\nSMC_MeasureDistance (FunctionBlock)\nSMC_ReadSetPosition (FunctionBlock)\nSMC_ReadSetValues (FunctionBlock)\nMovement\nDirect\nMC_AccelerationProfile (FunctionBlock)\nMC_Halt (FunctionBlock)\nMC_HaltSuperImposed (FunctionBlock)\nMC_Home (FunctionBlock)\nMC_Jog (FunctionBlock)\nMC_MoveAbsolute (FunctionBlock)\nMC_MoveAdditive (FunctionBlock)\nMC_MoveRelative (FunctionBlock)\nMC_MoveSuperImposed (FunctionBlock)\nMC_MoveVelocity (FunctionBlock)\nMC_PositionProfile (FunctionBlock)\nMC_SetOverride (FunctionBlock)\nMC_Stop (FunctionBlock)\nMC_VelocityProfile (FunctionBlock)\nMaster/Slave\nSMC_BacklashCompensation (FunctionBlock)\nSMC_GetOverride (FunctionBlock)\nSMC_Homing (FunctionBlock)\nSMC_Inch (FunctionBlock)\nSMC_MoveContinuousAbsolute (FunctionBlock)\nSMC_MoveContinuousRelative (FunctionBlock)\nParameter access\nMC_ReadBoolParameter (FunctionBlock)\nMC_ReadParameter (FunctionBlock)\nMC_WriteBoolParameter (FunctionBlock)\nMC_WriteParameter (FunctionBlock)\nSMC_ParameterNumber_CoE (Function)\nSMC_ParameterNumber_SoE (Function)\nSMC_GetCyclicMapping (Function)\ninternal\nTrajectories\nVisualization\nGenerated\nFramed visu helpers\nOriginal\nImagePool_sm3 (ImagePool)\nSM3_Basic_GetVersion (Function)\nFile and Project Information\nLibrary Reference\n3SLicense\nLibrary Identification\nLibrary Properties\nBase Interfaces\nLibrary Identification\nLibrary Properties\nCAA Callback Extern\nLibrary Identification\nLibrary Properties\nCAA Device Diagnosis\nLibrary Identification\nLibrary Properties\nCAA Types Extern\nLibrary Identification\nLibrary Properties\nCmpApp\nLibrary Identification\nLibrary Properties\nCmpErrors2 Interfaces\nLibrary Identification\nLibrary Properties\nCmpEventMgr\nLibrary Identification\nLibrary Properties\nCmpIecTask\nLibrary Identification\nLibrary Properties\nCmpLog\nLibrary Identification\nLibrary Properties\nComponent Manager\nLibrary Identification\nLibrary Properties\nEmpty\nLibrary Identification\nLibrary Properties\nFloatingPointUtils\nLibrary Identification\nLibrary Properties\nIoDriver Interfaces\nLibrary Identification\nLibrary Properties\nIoStandard\nLibrary Identification\nLibrary Properties\nSM3_CommonPublic\nLibrary Identification\nLibrary Properties\nSM3_Error\nLibrary Identification\nLibrary Properties\nSM3_Math\nLibrary Identification\nLibrary Properties\nSM3_RBase\nLibrary Identification\nLibrary Properties\nSM3_Ramps\nLibrary Identification\nLibrary Properties\nSM3_Shared\nLibrary Identification\nLibrary Properties\nSM3_StringUtils\nLibrary Identification\nLibrary Properties\nSM3_TrajectoryGeneration\nLibrary Identification\nLibrary Properties\nStandard\nLibrary Identification\nLibrary Properties\nSysCpuHandling\nLibrary Identification\nLibrary Properties\nSysFile\nLibrary Identification\nLibrary Properties\nSysMem\nLibrary Identification\nLibrary Properties\nSysTarget\nLibrary Identification\nLibrary Properties\nSysTime\nLibrary Identification\nLibrary Properties\nSysTypes2 Interfaces\nLibrary Identification\nLibrary Properties\nVisuElem3DPath\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemCamDisplayer\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemMeter\nLibrary Identification\nLibrary Properties\nVisuElemTextEditor\nLibrary Identification\nLibrary Properties\nVisuElemTrace\nLibrary Identification\nLibrary Properties\nVisuElemXYChart\nLibrary Identification\nLibrary Properties\nVisuElems\nLibrary Identification\nLibrary Properties\nVisuElemsAlarm\nLibrary Identification\nLibrary Properties\nVisuElemsDateTime\nLibrary Identification\nLibrary Properties\nVisuElemsSpecialControls\nLibrary Identification\nLibrary Properties\nVisuElemsWinControls\nLibrary Identification\nLibrary Properties\nVisuInputs\nLibrary Identification\nLibrary Properties\nVisuNativeControl\nLibrary Identification\nLibrary Properties\nSM3_Basic\nDocs\n»\nSM3_Basic\n»\nPOUs\n»\nAdditional\n»\nMC_DigitalCamSwitch (FB)\nMC_DigitalCamSwitch (FB)\nÂ¶\nFUNCTION_BLOCK MC_DigitalCamSwitch\nThis function block is analogous to switching on a motor shaft: The function block commands a group\nof discrete output bits to switch in analogy to a set of mechanical cam controlled switches connected to an axis.\nForward and backward movements are allowed.\nNote\nChanging the\nVAR_IN_OUT\n-parameters requires a new rising edge of\nthe\nEnable\ninput.\nSee\nSMC_DigitalCamSwitch_HighPrecision\nfor a similar function block\nthat can provide more precise timing information.\nHint\nThis functionality is sometimes called PLS â Phase or Position or Programmable Limit Switch.\nExample\nAssume the following parameter values set:\nParameter\nType\nSwitch01\nSwitch02\nSwitch03\nSwitch04\nTrackNumber\nINT\n1\n1\n1\n2\nFirstOnPosition [u]\nREAL\n2000\n2500\n4000\n3000\nLastOnPosition [u]\nREAL\n3000\n3000\n1000\n-\nAxisDirection\nINT\n1=Pos\n2=Neg\n0=Both\n0=Both\nCamSwitchMode\nINT\n0=Position\n0=Position\n0=Position\n1=TIME\nDuration\nTIME\n-\n-\n-\n1350\nAssume further, that no on/off compensation nor hysteresis is employed. The figure demonstrates the behavior of the outputs,\nwhen the axis is moving continuously in positive direction. The axis is a modulo axis with a modulo length of 5000 u.\nExample of DigitalCamSwitch\nÂ¶\nNow assume that on compensation (-125ms) and off compensation (+250ms) are employed.\nDetailed description of Switch01\nÂ¶\nThe resulting behavior of the outputs, when the axis is moving continuously in negative direction without on/off compensation and without hysteresis.\nExample in negative direction\nÂ¶\nInOut:\nScope\nName\nType\nInitial\nComment\nInout\nAxis\nAXIS_REF_SM3\nReference to axis the switches are connected to\nSwitches\nMC_CAMSWITCH_REF\nReference to switching actions\nOutputs\nMC_OUTPUT_REF\nReference to signal outputs that are directly related to the\nreferenced tracks\nTrackOptions\nMC_TRACK_REF\nReference to structure containing track related properties,\ne.g. the on/off compensations per output/track.\nInput\nEnable\nBOOL\nTRUE\n: Enables execution of function block.\nEnableMask\nDWORD\n16#FFFFFFFF\n32 bits of\nBOOL\nenabling the different tracks. Least\nsignificant data is related to the lowest\nTrackNumber\n.\nTappetMode\nMC_TAPPETMODE\ntp_mode_auto\nMode for position outputs\nOutput\nInOperation\nBOOL\nTRUE\n: Commanded tracks have been enabled.\nBusy\nBOOL\nTRUE\n: Execution of function block has not been finished\nyet.\nError\nBOOL\nTRUE\n: Error has occurred within the function block.\nErrorID\nSMC_ERROR\nError identification\nSwitchCorrupted\nINT\nSignals potential problems that arise from compensation times:\nCompensation times may lead to the case that the extrapolated position\npasses one switching point several times before passing the other\nswitching point again.\nAs a consequence, a non-inverted switch may become inverted\n(and the other way around).\nIn this case, this variable indicates the switch in concern.\nThere are two possible reasons:\nnoisy velocity-values,\nâbigâ difference between on- and off-compensation.\n-1 means that such behaviour hasnât occured.\nStructure:\nCheckHysteresis (Action)\nInitSwitch (Action)",
  "tables": [
    {
      "headers": [
        "Parameter",
        "Type",
        "Switch01",
        "Switch02",
        "Switch03",
        "Switch04"
      ],
      "rows": [
        {
          "Parameter": "TrackNumber",
          "Type": "INT",
          "Switch01": "1",
          "Switch02": "1",
          "Switch03": "1",
          "Switch04": "2"
        },
        {
          "Parameter": "FirstOnPosition [u]",
          "Type": "REAL",
          "Switch01": "2000",
          "Switch02": "2500",
          "Switch03": "4000",
          "Switch04": "3000"
        },
        {
          "Parameter": "LastOnPosition [u]",
          "Type": "REAL",
          "Switch01": "3000",
          "Switch02": "3000",
          "Switch03": "1000",
          "Switch04": "-"
        },
        {
          "Parameter": "AxisDirection",
          "Type": "INT",
          "Switch01": "1=Pos",
          "Switch02": "2=Neg",
          "Switch03": "0=Both",
          "Switch04": "0=Both"
        },
        {
          "Parameter": "CamSwitchMode",
          "Type": "INT",
          "Switch01": "0=Position",
          "Switch02": "0=Position",
          "Switch03": "0=Position",
          "Switch04": "1=TIME"
        },
        {
          "Parameter": "Duration",
          "Type": "TIME",
          "Switch01": "-",
          "Switch02": "-",
          "Switch03": "-",
          "Switch04": "1350"
        }
      ]
    },
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Initial",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Inout",
          "Name": "Axis",
          "Type": "AXIS_REF_SM3",
          "Initial": "",
          "Comment": "Reference to axis the switches are connected to"
        },
        [
          "Switches",
          "MC_CAMSWITCH_REF",
          "",
          "Reference to switching actions"
        ],
        [
          "Outputs",
          "MC_OUTPUT_REF",
          "",
          "Reference to signal outputs that are directly related to the\nreferenced tracks"
        ],
        [
          "TrackOptions",
          "MC_TRACK_REF",
          "",
          "Reference to structure containing track related properties,\ne.g. the on/off compensations per output/track."
        ],
        {
          "Scope": "Input",
          "Name": "Enable",
          "Type": "BOOL",
          "Initial": "",
          "Comment": "TRUE: Enables execution of function block."
        },
        [
          "EnableMask",
          "DWORD",
          "16#FFFFFFFF",
          "32 bits ofBOOLenabling the different tracks. Least\nsignificant data is related to the lowestTrackNumber."
        ],
        [
          "TappetMode",
          "MC_TAPPETMODE",
          "tp_mode_auto",
          "Mode for position outputs"
        ],
        {
          "Scope": "Output",
          "Name": "InOperation",
          "Type": "BOOL",
          "Initial": "",
          "Comment": "TRUE: Commanded tracks have been enabled."
        },
        [
          "Busy",
          "BOOL",
          "",
          "TRUE: Execution of function block has not been finished\nyet."
        ],
        [
          "Error",
          "BOOL",
          "",
          "TRUE: Error has occurred within the function block."
        ],
        [
          "ErrorID",
          "SMC_ERROR",
          "",
          "Error identification"
        ],
        [
          "SwitchCorrupted",
          "INT",
          "",
          "Signals potential problems that arise from compensation times:\nCompensation times may lead to the case that the extrapolated position\npasses one switching point several times before passing the other\nswitching point again.\nAs a consequence, a non-inverted switch may become inverted\n(and the other way around).\nIn this case, this variable indicates the switch in concern.\nThere are two possible reasons:noisy velocity-values,âbigâ difference between on- and off-compensation.-1 means that such behaviour hasnât occured."
        ]
      ]
    }
  ]
}