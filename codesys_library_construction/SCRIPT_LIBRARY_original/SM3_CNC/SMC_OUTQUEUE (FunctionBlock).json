{
  "library": "SM3_CNC",
  "title": "SMC_OUTQUEUE (FunctionBlock)",
  "url": "https://content.helpme-codesys.com/en/libs/SM3_CNC/Current/SM_CNC_Data-types/SoftMotion-CNC/SMC_OUTQUEUE.html",
  "page_title": "SMC_OUTQUEUE (FB)",
  "text": "GlobalTextList (GlobalTextList)\nImagePool_cnc_sm3 (ImagePool)\nImages\nLibrary Information\nGetLibVersion (Function)\nGetLibVersionNumber (Function)\nIsLibReleased (Function)\nProjektinformationen\nGetBooleanProperty (Function)\nGetCompany (Function)\nGetNumberProperty (Function)\nGetTextProperty (Function)\nGetTextProperty2 (Function)\nGetTitle (Function)\nGetVersion (Function)\nGetVersionProperty (Function)\nSM3_CNC_GetVersion (Function)\nSMC_CNC_LibParams (ParamList)\nSM_CNC_Data types\nFile\nSMC_SINGLEVAR (Struct)\nSMC_TOKENTYPE (Enum)\nSMC_VARLIST (Struct)\nSMC_VARTYPE (Enum)\nSoftMotion CNC\nSMC_ABC_SLOPES_AT_STOP (Enum)\nSMC_ABC_SLOPES_NO_STOP (Enum)\nSMC_ADDAXIS (Enum)\nSMC_AL_STATUS (Enum)\nSMC_CNC_REF (FunctionBlock)\nSMC_DEC_STATUS (Enum)\nSMC_DIRECTION (Enum)\nSMC_GAddress (Alias)\nSMC_GCODEVIEWER_DATA (Struct)\nSMC_GCODE_TEXT (Struct)\nSMC_GCODE_WORD (Struct)\nSMC_GCodeObjectId (Struct)\nSMC_GEOINFO (Struct)\nSMC_GWord (Struct)\nSMC_INT_STATUS (Enum)\nSMC_INT_VELMODE (Enum)\nSMC_LINE_3D (Struct)\nSMC_MOVTYP (Enum)\nSMC_M_PARAMETERS (Struct)\nSMC_OBJECTSPLITTERMODE (Enum)\nSMC_ORI_CONVENTION (Enum)\nSMC_OUTQUEUE (FunctionBlock)\nbFull (Property)\nSMC_PLANE_H (Struct)\nSMC_POSINFO (Struct)\nSMC_SEGMENT (Struct)\nSMC_SEGMENTTYPE (Enum)\nSMC_SMOOTHBSPLINE_MODE (Enum)\nSMC_SMOOTHPATHADDAXMODE (Enum)\nSMC_SMOOTHPATHMODE (Enum)\nSMC_Seg (Struct)\nSMC_TC_STATUS (Enum)\nSMC_TOOLCORRMODE (Enum)\nSMC_VECTOR6D (Struct)\nSM_CNC_POUs\nFile\nReadNCFile\nSMC_ReadNCFile (FunctionBlock)\nStream\nToken\nSMC_ReadNCQueue (FunctionBlock)\nCloseFile (Action)\nhelp functions\nSMC_StringBuffer (FunctionBlock)\nNC2\nGSentence\nSMC_GExpToken_Iterator (FunctionBlock)\nSMC_GJUMP_COMMAND (Enum)\nSMC_GJUMP_TARGET (Union)\nSMC_GSentence (Struct)\nSMC_GSentenceQueue (FunctionBlock)\nSMC_GSentence_DynCall (Struct)\nSMC_GSentence_GWords (Struct)\nSMC_GSentence_GWords_Create (Function)\nSMC_GSentence_Iterator (FunctionBlock)\nSMC_GSentence_Let (Struct)\nSMC_GSentence_SubCall (Struct)\nSMC_GSentence_SubRet (Struct)\nSMC_GSentence_Type (Enum)\nSMC_GSentence_Union (Union)\nSMC_GVarDecl (Struct)\nSMC_GVar_Type (Enum)\nSMC_GWord_Iterator (FunctionBlock)\nSMC_NC_CopySentence (Function)\nSMC_NC_CopySentenceChecked (Function)\nGSentenceJumpBuffer\nSMC_GSentenceJumpBuffer (FunctionBlock)\nInterpreter\nCallstack\nSMC_NCInterpreter (FunctionBlock)\nParser\nExpressions\nSMC_NCTokenParser (FunctionBlock)\nSMC_NC_SourcePosition (Struct)\nSymbolTable\nReadNCFile2\nSMC_IGSentenceModifier (Interface)\nSMC_INCLookup (Interface)\nSMC_ITokenModifier (Interface)\nSMC_NCLookupFile (FunctionBlock)\nSMC_NCNavigator (FunctionBlock)\nSMC_NC_CanProcessTokens (Function)\nSMC_NC_FindProgramFile (Function)\nSMC_NC_PrependDefaults (FunctionBlock)\nSMC_NC_TokenQueue_Completed (Function)\nSMC_ReadNCFile2 (FunctionBlock)\nSMC_ReadNCFromStream (FunctionBlock)\nSoftMotion CNC\nCoordinate Transformations\nSMC_CoordinateTransformation3D (FunctionBlock)\nSMC_DetermineCuboidBearing (FunctionBlock)\nSMC_InvCoordinateTransformation3D (FunctionBlock)\nSMC_TeachCoordinateSystem (FunctionBlock)\nSMC_UnitVectorToRPY (FunctionBlock)\nDirect Axis Control\nSMC_ControlAxisByPos (FunctionBlock)\nSMC_ControlAxisByPosVel (FunctionBlock)\nSMC_ControlAxisByVel (FunctionBlock)\nGCode Viewer\nSMC_GCodeViewer (FunctionBlock)\nGeoInfo Help Functions\nSMC_AdaptHelpMarks (Function)\nSMC_CalcEndPnt (Function)\nSMC_CalcLengthGeo (Function)\nSMC_CalcStartPnt (Function)\nSMC_CutEnd (Function)\nSMC_CutStart (Function)\nSMC_GeoinfoInit (Function)\nSMC_GetAccVec (Function)\nSMC_GetAddAxValue (Function)\nSMC_GetClosestPnt (Function)\nSMC_GetLengthOfPrefix (Function)\nSMC_GetPnt (Function)\nSMC_GetPntPI (Function)\nSMC_GetTanVec (Function)\nSMC_GetTanVec3D (Function)\nSMC_InvertDirection (Function)\nSMC_RampInCorr (Function)\nSMC_RampOutCorr (Function)\nSMC_RecalculateHelpMarks (Function)\nSMC_SingleCorr (Function)\nOutQueue Functions\nSMC_AppendObj (Function)\nSMC_DeleteObj (Function)\nSMC_GetCount (Function)\nSMC_GetHistoryCount (Function)\nSMC_GetLastObj (Function)\nSMC_GetObj (Function)\nSMC_GetObjFromEnd (Function)\nSMC_GetObjFromHistory (Function)\nSMC_OutQueueInit (Function)\nSMC_OutQueueIsSyncing (Function)\nSMC_OutQueue_IsFull (Function)\nSMC_RestoreQueue (Function)\nSMC_SetObj (Function)\nSMC_SetQueueCapacity (Function)\nPosinfo Functions\nSMC_PosInfo_Trf_Inverse (Function)\nSMC_PosInfo_Trf_Mult (Function)\nQueue manipulation\nSMC_QueueSetReservedEntries (FunctionBlock)\nSMC_RotateQueue2D (FunctionBlock)\nSMC_ScaleQueue3D (FunctionBlock)\nSMC_TranslateQueue3D (FunctionBlock)\nSoftMotion Function Blocks\nBlockSearch\nDecoderBuffer\nInterpolator_Help_Functions\nM_Functions\nNCDecoder_Help_Functions\nSMC_AddGCodeState (Struct)\nSMC_AvoidLoop (FunctionBlock)\nSMC_CheckForLimits (FunctionBlock)\nSMC_CheckVelocities (FunctionBlock)\nSMC_ExtendedVelocityChecks (FunctionBlock)\nSMC_Interpolator (FunctionBlock)\nSMC_Interpolator2Dir (FunctionBlock)\nSMC_Interpolator2Dir_SlowTask (FunctionBlock)\nSMC_LimitCircularVelocity (FunctionBlock)\nSMC_LimitDynamics (FunctionBlock)\nSMC_NCDecoder (FunctionBlock)\nSMC_ObjectSplitter (FunctionBlock)\nSMC_ReadAdditionalIpoState (FunctionBlock)\nSMC_RecomputeABCSlopes (FunctionBlock)\nSMC_ReduceVelEndAtCorner (FunctionBlock)\nSMC_RoundPath (FunctionBlock)\nSMC_SegmentAnalyzer (FunctionBlock)\nSMC_SetInterpreterStartPosition (FunctionBlock)\nSMC_SmoothAddAxes (FunctionBlock)\nSMC_SmoothBSpline (FunctionBlock)\nSMC_SmoothMerge (FunctionBlock)\nSMC_SmoothPath (FunctionBlock)\nSMC_ToolCorr (FunctionBlock)\nSMC_ToolLengthCorr (FunctionBlock)\nSMC_ToolRadiusCorr (FunctionBlock)\nSMC_XInterpolator (FunctionBlock)\nSM_Trafo_Data types\nSMC_ArticulatedRobot_6DOF_J0_State (Enum)\nSMC_ArticulatedRobot_6DOF_J1_State (Enum)\nSMC_ArticulatedRobot_6DOF_J4_State (Enum)\nSMC_TrafoConfig_4AxisPalletizer (Struct)\nSMC_TrafoConfig_ArticulatedRobot_6DOF (Struct)\nSMC_TrafoResult_4AxisPalletizer (Enum)\nSMC_TrafoResult_ArticulatedRobot_6DOF (Enum)\nSMC_VECTORDIR (Enum)\nSM_Trafo_POUs\nForward and inverse transformation\nSMC_TRAFOV_\nSoftMotion Transformations\nGantry systems\nParallel Systems\nRobot Kinematiks\nScara System\nWrapper\nadditional FBs\nVisu_Templates\nFile\nCNC\nSM_CNC_Visualizations\nFBs\nCNC\nDirect Axis Control\nTranslation & Rotation & Scaling\nhelp visu\nSM_Trafo_Visualizations\nTrafo templates\nGantry\nParallel\nRobot\nScara\nVisu_Templates_New\nFramed Visu Helpers\nTextListForCombobox_MC_DIRECTION (TextList)\nTextListForCombobox_SMC_ABC_SLOPES_AT_STOP (TextList)\nTextListForCombobox_SMC_ABC_SLOPES_NO_STOP (TextList)\nTextListForCombobox_SMC_AL_STATUS (TextList)\nTextListForCombobox_SMC_DEC_STATUS (TextList)\nTextListForCombobox_SMC_DIRECTION (TextList)\nTextListForCombobox_SMC_ERROR (TextList)\nTextListForCombobox_SMC_INT_STATUS (TextList)\nTextListForCombobox_SMC_INT_VELMODE (TextList)\nTextListForCombobox_SMC_ORI_CONVENTION (TextList)\nTextListForCombobox_SMC_SMOOTHBSPLINE_MODE (TextList)\nTextListForCombobox_SMC_SMOOTHPATHADDAXMODE (TextList)\nTextListForCombobox_SMC_SMOOTHPATHMODE (TextList)\nTextListForCombobox_SMC_TC_STATUS (TextList)\nTextListForCombobox_SMC_TOOLCORRMODE (TextList)\nFile and Project Information\nLibrary Reference\n3SLicense\nLibrary Identification\nLibrary Properties\nBase Interfaces\nLibrary Identification\nLibrary Properties\nCmpLog\nLibrary Identification\nLibrary Properties\nFloatingPointUtils\nLibrary Identification\nLibrary Properties\nMatrix\nLibrary Identification\nLibrary Properties\nSM3_Basic\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nSM3_RBase\nLibrary Identification\nLibrary Properties\nSM3_Shared\nLibrary Identification\nLibrary Properties\nSM3_Transformation\nLibrary Identification\nLibrary Properties\nStandard\nLibrary Identification\nLibrary Properties\nSysFile\nLibrary Identification\nLibrary Properties\nSysMem\nLibrary Identification\nLibrary Properties\nSysTarget\nLibrary Identification\nLibrary Properties\nSysTypes2 Interfaces\nLibrary Identification\nLibrary Properties\nVisuElem3DPath\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemCamDisplayer\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemMeter\nLibrary Identification\nLibrary Properties\nVisuElemTextEditor\nLibrary Identification\nLibrary Properties\nVisuElemTrace\nLibrary Identification\nLibrary Properties\nVisuElems\nLibrary Identification\nLibrary Properties\nVisuElemsAlarm\nLibrary Identification\nLibrary Properties\nVisuElemsDateTime\nLibrary Identification\nLibrary Properties\nVisuElemsSpecialControls\nLibrary Identification\nLibrary Properties\nVisuElemsWinControls\nLibrary Identification\nLibrary Properties\nVisuInputs\nLibrary Identification\nLibrary Properties\nVisuNativeControl\nLibrary Identification\nLibrary Properties\nSM3_CNC\nDocs\n»\nSM_CNC_Data\ntypes\n»\nSoftMotion\nCNC\n»\nSMC_OUTQUEUE (FB)\nSMC_OUTQUEUE (FB)\nÂ¶\nFUNCTION_BLOCK SMC_OUTQUEUE\nThis function block is designed to manage\nSMC_GEOINFO\nobjects\nin a list of defined size.\nThe path processing function blocks like\nSMC_NCDecoder\n,\nSMC_SmoothPath\n,\nSMC_RoundPath\n,\nSMC_AvoidLoop\nand\nSMC_ToolCorr\n- providing a pointer to an internally handled\nSMC_OUTQUEUE\n-structure -\nwill initialize this structure automatically.\nIf this queue is programmed and filled âmanuallyâ, then the correct\ninitialization has to be done manually also. For this purpose the\nfirst two variables (\npbyBuffer,\nsize\n) have to be assigned.\nNote\nIt is strictly recommended to use the functions inside the folder\nâOutQueue Functionsâ for working with an\nSMC_OUTQUEUE\nstructure,\nand to avoid any modification of its parameters after initialization.\nInOut:\nScope\nName\nType\nInitial\nComment\nInput\nwOUTQUEUEStructID\nWORD\n16#9878\nThe fix value of this variable allows to check\nif the provided structure variable is of type\nSMC_OUTQUEUE\n.\npbyBuffer\nPOINTER TO ARRAY [0..0]\nOF SMC_GeoInfo\nAddress of coherent memory buffer allocated for\nSMC_GEOINFO\nobjects.\nThe variable\npbyBuffer\nhas to be assigned in every cycle within the IEC program\nallocating the buffer.\nThe allocation is done within the declaration part, e.g. by using\nan array (BUFFER: ARRAY [0..99] OF\nSMC_GEOINFO\nfor a memory area\nlarge enough to hold 100\nSMC_GEOINFO\nobjects).\nnCapacity\nUDINT\nContains the capacity in multiples of\nSMC_GEOINFO\nobjects\n(The number OF\nSMC_GEOINFO\nobjects that fit into\npbyBuffer\n).\nThe function\nSMC_SetQueueCapacity\ninitializes this field.\nnReadPos\nUDINT\nContains the position in multiples of\nSMC_GEOINFO\nobjects of the\nfirst object in the list.\nbEndOfList\nBOOL\nIn order to avoid a buffer underrun (\nSMC_Interpolator\n), the SoftMotion\nfunction block being passed an\nSMC_OUTQUEUE\nstructure will not start with the\nprocessing of this queue, until it has been filled up completely.\nHowever, when working on the last\nSMC_GEOINFO\nobjects of a path,\nSMC_OUTQUEUE\nis no longer complete.\nHence, in order to keep the processing going on,\nbEndOfList\nhas to be\nset to\nTRUE\nas soon as the last\nSMC_GEOINFO\nobject has been stored.\nIn case that the list will be empty hereafter, but should be filled up\nagain,\nbEndOfList\nhas to be reset to\nFALSE\n.\nbyGenerator\nBYTE\n250\nOriginator of the queue. The interpolator will use this information for\nverifying that\nSMC_CheckVelocities\nhas been processed as prescribed.\nValid values are:\nSMC_NCDecoder\n: 1\nSMC_AvoidLoop\n: 10\nSMC_LimitCircularVelocity\n: 11\nSMC_RoundPath\n: 12\nSMC_SmoothPath\n: 13\nSMC_ToolCorr\n: 14\nSMC_RotateQueue2D\n: 30\nSMC_ScaleQueue3D\n: 31\nSMC_TranslateQueue3D\n: 32\nSMC_CheckVelocities\n: 254\nCNC editor: 255\nbReCheckVelocities\nBOOL\nInternal variable\nstrProgramName\nSTRING\nName of the CNC program\nnWritePos\nUDINT\nContains the next free position in multiples of\nSMC_GEOINFO\nobjects.\n(Declared after strProgramName in order to avoid cache thrashing:\nmake sure, nReadPos and nWritePos arenât part of the same cache line.))\nxPartofLM\nBOOL\nIf the input, generated by programming system, is\nTRUE\n,\nthe function block is maintained by managers.\nnNumReservedEntries\nUDINT\nThe number of reserved entries:\nif this number of free entries is reached, SMC_OutQueue.bFull will return TRUE.\nMust be at least 3 and at most\nnCapacity-1\n.\nnPastMarker\nDINT\nPoints to the first element that has been stored in the queue (if any)\nand has not yet been overwritten. So the elements from\nnPastMarker\nto\nnReadPos\n-1 are the âpastâ of the current queue.\nnPastMarker\nequals -1 if (and only if) no element has been appended\nto the queue yet.\nProperties:\nbFull\nStructure:\nbFull (Property)",
  "tables": [
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Initial",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Input",
          "Name": "wOUTQUEUEStructID",
          "Type": "WORD",
          "Initial": "16#9878",
          "Comment": "The fix value of this variable allows to check\nif the provided structure variable is of typeSMC_OUTQUEUE."
        },
        [
          "pbyBuffer",
          "POINTER TO ARRAY [0..0]\nOF SMC_GeoInfo",
          "",
          "Address of coherent memory buffer allocated forSMC_GEOINFOobjects.\nThe variablepbyBufferhas to be assigned in every cycle within the IEC program\nallocating the buffer.\nThe allocation is done within the declaration part, e.g. by using\nan array (BUFFER: ARRAY [0..99] OFSMC_GEOINFOfor a memory area\nlarge enough to hold 100SMC_GEOINFOobjects)."
        ],
        [
          "nCapacity",
          "UDINT",
          "",
          "Contains the capacity in multiples ofSMC_GEOINFOobjects\n(The number OFSMC_GEOINFOobjects that fit intopbyBuffer).\nThe functionSMC_SetQueueCapacityinitializes this field."
        ],
        [
          "nReadPos",
          "UDINT",
          "",
          "Contains the position in multiples ofSMC_GEOINFOobjects of the\nfirst object in the list."
        ],
        [
          "bEndOfList",
          "BOOL",
          "",
          "In order to avoid a buffer underrun (SMC_Interpolator), the SoftMotion\nfunction block being passed anSMC_OUTQUEUEstructure will not start with the\nprocessing of this queue, until it has been filled up completely.\nHowever, when working on the lastSMC_GEOINFOobjects of a path,SMC_OUTQUEUEis no longer complete.\nHence, in order to keep the processing going on,bEndOfListhas to be\nset toTRUEas soon as the lastSMC_GEOINFOobject has been stored.\nIn case that the list will be empty hereafter, but should be filled up\nagain,bEndOfListhas to be reset toFALSE."
        ],
        [
          "byGenerator",
          "BYTE",
          "250",
          "Originator of the queue. The interpolator will use this information for\nverifying thatSMC_CheckVelocitieshas been processed as prescribed.Valid values are:SMC_NCDecoder: 1SMC_AvoidLoop: 10SMC_LimitCircularVelocity: 11SMC_RoundPath: 12SMC_SmoothPath: 13SMC_ToolCorr: 14SMC_RotateQueue2D: 30SMC_ScaleQueue3D: 31SMC_TranslateQueue3D: 32SMC_CheckVelocities: 254CNC editor: 255"
        ],
        [
          "bReCheckVelocities",
          "BOOL",
          "",
          "Internal variable"
        ],
        [
          "strProgramName",
          "STRING",
          "",
          "Name of the CNC program"
        ],
        [
          "nWritePos",
          "UDINT",
          "",
          "Contains the next free position in multiples ofSMC_GEOINFOobjects.\n(Declared after strProgramName in order to avoid cache thrashing:\nmake sure, nReadPos and nWritePos arenât part of the same cache line.))"
        ],
        [
          "xPartofLM",
          "BOOL",
          "",
          "If the input, generated by programming system, isTRUE,\nthe function block is maintained by managers."
        ],
        [
          "nNumReservedEntries",
          "UDINT",
          "",
          "The number of reserved entries:\nif this number of free entries is reached, SMC_OutQueue.bFull will return TRUE.\nMust be at least 3 and at mostnCapacity-1."
        ],
        [
          "nPastMarker",
          "DINT",
          "",
          "Points to the first element that has been stored in the queue (if any)\nand has not yet been overwritten. So the elements fromnPastMarkertonReadPos-1 are the âpastâ of the current queue.nPastMarkerequals -1 if (and only if) no element has been appended\nto the queue yet."
        ]
      ]
    }
  ]
}