{
  "library": "SM3_CNC",
  "title": "SMC_LimitCircularVelocity (FunctionBlock)",
  "url": "https://content.helpme-codesys.com/en/libs/SM3_CNC/Current/SM_CNC_POUs/SoftMotion-CNC/SoftMotion-Function-Blocks/SMC_LimitCircularVelocity.html",
  "page_title": "SMC_LimitCircularVelocity (FB)",
  "text": "GlobalTextList (GlobalTextList)\nImagePool_cnc_sm3 (ImagePool)\nImages\nLibrary Information\nGetLibVersion (Function)\nGetLibVersionNumber (Function)\nIsLibReleased (Function)\nProjektinformationen\nGetBooleanProperty (Function)\nGetCompany (Function)\nGetNumberProperty (Function)\nGetTextProperty (Function)\nGetTextProperty2 (Function)\nGetTitle (Function)\nGetVersion (Function)\nGetVersionProperty (Function)\nSM3_CNC_GetVersion (Function)\nSMC_CNC_LibParams (ParamList)\nSM_CNC_Data types\nFile\nSMC_SINGLEVAR (Struct)\nSMC_TOKENTYPE (Enum)\nSMC_VARLIST (Struct)\nSMC_VARTYPE (Enum)\nSoftMotion CNC\nSMC_ABC_SLOPES_AT_STOP (Enum)\nSMC_ABC_SLOPES_NO_STOP (Enum)\nSMC_ADDAXIS (Enum)\nSMC_AL_STATUS (Enum)\nSMC_CNC_REF (FunctionBlock)\nSMC_DEC_STATUS (Enum)\nSMC_DIRECTION (Enum)\nSMC_GAddress (Alias)\nSMC_GCODEVIEWER_DATA (Struct)\nSMC_GCODE_TEXT (Struct)\nSMC_GCODE_WORD (Struct)\nSMC_GCodeObjectId (Struct)\nSMC_GEOINFO (Struct)\nSMC_GWord (Struct)\nSMC_INT_STATUS (Enum)\nSMC_INT_VELMODE (Enum)\nSMC_LINE_3D (Struct)\nSMC_MOVTYP (Enum)\nSMC_M_PARAMETERS (Struct)\nSMC_OBJECTSPLITTERMODE (Enum)\nSMC_ORI_CONVENTION (Enum)\nSMC_OUTQUEUE (FunctionBlock)\nbFull (Property)\nSMC_PLANE_H (Struct)\nSMC_POSINFO (Struct)\nSMC_SEGMENT (Struct)\nSMC_SEGMENTTYPE (Enum)\nSMC_SMOOTHBSPLINE_MODE (Enum)\nSMC_SMOOTHPATHADDAXMODE (Enum)\nSMC_SMOOTHPATHMODE (Enum)\nSMC_Seg (Struct)\nSMC_TC_STATUS (Enum)\nSMC_TOOLCORRMODE (Enum)\nSMC_VECTOR6D (Struct)\nSM_CNC_POUs\nFile\nReadNCFile\nSMC_ReadNCFile (FunctionBlock)\nStream\nToken\nSMC_ReadNCQueue (FunctionBlock)\nCloseFile (Action)\nhelp functions\nSMC_StringBuffer (FunctionBlock)\nNC2\nGSentence\nSMC_GExpToken_Iterator (FunctionBlock)\nSMC_GJUMP_COMMAND (Enum)\nSMC_GJUMP_TARGET (Union)\nSMC_GSentence (Struct)\nSMC_GSentenceQueue (FunctionBlock)\nSMC_GSentence_DynCall (Struct)\nSMC_GSentence_GWords (Struct)\nSMC_GSentence_GWords_Create (Function)\nSMC_GSentence_Iterator (FunctionBlock)\nSMC_GSentence_Let (Struct)\nSMC_GSentence_SubCall (Struct)\nSMC_GSentence_SubRet (Struct)\nSMC_GSentence_Type (Enum)\nSMC_GSentence_Union (Union)\nSMC_GVarDecl (Struct)\nSMC_GVar_Type (Enum)\nSMC_GWord_Iterator (FunctionBlock)\nSMC_NC_CopySentence (Function)\nSMC_NC_CopySentenceChecked (Function)\nGSentenceJumpBuffer\nSMC_GSentenceJumpBuffer (FunctionBlock)\nInterpreter\nCallstack\nSMC_NCInterpreter (FunctionBlock)\nParser\nExpressions\nSMC_NCTokenParser (FunctionBlock)\nSMC_NC_SourcePosition (Struct)\nSymbolTable\nReadNCFile2\nSMC_IGSentenceModifier (Interface)\nSMC_INCLookup (Interface)\nSMC_ITokenModifier (Interface)\nSMC_NCLookupFile (FunctionBlock)\nSMC_NCNavigator (FunctionBlock)\nSMC_NC_CanProcessTokens (Function)\nSMC_NC_FindProgramFile (Function)\nSMC_NC_PrependDefaults (FunctionBlock)\nSMC_NC_TokenQueue_Completed (Function)\nSMC_ReadNCFile2 (FunctionBlock)\nSMC_ReadNCFromStream (FunctionBlock)\nSoftMotion CNC\nCoordinate Transformations\nSMC_CoordinateTransformation3D (FunctionBlock)\nSMC_DetermineCuboidBearing (FunctionBlock)\nSMC_InvCoordinateTransformation3D (FunctionBlock)\nSMC_TeachCoordinateSystem (FunctionBlock)\nSMC_UnitVectorToRPY (FunctionBlock)\nDirect Axis Control\nSMC_ControlAxisByPos (FunctionBlock)\nSMC_ControlAxisByPosVel (FunctionBlock)\nSMC_ControlAxisByVel (FunctionBlock)\nGCode Viewer\nSMC_GCodeViewer (FunctionBlock)\nGeoInfo Help Functions\nSMC_AdaptHelpMarks (Function)\nSMC_CalcEndPnt (Function)\nSMC_CalcLengthGeo (Function)\nSMC_CalcStartPnt (Function)\nSMC_CutEnd (Function)\nSMC_CutStart (Function)\nSMC_GeoinfoInit (Function)\nSMC_GetAccVec (Function)\nSMC_GetAddAxValue (Function)\nSMC_GetClosestPnt (Function)\nSMC_GetLengthOfPrefix (Function)\nSMC_GetPnt (Function)\nSMC_GetPntPI (Function)\nSMC_GetTanVec (Function)\nSMC_GetTanVec3D (Function)\nSMC_InvertDirection (Function)\nSMC_RampInCorr (Function)\nSMC_RampOutCorr (Function)\nSMC_RecalculateHelpMarks (Function)\nSMC_SingleCorr (Function)\nOutQueue Functions\nSMC_AppendObj (Function)\nSMC_DeleteObj (Function)\nSMC_GetCount (Function)\nSMC_GetHistoryCount (Function)\nSMC_GetLastObj (Function)\nSMC_GetObj (Function)\nSMC_GetObjFromEnd (Function)\nSMC_GetObjFromHistory (Function)\nSMC_OutQueueInit (Function)\nSMC_OutQueueIsSyncing (Function)\nSMC_OutQueue_IsFull (Function)\nSMC_RestoreQueue (Function)\nSMC_SetObj (Function)\nSMC_SetQueueCapacity (Function)\nPosinfo Functions\nSMC_PosInfo_Trf_Inverse (Function)\nSMC_PosInfo_Trf_Mult (Function)\nQueue manipulation\nSMC_QueueSetReservedEntries (FunctionBlock)\nSMC_RotateQueue2D (FunctionBlock)\nSMC_ScaleQueue3D (FunctionBlock)\nSMC_TranslateQueue3D (FunctionBlock)\nSoftMotion Function Blocks\nBlockSearch\nDecoderBuffer\nInterpolator_Help_Functions\nM_Functions\nNCDecoder_Help_Functions\nSMC_AddGCodeState (Struct)\nSMC_AvoidLoop (FunctionBlock)\nSMC_CheckForLimits (FunctionBlock)\nSMC_CheckVelocities (FunctionBlock)\nSMC_ExtendedVelocityChecks (FunctionBlock)\nSMC_Interpolator (FunctionBlock)\nSMC_Interpolator2Dir (FunctionBlock)\nSMC_Interpolator2Dir_SlowTask (FunctionBlock)\nSMC_LimitCircularVelocity (FunctionBlock)\nSMC_LimitDynamics (FunctionBlock)\nSMC_NCDecoder (FunctionBlock)\nSMC_ObjectSplitter (FunctionBlock)\nSMC_ReadAdditionalIpoState (FunctionBlock)\nSMC_RecomputeABCSlopes (FunctionBlock)\nSMC_ReduceVelEndAtCorner (FunctionBlock)\nSMC_RoundPath (FunctionBlock)\nSMC_SegmentAnalyzer (FunctionBlock)\nSMC_SetInterpreterStartPosition (FunctionBlock)\nSMC_SmoothAddAxes (FunctionBlock)\nSMC_SmoothBSpline (FunctionBlock)\nSMC_SmoothMerge (FunctionBlock)\nSMC_SmoothPath (FunctionBlock)\nSMC_ToolCorr (FunctionBlock)\nSMC_ToolLengthCorr (FunctionBlock)\nSMC_ToolRadiusCorr (FunctionBlock)\nSMC_XInterpolator (FunctionBlock)\nSM_Trafo_Data types\nSMC_ArticulatedRobot_6DOF_J0_State (Enum)\nSMC_ArticulatedRobot_6DOF_J1_State (Enum)\nSMC_ArticulatedRobot_6DOF_J4_State (Enum)\nSMC_TrafoConfig_4AxisPalletizer (Struct)\nSMC_TrafoConfig_ArticulatedRobot_6DOF (Struct)\nSMC_TrafoResult_4AxisPalletizer (Enum)\nSMC_TrafoResult_ArticulatedRobot_6DOF (Enum)\nSMC_VECTORDIR (Enum)\nSM_Trafo_POUs\nForward and inverse transformation\nSMC_TRAFOV_\nSoftMotion Transformations\nGantry systems\nParallel Systems\nRobot Kinematiks\nScara System\nWrapper\nadditional FBs\nVisu_Templates\nFile\nCNC\nSM_CNC_Visualizations\nFBs\nCNC\nDirect Axis Control\nTranslation & Rotation & Scaling\nhelp visu\nSM_Trafo_Visualizations\nTrafo templates\nGantry\nParallel\nRobot\nScara\nVisu_Templates_New\nFramed Visu Helpers\nTextListForCombobox_MC_DIRECTION (TextList)\nTextListForCombobox_SMC_ABC_SLOPES_AT_STOP (TextList)\nTextListForCombobox_SMC_ABC_SLOPES_NO_STOP (TextList)\nTextListForCombobox_SMC_AL_STATUS (TextList)\nTextListForCombobox_SMC_DEC_STATUS (TextList)\nTextListForCombobox_SMC_DIRECTION (TextList)\nTextListForCombobox_SMC_ERROR (TextList)\nTextListForCombobox_SMC_INT_STATUS (TextList)\nTextListForCombobox_SMC_INT_VELMODE (TextList)\nTextListForCombobox_SMC_ORI_CONVENTION (TextList)\nTextListForCombobox_SMC_SMOOTHBSPLINE_MODE (TextList)\nTextListForCombobox_SMC_SMOOTHPATHADDAXMODE (TextList)\nTextListForCombobox_SMC_SMOOTHPATHMODE (TextList)\nTextListForCombobox_SMC_TC_STATUS (TextList)\nTextListForCombobox_SMC_TOOLCORRMODE (TextList)\nFile and Project Information\nLibrary Reference\n3SLicense\nLibrary Identification\nLibrary Properties\nBase Interfaces\nLibrary Identification\nLibrary Properties\nCmpLog\nLibrary Identification\nLibrary Properties\nFloatingPointUtils\nLibrary Identification\nLibrary Properties\nMatrix\nLibrary Identification\nLibrary Properties\nSM3_Basic\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nSM3_RBase\nLibrary Identification\nLibrary Properties\nSM3_Shared\nLibrary Identification\nLibrary Properties\nSM3_Transformation\nLibrary Identification\nLibrary Properties\nStandard\nLibrary Identification\nLibrary Properties\nSysFile\nLibrary Identification\nLibrary Properties\nSysMem\nLibrary Identification\nLibrary Properties\nSysTarget\nLibrary Identification\nLibrary Properties\nSysTypes2 Interfaces\nLibrary Identification\nLibrary Properties\nVisuElem3DPath\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemCamDisplayer\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemMeter\nLibrary Identification\nLibrary Properties\nVisuElemTextEditor\nLibrary Identification\nLibrary Properties\nVisuElemTrace\nLibrary Identification\nLibrary Properties\nVisuElems\nLibrary Identification\nLibrary Properties\nVisuElemsAlarm\nLibrary Identification\nLibrary Properties\nVisuElemsDateTime\nLibrary Identification\nLibrary Properties\nVisuElemsSpecialControls\nLibrary Identification\nLibrary Properties\nVisuElemsWinControls\nLibrary Identification\nLibrary Properties\nVisuInputs\nLibrary Identification\nLibrary Properties\nVisuNativeControl\nLibrary Identification\nLibrary Properties\nSM3_CNC\nDocs\n»\nSM_CNC_POUs\n»\nSoftMotion\nCNC\n»\nSoftMotion\nFunction\nBlocks\n»\nSMC_LimitCircularVelocity (FB)\nSMC_LimitCircularVelocity (FB)\nÂ¶\nFUNCTION_BLOCK SMC_LimitCircularVelocity\nThis function block limits the path velocities of circular elements\ndepending on the radius.\nFor a more general function block that limits the path velocity for\nall kinds of path elements, please see\nSMC_LimitDynamics\n.\nIn order to limit the acceleration to a prescribed value,\nthe velocity of the arc at the transition\nsqrt(a*r)\nmust not\nbe exceeded.\nThe function block controls the transition between two elements (line on\ncircular arc, circular arc on line or circular arc on circular arc)\nand adapts the end velocity of the first element so that the\nacceleration jump will not exceed the value\ndMaxAccJump\n.\nFurthermore, the function block limits the acceleration in\nX and Y to the value\ndMaxAcc\n.\nInOut:\nScope\nName\nType\nInitial\nComment\nInput\nbExecute\nBOOL\nFALSE\nExecution starts on the rising edge.\nbAbort\nBOOL\nFALSE\nIf\nTRUE\n, the current processing of this function block\nis aborted\nbAppend\nBOOL\nFALSE\nAs long as this input remains\nFALSE\n,\npoqDataOutQueue\nwill\nbe cleared at each reset.\nAs long as it remains\nTRUE\n, newly incoming data will be written\nto the end of the DataOutQueue.\npoqDataIn\nPOINTER TO\nSMC_OUTQUEUE\nSMC_NULL\nThis variable points to the\nSMC_OUTQUEUE\nstructure object,\nwhich contains the\nSMC_GEOINFO\nobjects of the path;\ntypically it points on the output\npoqDataOut\nof the\npreceding module (e.g. the\nSMC_NCDecoder\n).\ndMaxAcc\nLREAL\n0\nThis input variable gives the maximum acceleration value\npermissible for circular arcs.\nA value equal to 0 will cause no check to be done.\ndMaxAccJump\nLREAL\n0\nThis input variable gives the maximum acceleration jump\nfor a transition of two objects.\nA value equal to 0 will cause no check to be done.\nnSizeOutQueue\nUDINT\n0\nThis variable contains the size of the data buffer,\nthe list of\nSMC_GEOINFO\nstructure objects will be written to.\nThis buffer must be able to hold at least five\nSMC_GEOINFO\nobjects.\nOtherwise,\nSMC_LimitCircularVelocity\nwill not execute\nany actions at all. Its size may be predefined, but may be\nmodified later only during a reset.\nIt is recommended to create the buffer as described by the example below:\nExampleBuf:\nARRAY[1..50]\nof\nSMC_GeoInfo\n.\nThe correct buffer size will then be retrieved by use of\nthe operator\nsizeof(ExampleBuf)\n.\npbyBufferOutQueue\nPOINTER TO ARRAY [0..0]\nOF SMC_GEOINFO\nSMC_NULL\nThis input must point to the first byte of the memory area\nthat is allocated for the\nSMC_OUTQUEUE\nstructure.\nThis area must be at least as big as defined in\nnSizeOutQueue\n.\nTypically the allocation of the memory buffer is done in the\ndeclaration part of the IEC-program by defining an array\nof\nSMC_GEOINFO\n(e.g.\nBUF:\nARRAY[1..50]\nOF\nSMC_GEOINFO\n;\nfor a buffer that can store 50 path elements). The value may be\npredefined, but may be modified later on only during a reset.\nOutput\nbDone\nBOOL\nFALSE\nThis variable will be set to\nTRUE\nas soon as the input data\nfrom\npoqDataIn\nhas been processed completely.\nThereafter, the module will not perform any further actions\nuntil it gets reset.\nIf input\nbExecute\nis\nFALSE\n,\nbDone\nwill be reset to\nFALSE\n.\nbBusy\nBOOL\nFALSE\nTRUE\nwhile execution of function block is not finished\nbError\nBOOL\nFALSE\nSignals that an error has occurred within the function block\nwErrorID\nSMC_ERROR\nSMC_NO_ERROR\nError identification\npoqDataOut\nPOINTER TO\nSMC_OUTQUEUE\nSMC_NULL\nThis output points on the\nSMC_OUTQUEUE\nstructure managing\nthe new\nSMC_GEOINFO\nobjects.\nStructure:\nSMC_DoBeforeLeave (Action)\nSMC_LimitCircularVelocityInit (Action)",
  "tables": [
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Initial",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Input",
          "Name": "bExecute",
          "Type": "BOOL",
          "Initial": "FALSE",
          "Comment": "Execution starts on the rising edge."
        },
        [
          "bAbort",
          "BOOL",
          "FALSE",
          "IfTRUE, the current processing of this function block\nis aborted"
        ],
        [
          "bAppend",
          "BOOL",
          "FALSE",
          "As long as this input remainsFALSE,poqDataOutQueuewill\nbe cleared at each reset.\nAs long as it remainsTRUE, newly incoming data will be written\nto the end of the DataOutQueue."
        ],
        [
          "poqDataIn",
          "POINTER TOSMC_OUTQUEUE",
          "SMC_NULL",
          "This variable points to theSMC_OUTQUEUEstructure object,\nwhich contains theSMC_GEOINFOobjects of the path;\ntypically it points on the outputpoqDataOutof the\npreceding module (e.g. theSMC_NCDecoder)."
        ],
        [
          "dMaxAcc",
          "LREAL",
          "0",
          "This input variable gives the maximum acceleration value\npermissible for circular arcs.\nA value equal to 0 will cause no check to be done."
        ],
        [
          "dMaxAccJump",
          "LREAL",
          "0",
          "This input variable gives the maximum acceleration jump\nfor a transition of two objects.\nA value equal to 0 will cause no check to be done."
        ],
        [
          "nSizeOutQueue",
          "UDINT",
          "0",
          "This variable contains the size of the data buffer,\nthe list ofSMC_GEOINFOstructure objects will be written to.\nThis buffer must be able to hold at least fiveSMC_GEOINFOobjects.\nOtherwise,SMC_LimitCircularVelocitywill not execute\nany actions at all. Its size may be predefined, but may be\nmodified later only during a reset.\nIt is recommended to create the buffer as described by the example below:ExampleBuf:ARRAY[1..50]ofSMC_GeoInfo.The correct buffer size will then be retrieved by use of\nthe operatorsizeof(ExampleBuf)."
        ],
        [
          "pbyBufferOutQueue",
          "POINTER TO ARRAY [0..0]\nOF SMC_GEOINFO",
          "SMC_NULL",
          "This input must point to the first byte of the memory area\nthat is allocated for theSMC_OUTQUEUEstructure.\nThis area must be at least as big as defined innSizeOutQueue.\nTypically the allocation of the memory buffer is done in the\ndeclaration part of the IEC-program by defining an array\nofSMC_GEOINFO(e.g.BUF:ARRAY[1..50]OFSMC_GEOINFO;\nfor a buffer that can store 50 path elements). The value may be\npredefined, but may be modified later on only during a reset."
        ],
        {
          "Scope": "Output",
          "Name": "bDone",
          "Type": "BOOL",
          "Initial": "FALSE",
          "Comment": "This variable will be set toTRUEas soon as the input data\nfrompoqDataInhas been processed completely.\nThereafter, the module will not perform any further actions\nuntil it gets reset.\nIf inputbExecuteisFALSE,bDonewill be reset toFALSE."
        },
        [
          "bBusy",
          "BOOL",
          "FALSE",
          "TRUEwhile execution of function block is not finished"
        ],
        [
          "bError",
          "BOOL",
          "FALSE",
          "Signals that an error has occurred within the function block"
        ],
        [
          "wErrorID",
          "SMC_ERROR",
          "SMC_NO_ERROR",
          "Error identification"
        ],
        [
          "poqDataOut",
          "POINTER TOSMC_OUTQUEUE",
          "SMC_NULL",
          "This output points on theSMC_OUTQUEUEstructure managing\nthe newSMC_GEOINFOobjects."
        ]
      ]
    }
  ]
}