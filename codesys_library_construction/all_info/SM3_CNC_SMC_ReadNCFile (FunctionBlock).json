{
  "library": "SM3_CNC",
  "title": "SMC_ReadNCFile (FunctionBlock)",
  "url": "https://content.helpme-codesys.com/en/libs/SM3_CNC/Current/SM_CNC_POUs/File/ReadNCFile/SMC_ReadNCFile.html",
  "page_title": "SMC_ReadNCFile (FB)",
  "text": "GlobalTextList (GlobalTextList)\nImagePool_cnc_sm3 (ImagePool)\nImages\nLibrary Information\nGetLibVersion (Function)\nGetLibVersionNumber (Function)\nIsLibReleased (Function)\nProjektinformationen\nGetBooleanProperty (Function)\nGetCompany (Function)\nGetNumberProperty (Function)\nGetTextProperty (Function)\nGetTextProperty2 (Function)\nGetTitle (Function)\nGetVersion (Function)\nGetVersionProperty (Function)\nSM3_CNC_GetVersion (Function)\nSMC_CNC_LibParams (ParamList)\nSM_CNC_Data types\nFile\nSMC_SINGLEVAR (Struct)\nSMC_TOKENTYPE (Enum)\nSMC_VARLIST (Struct)\nSMC_VARTYPE (Enum)\nSoftMotion CNC\nSMC_ABC_SLOPES_AT_STOP (Enum)\nSMC_ABC_SLOPES_NO_STOP (Enum)\nSMC_ADDAXIS (Enum)\nSMC_AL_STATUS (Enum)\nSMC_CNC_REF (FunctionBlock)\nSMC_DEC_STATUS (Enum)\nSMC_DIRECTION (Enum)\nSMC_GAddress (Alias)\nSMC_GCODEVIEWER_DATA (Struct)\nSMC_GCODE_TEXT (Struct)\nSMC_GCODE_WORD (Struct)\nSMC_GCodeObjectId (Struct)\nSMC_GEOINFO (Struct)\nSMC_GWord (Struct)\nSMC_INT_STATUS (Enum)\nSMC_INT_VELMODE (Enum)\nSMC_LINE_3D (Struct)\nSMC_MOVTYP (Enum)\nSMC_M_PARAMETERS (Struct)\nSMC_OBJECTSPLITTERMODE (Enum)\nSMC_ORI_CONVENTION (Enum)\nSMC_OUTQUEUE (FunctionBlock)\nbFull (Property)\nSMC_PLANE_H (Struct)\nSMC_POSINFO (Struct)\nSMC_SEGMENT (Struct)\nSMC_SEGMENTTYPE (Enum)\nSMC_SMOOTHBSPLINE_MODE (Enum)\nSMC_SMOOTHPATHADDAXMODE (Enum)\nSMC_SMOOTHPATHMODE (Enum)\nSMC_Seg (Struct)\nSMC_TC_STATUS (Enum)\nSMC_TOOLCORRMODE (Enum)\nSMC_VECTOR6D (Struct)\nSM_CNC_POUs\nFile\nReadNCFile\nSMC_ReadNCFile (FunctionBlock)\nStream\nToken\nSMC_ReadNCQueue (FunctionBlock)\nCloseFile (Action)\nhelp functions\nSMC_StringBuffer (FunctionBlock)\nNC2\nGSentence\nSMC_GExpToken_Iterator (FunctionBlock)\nSMC_GJUMP_COMMAND (Enum)\nSMC_GJUMP_TARGET (Union)\nSMC_GSentence (Struct)\nSMC_GSentenceQueue (FunctionBlock)\nSMC_GSentence_DynCall (Struct)\nSMC_GSentence_GWords (Struct)\nSMC_GSentence_GWords_Create (Function)\nSMC_GSentence_Iterator (FunctionBlock)\nSMC_GSentence_Let (Struct)\nSMC_GSentence_SubCall (Struct)\nSMC_GSentence_SubRet (Struct)\nSMC_GSentence_Type (Enum)\nSMC_GSentence_Union (Union)\nSMC_GVarDecl (Struct)\nSMC_GVar_Type (Enum)\nSMC_GWord_Iterator (FunctionBlock)\nSMC_NC_CopySentence (Function)\nSMC_NC_CopySentenceChecked (Function)\nGSentenceJumpBuffer\nSMC_GSentenceJumpBuffer (FunctionBlock)\nInterpreter\nCallstack\nSMC_NCInterpreter (FunctionBlock)\nParser\nExpressions\nSMC_NCTokenParser (FunctionBlock)\nSMC_NC_SourcePosition (Struct)\nSymbolTable\nReadNCFile2\nSMC_IGSentenceModifier (Interface)\nSMC_INCLookup (Interface)\nSMC_ITokenModifier (Interface)\nSMC_NCLookupFile (FunctionBlock)\nSMC_NCNavigator (FunctionBlock)\nSMC_NC_CanProcessTokens (Function)\nSMC_NC_FindProgramFile (Function)\nSMC_NC_PrependDefaults (FunctionBlock)\nSMC_NC_TokenQueue_Completed (Function)\nSMC_ReadNCFile2 (FunctionBlock)\nSMC_ReadNCFromStream (FunctionBlock)\nSoftMotion CNC\nCoordinate Transformations\nSMC_CoordinateTransformation3D (FunctionBlock)\nSMC_DetermineCuboidBearing (FunctionBlock)\nSMC_InvCoordinateTransformation3D (FunctionBlock)\nSMC_TeachCoordinateSystem (FunctionBlock)\nSMC_UnitVectorToRPY (FunctionBlock)\nDirect Axis Control\nSMC_ControlAxisByPos (FunctionBlock)\nSMC_ControlAxisByPosVel (FunctionBlock)\nSMC_ControlAxisByVel (FunctionBlock)\nGCode Viewer\nSMC_GCodeViewer (FunctionBlock)\nGeoInfo Help Functions\nSMC_AdaptHelpMarks (Function)\nSMC_CalcEndPnt (Function)\nSMC_CalcLengthGeo (Function)\nSMC_CalcStartPnt (Function)\nSMC_CutEnd (Function)\nSMC_CutStart (Function)\nSMC_GeoinfoInit (Function)\nSMC_GetAccVec (Function)\nSMC_GetAddAxValue (Function)\nSMC_GetClosestPnt (Function)\nSMC_GetLengthOfPrefix (Function)\nSMC_GetPnt (Function)\nSMC_GetPntPI (Function)\nSMC_GetTanVec (Function)\nSMC_GetTanVec3D (Function)\nSMC_InvertDirection (Function)\nSMC_RampInCorr (Function)\nSMC_RampOutCorr (Function)\nSMC_RecalculateHelpMarks (Function)\nSMC_SingleCorr (Function)\nOutQueue Functions\nSMC_AppendObj (Function)\nSMC_DeleteObj (Function)\nSMC_GetCount (Function)\nSMC_GetHistoryCount (Function)\nSMC_GetLastObj (Function)\nSMC_GetObj (Function)\nSMC_GetObjFromEnd (Function)\nSMC_GetObjFromHistory (Function)\nSMC_OutQueueInit (Function)\nSMC_OutQueueIsSyncing (Function)\nSMC_OutQueue_IsFull (Function)\nSMC_RestoreQueue (Function)\nSMC_SetObj (Function)\nSMC_SetQueueCapacity (Function)\nPosinfo Functions\nSMC_PosInfo_Trf_Inverse (Function)\nSMC_PosInfo_Trf_Mult (Function)\nQueue manipulation\nSMC_QueueSetReservedEntries (FunctionBlock)\nSMC_RotateQueue2D (FunctionBlock)\nSMC_ScaleQueue3D (FunctionBlock)\nSMC_TranslateQueue3D (FunctionBlock)\nSoftMotion Function Blocks\nBlockSearch\nDecoderBuffer\nInterpolator_Help_Functions\nM_Functions\nNCDecoder_Help_Functions\nSMC_AddGCodeState (Struct)\nSMC_AvoidLoop (FunctionBlock)\nSMC_CheckForLimits (FunctionBlock)\nSMC_CheckVelocities (FunctionBlock)\nSMC_ExtendedVelocityChecks (FunctionBlock)\nSMC_Interpolator (FunctionBlock)\nSMC_Interpolator2Dir (FunctionBlock)\nSMC_Interpolator2Dir_SlowTask (FunctionBlock)\nSMC_LimitCircularVelocity (FunctionBlock)\nSMC_LimitDynamics (FunctionBlock)\nSMC_NCDecoder (FunctionBlock)\nSMC_ObjectSplitter (FunctionBlock)\nSMC_ReadAdditionalIpoState (FunctionBlock)\nSMC_RecomputeABCSlopes (FunctionBlock)\nSMC_ReduceVelEndAtCorner (FunctionBlock)\nSMC_RoundPath (FunctionBlock)\nSMC_SegmentAnalyzer (FunctionBlock)\nSMC_SetInterpreterStartPosition (FunctionBlock)\nSMC_SmoothAddAxes (FunctionBlock)\nSMC_SmoothBSpline (FunctionBlock)\nSMC_SmoothMerge (FunctionBlock)\nSMC_SmoothPath (FunctionBlock)\nSMC_ToolCorr (FunctionBlock)\nSMC_ToolLengthCorr (FunctionBlock)\nSMC_ToolRadiusCorr (FunctionBlock)\nSMC_XInterpolator (FunctionBlock)\nSM_Trafo_Data types\nSMC_ArticulatedRobot_6DOF_J0_State (Enum)\nSMC_ArticulatedRobot_6DOF_J1_State (Enum)\nSMC_ArticulatedRobot_6DOF_J4_State (Enum)\nSMC_TrafoConfig_4AxisPalletizer (Struct)\nSMC_TrafoConfig_ArticulatedRobot_6DOF (Struct)\nSMC_TrafoResult_4AxisPalletizer (Enum)\nSMC_TrafoResult_ArticulatedRobot_6DOF (Enum)\nSMC_VECTORDIR (Enum)\nSM_Trafo_POUs\nForward and inverse transformation\nSMC_TRAFOV_\nSoftMotion Transformations\nGantry systems\nParallel Systems\nRobot Kinematiks\nScara System\nWrapper\nadditional FBs\nVisu_Templates\nFile\nCNC\nSM_CNC_Visualizations\nFBs\nCNC\nDirect Axis Control\nTranslation & Rotation & Scaling\nhelp visu\nSM_Trafo_Visualizations\nTrafo templates\nGantry\nParallel\nRobot\nScara\nVisu_Templates_New\nFramed Visu Helpers\nTextListForCombobox_MC_DIRECTION (TextList)\nTextListForCombobox_SMC_ABC_SLOPES_AT_STOP (TextList)\nTextListForCombobox_SMC_ABC_SLOPES_NO_STOP (TextList)\nTextListForCombobox_SMC_AL_STATUS (TextList)\nTextListForCombobox_SMC_DEC_STATUS (TextList)\nTextListForCombobox_SMC_DIRECTION (TextList)\nTextListForCombobox_SMC_ERROR (TextList)\nTextListForCombobox_SMC_INT_STATUS (TextList)\nTextListForCombobox_SMC_INT_VELMODE (TextList)\nTextListForCombobox_SMC_ORI_CONVENTION (TextList)\nTextListForCombobox_SMC_SMOOTHBSPLINE_MODE (TextList)\nTextListForCombobox_SMC_SMOOTHPATHADDAXMODE (TextList)\nTextListForCombobox_SMC_SMOOTHPATHMODE (TextList)\nTextListForCombobox_SMC_TC_STATUS (TextList)\nTextListForCombobox_SMC_TOOLCORRMODE (TextList)\nFile and Project Information\nLibrary Reference\n3SLicense\nLibrary Identification\nLibrary Properties\nBase Interfaces\nLibrary Identification\nLibrary Properties\nCmpLog\nLibrary Identification\nLibrary Properties\nFloatingPointUtils\nLibrary Identification\nLibrary Properties\nMatrix\nLibrary Identification\nLibrary Properties\nSM3_Basic\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nSM3_RBase\nLibrary Identification\nLibrary Properties\nSM3_Shared\nLibrary Identification\nLibrary Properties\nSM3_Transformation\nLibrary Identification\nLibrary Properties\nStandard\nLibrary Identification\nLibrary Properties\nSysFile\nLibrary Identification\nLibrary Properties\nSysMem\nLibrary Identification\nLibrary Properties\nSysTarget\nLibrary Identification\nLibrary Properties\nSysTypes2 Interfaces\nLibrary Identification\nLibrary Properties\nVisuElem3DPath\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemCamDisplayer\nLibrary Identification\nLibrary Properties\nLibrary Parameter\nVisuElemMeter\nLibrary Identification\nLibrary Properties\nVisuElemTextEditor\nLibrary Identification\nLibrary Properties\nVisuElemTrace\nLibrary Identification\nLibrary Properties\nVisuElems\nLibrary Identification\nLibrary Properties\nVisuElemsAlarm\nLibrary Identification\nLibrary Properties\nVisuElemsDateTime\nLibrary Identification\nLibrary Properties\nVisuElemsSpecialControls\nLibrary Identification\nLibrary Properties\nVisuElemsWinControls\nLibrary Identification\nLibrary Properties\nVisuInputs\nLibrary Identification\nLibrary Properties\nVisuNativeControl\nLibrary Identification\nLibrary Properties\nSM3_CNC\nDocs\n»\nSM_CNC_POUs\n»\nFile\n»\nReadNCFile\n»\nSMC_ReadNCFile (FB)\nSMC_ReadNCFile (FB)\nÂ¶\nFUNCTION_BLOCK SMC_ReadNCFile\nSMC_ReadNCFile\ncan read a NC-ASCII-file from the file system of\nthe controller in order to make it available for the\nSMC_NCDecoder\n.\nThus, a NC program can be read in and decoded at runtime.\nNote\nThis function block has been superseeded by\nSMC_ReadNCFile2\nand is kept only for compatibility.  It is recommended to use\nSMC_ReadNCFile2\n, which has additional features like mathematical expressions\nor sub programs in g-code\nInOut:\nScope\nName\nType\nInitial\nComment\nInput\nbExecute\nBOOL\nRising edge: Starts execution. While\nTRUE\n, the function\nblock is active.\nsFileName\nSTRING(255)\nââ\nFile path\npvl\nPOINTER TO\nSMC_VARLIST\nIf there arenât variables in the CNC programm, this input\nisnât set.\nSMC_VARLIST\npBuffer\nPOINTER TO BYTE\nPointer on a sufficiently large, free data area (buffer) that is allocated in the IEC application.\nIt is strongly recommended to allocate the buffer as\nARRAY[0..x]\nOF\n|ioSMC_GCODE_WORD|\nin order to make sure to have a correct data alignment.\nA definition of\nARRAY[0..x]\nOF\nBYTE\nmay lead to a misaligned data access on some platforms.\ndwBufferSize\nDWORD\nSize of the buffer in byte\nfDefaultVel\nLREAL\nDefault velocity; used if velocity is not specified inside\nthe CNC file.\nfDefaultAccel\nLREAL\nDefault acceleration; used if acceleration is not specified\ninside the CNC file\nfDefaultDecel\nLREAL\nDefault deceleration used if deceleration is not specified\ninside the CNC file\nfDefaultVelFF\nLREAL\nDefault velocity for fast forward (G0), FF word. It is used\nif no velocity is specified inside the CNC file.\nfDefaultAccelFF\nLREAL\nDefault acceleration for fast forward (G0), EF+ word. It is\nused if no acceleration is specified inside the CNC file.\nfDefaultDecelFF\nLREAL\nDefault deceleration for fast forward (G0), EF- word. A non-\nnegative value is expected used if no deceleration is\nspecified inside the CNC file.\nb3DMode\nBOOL\nIf\nTRUE\n, a G17 command (activation 3D-mode) is executed\nimplicitly.\npStringBuffer\nPOINTER TO\nSMC_StringBuffer\nPointer to an object of type\nSMC_StringBuffer\n.\nThis object is used to store strings that are defined in the G-code program in order to write them to variables using G36&37.\nIf the pointer is not set (0) and string constants are used in the G-code program, an error will be generated.(\nSMC_RNCF_NO_STRINGBUFFER\n).\nbEnableSyntaxChecks\nBOOL\nTurns on syntax checks that will detect invalid G-code and\nstop with an error in this case\nOutput\nbDone\nBOOL\nTRUE\nif parameter is available\nbBusy\nBOOL\nTRUE\nwhile execution of function block is not finished\nbError\nBOOL\nTRUE\nsignals that an error has occurred within\nthe function block.\nErrorID\nSMC_ERROR\nError identification,\nSMC_ERROR\nbExecuteDecoder\nBOOL\nSignal for triggering the input Execute of the\nSMC_NCDecoder\nmodule.\nncprog\nSMC_CNC_REF\nSTRUCT(nElements := 0)\nCNC program, input of the succeeding\nSMC_NCDecoder\nmodule.\ndwFileSize\nDWORD\nSize of the file in bytes.\ndwPos\nDWORD\nCurrent Position of the cursor in the file.",
  "tables": [
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Initial",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Input",
          "Name": "bExecute",
          "Type": "BOOL",
          "Initial": "",
          "Comment": "Rising edge: Starts execution. WhileTRUE, the function\nblock is active."
        },
        [
          "sFileName",
          "STRING(255)",
          "ââ",
          "File path"
        ],
        [
          "pvl",
          "POINTER TOSMC_VARLIST",
          "",
          "If there arenât variables in the CNC programm, this input\nisnât set.SMC_VARLIST"
        ],
        [
          "pBuffer",
          "POINTER TO BYTE",
          "",
          "Pointer on a sufficiently large, free data area (buffer) that is allocated in the IEC application.\nIt is strongly recommended to allocate the buffer asARRAY[0..x]OF|ioSMC_GCODE_WORD|in order to make sure to have a correct data alignment.\nA definition ofARRAY[0..x]OFBYTEmay lead to a misaligned data access on some platforms."
        ],
        [
          "dwBufferSize",
          "DWORD",
          "",
          "Size of the buffer in byte"
        ],
        [
          "fDefaultVel",
          "LREAL",
          "",
          "Default velocity; used if velocity is not specified inside\nthe CNC file."
        ],
        [
          "fDefaultAccel",
          "LREAL",
          "",
          "Default acceleration; used if acceleration is not specified\ninside the CNC file"
        ],
        [
          "fDefaultDecel",
          "LREAL",
          "",
          "Default deceleration used if deceleration is not specified\ninside the CNC file"
        ],
        [
          "fDefaultVelFF",
          "LREAL",
          "",
          "Default velocity for fast forward (G0), FF word. It is used\nif no velocity is specified inside the CNC file."
        ],
        [
          "fDefaultAccelFF",
          "LREAL",
          "",
          "Default acceleration for fast forward (G0), EF+ word. It is\nused if no acceleration is specified inside the CNC file."
        ],
        [
          "fDefaultDecelFF",
          "LREAL",
          "",
          "Default deceleration for fast forward (G0), EF- word. A non-\nnegative value is expected used if no deceleration is\nspecified inside the CNC file."
        ],
        [
          "b3DMode",
          "BOOL",
          "",
          "IfTRUE, a G17 command (activation 3D-mode) is executed\nimplicitly."
        ],
        [
          "pStringBuffer",
          "POINTER TOSMC_StringBuffer",
          "",
          "Pointer to an object of typeSMC_StringBuffer.\nThis object is used to store strings that are defined in the G-code program in order to write them to variables using G36&37.\nIf the pointer is not set (0) and string constants are used in the G-code program, an error will be generated.(SMC_RNCF_NO_STRINGBUFFER)."
        ],
        [
          "bEnableSyntaxChecks",
          "BOOL",
          "",
          "Turns on syntax checks that will detect invalid G-code and\nstop with an error in this case"
        ],
        {
          "Scope": "Output",
          "Name": "bDone",
          "Type": "BOOL",
          "Initial": "",
          "Comment": "TRUEif parameter is available"
        },
        [
          "bBusy",
          "BOOL",
          "",
          "TRUEwhile execution of function block is not finished"
        ],
        [
          "bError",
          "BOOL",
          "",
          "TRUEsignals that an error has occurred within\nthe function block."
        ],
        [
          "ErrorID",
          "SMC_ERROR",
          "",
          "Error identification,SMC_ERROR"
        ],
        [
          "bExecuteDecoder",
          "BOOL",
          "",
          "Signal for triggering the input Execute of theSMC_NCDecodermodule."
        ],
        [
          "ncprog",
          "SMC_CNC_REF",
          "STRUCT(nElements := 0)",
          "CNC program, input of the succeedingSMC_NCDecodermodule."
        ],
        [
          "dwFileSize",
          "DWORD",
          "",
          "Size of the file in bytes."
        ],
        [
          "dwPos",
          "DWORD",
          "",
          "Current Position of the cursor in the file."
        ]
      ]
    }
  ]
}