{
  "library": "CmpBACnet",
  "title": "BACnetReadFile (Function)",
  "url": "https://content.helpme-codesys.com/en/libs/CmpBACnet/Current/BACnetClientAPI/BACnetReadFile.html",
  "page_title": "BACnetReadFile (FUN)",
  "text": "\nFUNCTION BACnetReadFile :\nIEC_BACNET_STATUS\nSends an AtomicReadFile request.\nSends a request to read the contents of the specified file beginning from the\nspecified position. The file may be accessed as records or as a stream of octets\nthat is defined by the contents of File_Access_Method property of the File object.\nSince the present version of this API does not support a default processing of this\nservice, the user application has to include a Hook procedure to process it. This\nroutine may control APDU properties like APDU length, segmentation, and timeout for\nboth request and response. This routine can execute asynchronously, i.e. this routine\nwill return to the caller before the BACnet reply comes so that the applications can\nkeep running. In this case the response information will be received by the thread\nwhich is responsible for receiving asynchronous responses. An optional\nBACNET_READ_FILE_COMPLETE_CB routine, which is provided by the BACnet application,\nshall be used to process this information. If a number of asynchronous requests are\nsent, the responses shall be queued and identified by the transaction handles. If\napplication does not supply the BACNET_READ_FILE_COMPLETE_CB routine; then the\nBACnetReadFile routine sends a request and waits for reply.\nAsynchron call, which fills pResult with the call result in an asynchronus manner. As soon as pResultStatus\nis\nIEC_BACNET_STATUS.BACNET_STATUS_OK\nthe data in pResult is valid.\n",
  "tables": [
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Return",
          "Name": "BACnetReadFile",
          "Type": "IEC_BACNET_STATUS",
          "Comment": "A status indicating if the operation worked."
        },
        {
          "Scope": "Input",
          "Name": "pSourceAddress",
          "Type": "POINTER TOIEC_BACNET_ADDRESS",
          "Comment": "If the BACnet application has only one device constructed and installed, this can\nbe 0. In this case the MAC address of this device will be used. Otherwise this\nshall be the MAC address returned on device object construction."
        },
        [
          "pDestinationAddress",
          "POINTER TOIEC_BACNET_ADDRESS",
          "This is the MAC address of the device to which the request\nshould be sent."
        ],
        [
          "pReadInfo",
          "POINTER TOIEC_BACNET_READ_FILE_INFO",
          "A pointer to hold the request information data structure. This data structure\ncontains the objectID, File Access Type (IEC_BACNET_FILE_ACCESS_TYPE.FILE_ACCESS_STREAMorIEC_BACNET_FILE_ACCESS_TYPE.FILE_ACCESS_RECORD) and Read File Range information."
        ],
        [
          "pAPDUParams",
          "POINTER TOIEC_BACNET_APDU_PROPERTIES",
          "A pointer to the APDU-Properties structure which sets APDU properties for this\ntransaction only. This does not change global defaults or settings for the application\nAPDU Properties. This argument may be 0. In this case APDU properties  are used\nwhich were specified in the device object properties of the applications device which\nsends the request."
        ],
        [
          "pResult",
          "POINTER TOIEC_BACNET_READ_FILE_RESULT",
          "A pointer to a buffer to hold the response data if successful reading (datatypeIEC_BACNET_READ_FILE_RESULT). This pointer may be 0 if the asynchron call is used.\nIn this case the memory for the response is allocated by the API and the application is\nresponsible to release it with a call toBACnetFreeStackAllocatedMemoryif the\nbuffer is no longer needed."
        ],
        [
          "pTransactionToken",
          "POINTER TOBACnetAsyncTransactionToken",
          "Transaction token of the asynchronous call - seeBACnetAsyncTransactionToken."
        ],
        [
          "pError",
          "POINTER TOIEC_BACNET_ERROR",
          "A pointer to a structure to hold BACnet Error information. pError may be 0 if the\napplication isnât interested in detailed error information."
        ]
      ]
    }
  ]
}