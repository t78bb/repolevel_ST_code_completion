{
  "library": "CmpBACnet",
  "title": "BACnetGetEventInfo (Function)",
  "url": "https://content.helpme-codesys.com/en/libs/CmpBACnet/Current/BACnetClientAPI/BACnetGetEventInfo.html",
  "page_title": "BACnetGetEventInfo (FUN)",
  "text": "\nFUNCTION BACnetGetEventInfo :\nIEC_BACNET_STATUS\nSends a GetEventInformation request.\nSends a request to obtain a summary of âevent-activeâ objects within the given device\nthat generates event notifications. The âevent-activeâ objects are objects that have\nany value other than\nIEC_BACNET_EVENT_STATE.STATE_NORMAL\nfor the Event_State property, or have an acked-\ntransitions property that has at least one of the bits (\nIEC_BACNET_EVENT_TRANSITION_BITS.EVENT_TRANSITION_TO_OFFNORMAL\n,\nIEC_BACNET_EVENT_TRANSITION_BITS.EVENT_TRANSITION_TO_FAULT\n,\nIEC_BACNET_EVENT_TRANSITION_BITS.EVENT_TRANSITION_TO_NORMAL\n)\nset to FALSE. This routine allows to control APDU properties like APDU\nlength, segmentation, and timeout for both requests and responses. This routine can\nexecute asynchronously, i.e. this routine will return to the caller before the BACnet\nreply comes so that the application can keep running. In this case the response\ninformation will be received by the thread which is responsible for receiving\nasynchronous responses. An optional BACNET_EVENT_INFO_COMPLETE_CB routine,\nwhich is provided by the BACnet application, shall be used to process this information.\nIf a number of asynchronous service requests are sent, the responses shall be queued\nand identified by the transaction handles. If the application does not supply the\nBACNET_EVENT_INFO_COMPLETE_CB routine, then this routine sends out a request and waits\nfor a response.\nAsynchron call, which fills pResult with the call result in an asynchronus manner. As soon as pInfoBufferStatus\nis\nIEC_BACNET_STATUS.BACNET_STATUS_OK\nthe data in pResult is valid.\n",
  "tables": [
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Return",
          "Name": "BACnetGetEventInfo",
          "Type": "IEC_BACNET_STATUS",
          "Comment": "A status indicating if the operation worked."
        },
        {
          "Scope": "Input",
          "Name": "pSourceAddress",
          "Type": "POINTER TOIEC_BACNET_ADDRESS",
          "Comment": "If the BACnet application has only one device constructed and installed, this can\nbe 0. In this case the MAC address of this device will be used. Otherwise this\nshall be the MAC address returned on device object construction."
        },
        [
          "pDestinationAddress",
          "POINTER TOIEC_BACNET_ADDRESS",
          "This is the MAC address of the device to which the request\nshould be sent."
        ],
        [
          "pServiceInfo",
          "POINTER TOIEC_BACNET_EVENT_INFO_INFO",
          "A pointer to a memory block that holds a data structure of datatypeIEC_BACNET_EVENT_INFO_INFO. This data structure may contain optional ObjectID parameter\nto specify the last Object Identifier received in a preceding Get Event Info ACK\nif itâs moreEvents field was TRUE. If ObjectID parameter is omitted, the returned\nsummary shall start with the first event-active object."
        ],
        [
          "pAPDUParams",
          "POINTER TOIEC_BACNET_APDU_PROPERTIES",
          "A pointer to the APDU-Properties structure which sets APDU properties for this\ntransaction only. This does not change global defaults or settings for the application\nAPDU Properties. This argument may be 0. In this case APDU properties  are used\nwhich were specified in the device object properties of the applications device which\nsends the request."
        ],
        [
          "pInfoBuffer",
          "POINTER TOIEC_BACNET_EVENT_INFO",
          "A pointer to a memory block of datatype BACNET_EVENT_INFO to place the response\ninformation. It contains a list of Event Summary items. Each item of datatypeIEC_BACNET_EVENT_SUMMARYconsists of a number of parameters that describe the appropriate\nobject. ObjectID, Event-State, Acked-Transitions, Notify-Type, and Event-Enable\nparameters convey values of the corresponding properties of the object. Event-Stamps\nparameter conveys the timestamps of the last event notifications for TO-OFFNORMAL,\nTO-FAULT, and TONORMAL events. Event-Priorities parameter conveys the priorities\nspecified in the Priority property of the associated notification class object.\nEvent Info data structure contains actual number of the items returned, and the\ntotal length of Event-Summary list buffer expressed as a number of items this buffer\ncan hold. The last parameter ofIEC_BACNET_EVENT_INFOdata structure is the More Events\nflag which indicates whether (TRUE) or not (FALSE) more objects exist that should be\nlisted, but that cannot be conveyed by the reply because APDU is too short.\nThe application may initialize the pSummaries member of theIEC_BACNET_EVENT_INFOstruture with a 0 pointer and bufferCount and summaryCount with 0 too. In this\ncase the memory for the response is allocated by the API and the application is\nresponsible to release it with a call toBACnetFreeStackAllocatedMemoryif the\nbuffer is no longer needed."
        ],
        [
          "pTransactionToken",
          "POINTER TOBACnetAsyncTransactionToken",
          "Transaction token of the asynchronous call - seeBACnetAsyncTransactionToken."
        ],
        [
          "pError",
          "POINTER TOIEC_BACNET_ERROR",
          "A pointer to a structure to hold BACnet Error information. pError may be 0 if the\napplication isnât interested in detailed error information."
        ]
      ]
    }
  ]
}