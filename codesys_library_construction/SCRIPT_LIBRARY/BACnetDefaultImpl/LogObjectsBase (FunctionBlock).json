{
  "library": "BACnetDefaultImpl",
  "title": "LogObjectsBase (FunctionBlock)",
  "url": "https://content.helpme-codesys.com/en/libs/BACnetDefaultImpl/Current/BACnetDefaultImpl/Function-Blocks/LoggingObjects/Internal/LogObjectsBase.html",
  "page_title": "LogObjectsBase (FB)",
  "text": "\nFUNCTION_BLOCK ABSTRACT LogObjectsBase EXTENDS BACnet.BACnetServerPluginBase\nBase class for logging objects default implementions (Trend_Log, Trend_Log_Multiple, Event_Log).\nIt tries to provide a feature complete implementation for logging objects with a reasonable simple implementation.\nAssumptions / provisions of LogObjectBase and derived:\nA.) All log data are stored in the file system, one file per object.\nIf large data volumes should be used (Buffer_Size) a high performance file system is recommended.\nB.) no sophisticated Sequence / Total_Record_Count overflow handling needed  - they simply overflow / wrap around\nIf those assumptions / provisions are not valid for your use case, a more sophisticated implementation is needed, for example based on database, in-memory-database etc.\nBACstack log data are delivered as either IEC_BACNET_LOG_RECORD, IEC_BACNET_LOG_RECORD_MULTIPLE, or IEC_BACNET_EVENT_LOG_RECORD\npacked in a IEC_BACNET_PROPERTY_CONTENTS and are stored binary as is in one file per logging object.\nSuch a log file contains:\n1.) file header\n2.) 0..numRecords-1 log records\nA log record in such a file consists of:\n1.) log record header\nsequence : IEC_BACNET_UNSIGNED\ntime stamp : IEC_BACNET_DATE_TIME\n2.) log record data as C-structure\n3.) actual number of records in file : IEC_BACNET_UNSIGNED\nReasons to do so:\n- SysFile write operations in append mode doesnt allow writing at file pos <> end for some platforms\n- reading the last record should be efficient (rewind from file end), for example to get last sequence number\nIf the number of records is supposed to be limited practically (Buffer_Size),\nthen purge operations of the data files are needed (to get rid of old records).\nThose purge operations are done implicitely in the implementation.\nA purge operation basically copies the records - except the purged record(s) -\nto a temporary file, deletes the data file, copy/move the data file to the data file.\nFor those purge operations it might be useful to choose a TempPath on a high speed file system (RAM file system).\nIf TempPath <> PersistentPath the temporary file will be copied to the data file and deleted afterwards,\notherwise the temporary file will be renamed to the data file.\nThe purge operations involve a significant performance degradation.\nIn general this should not be an issue, because BACnet logging objects are designed to inform a BACnet management device (OWS/AWS)\nabout âlog buffer mostly fullâ via Notification_Threshold and notifications.\nThe BACnet management device should read and clear the log buffer to avoid âlog buffer fullâ situations\nwhich will cause loss of logging data anyway.\nProperties:\nHardShutdown\nMaxDataSize\nObjectType\nPersistentPath\nServerDeviceId\nTempPath\nMethods:\nFreeReadRangeResult\nGetBufferSize\nGetRecordsByPosition\nGetRecordsBySequence\nGetRecordsByTime\nGetStopWhenFull\nInit\nPostStopBACnetStack\nReadRangeResultSetInfo\nScanObjectsAndSetCallbackAttachments\nSetCallbackAttachments\nSetReadCallbackAttachment\nSetWriteCallbackAttachment\nUpdateObjectPropertiesFromDataFile\nComputeRecordSize\nCreateDataFiles\nDataFileName\nListDataFiles\nLogDataFile\nLogFilePos\nLogFileSize\nLogFileSizeAndPos\nLogObjectAddrString\nLogObjectPropertyAddrString\nLogReadRangeResult\nLogRecord\nLogRecordContentInfo\nObjectId\nPurgeDataFile\nReadNumberOfRecordsAndLastSequenceFromDataFile\nReadNumberOfRecordsFromDataFile\nReadRangeErrorCompletion\nReadRangeInfoToString\nRemoveDataFiles\nRemoveUnusedDataFiles\nResetDataFile\nWriteRecordContentToDataFile\nStructure:\nBACnetEventCallback\nReadRangeErrorCompletion (Method)\nFiles\nDataFiles\nCreateDataFiles (Method)\nDataFileName (Method)\nListDataFiles (Method)\nPurgeDataFile (Method)\nReadNumberOfRecordsAndLastSequenceFromDataFile (Method)\nReadNumberOfRecordsFromDataFile (Method)\nRemoveDataFiles (Method)\nRemoveUnusedDataFiles (Method)\nResetDataFile (Method)\nWriteRecordContentToDataFile (Method)\nbase\nComputeRecordSize (Method)\nFreeReadRangeResult (Method)\nGetBufferSize (Method)\nGetRecordsByPosition (Method)\nGetRecordsBySequence (Method)\nGetRecordsByTime (Method)\nGetStopWhenFull (Method)\nHardShutdown (Property)\nInit (Method)\nLogging\nLogDataFile (Method)\nLogFilePos (Method)\nLogFileSize (Method)\nLogFileSizeAndPos (Method)\nLogObjectAddrString (Method)\nLogObjectPropertyAddrString (Method)\nLogReadRangeResult (Method)\nLogRecord (Method)\nLogRecordContentInfo (Method)\nMaxDataSize (Property)\nObjectHandling\nObjectId (Method)\nObjectType (Property)\nPersistentPath (Property)\nPostStopBACnetStack (Method)\nReadRangeResultSetInfo (Method)\nScanObjectsAndSetCallbackAttachments (Method)\nServerDeviceId (Property)\nSetCallbackAttachments (Method)\nSetReadCallbackAttachment (Method)\nSetWriteCallbackAttachment (Method)\nTempPath (Property)\nToString\nReadRangeInfoToString (Method)\nUpdateObjectPropertiesFromDataFile (Method)\ntop\nCODESYS Group | We\nsoftware\nAutomation.\nto software\n['sɒftwɛər]\ntransitive verb\n__softwared/softwaring\n: to develop software\n// to software automation: to develop software for automation purposes\nThe CODESYS Group is the manufacturer of CODESYS, the leading hardware-independent\n                                    IEC 61131-3 automation software for developing and engineering controller\n                                    applications.\nCODESYS® is a registered trademark.\nCODESYS GmbH\nA member of the CODESYS Group\nMemminger Straße 151, 87439 Kempten\nGermany\nTel.:\n+49-831-54031-0\ninfo@codesys.com\nLegal Notice\nPrivacy Policy\nLinkedIn\nYoutube\nRSS\nDownloads\nLogin\nCODESYS Store\n© 2022 CODESYS GmbH\n| A member of the CODESYS Group",
  "tables": []
}