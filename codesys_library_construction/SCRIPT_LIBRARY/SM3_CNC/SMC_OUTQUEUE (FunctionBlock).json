{
  "library": "SM3_CNC",
  "title": "SMC_OUTQUEUE (FunctionBlock)",
  "url": "https://content.helpme-codesys.com/en/libs/SM3_CNC/Current/SM_CNC_Data-types/SoftMotion-CNC/SMC_OUTQUEUE.html",
  "page_title": "SMC_OUTQUEUE (FB)",
  "text": "\nFUNCTION_BLOCK SMC_OUTQUEUE\nThis function block is designed to manage\nSMC_GEOINFO\nobjects\nin a list of defined size.\nThe path processing function blocks like\nSMC_NCDecoder\n,\nSMC_SmoothPath\n,\nSMC_RoundPath\n,\nSMC_AvoidLoop\nand\nSMC_ToolCorr\n- providing a pointer to an internally handled\nSMC_OUTQUEUE\n-structure -\nwill initialize this structure automatically.\nIf this queue is programmed and filled âmanuallyâ, then the correct\ninitialization has to be done manually also. For this purpose the\nfirst two variables (\npbyBuffer,\nsize\n) have to be assigned.\nNote\nIt is strictly recommended to use the functions inside the folder\nâOutQueue Functionsâ for working with an\nSMC_OUTQUEUE\nstructure,\nand to avoid any modification of its parameters after initialization.\n",
  "tables": [
    {
      "headers": [
        "Scope",
        "Name",
        "Type",
        "Initial",
        "Comment"
      ],
      "rows": [
        {
          "Scope": "Input",
          "Name": "wOUTQUEUEStructID",
          "Type": "WORD",
          "Initial": "16#9878",
          "Comment": "The fix value of this variable allows to check\nif the provided structure variable is of typeSMC_OUTQUEUE."
        },
        [
          "pbyBuffer",
          "POINTER TO ARRAY [0..0]\nOF SMC_GeoInfo",
          "",
          "Address of coherent memory buffer allocated forSMC_GEOINFOobjects.\nThe variablepbyBufferhas to be assigned in every cycle within the IEC program\nallocating the buffer.\nThe allocation is done within the declaration part, e.g. by using\nan array (BUFFER: ARRAY [0..99] OFSMC_GEOINFOfor a memory area\nlarge enough to hold 100SMC_GEOINFOobjects)."
        ],
        [
          "nCapacity",
          "UDINT",
          "",
          "Contains the capacity in multiples ofSMC_GEOINFOobjects\n(The number OFSMC_GEOINFOobjects that fit intopbyBuffer).\nThe functionSMC_SetQueueCapacityinitializes this field."
        ],
        [
          "nReadPos",
          "UDINT",
          "",
          "Contains the position in multiples ofSMC_GEOINFOobjects of the\nfirst object in the list."
        ],
        [
          "bEndOfList",
          "BOOL",
          "",
          "In order to avoid a buffer underrun (SMC_Interpolator), the SoftMotion\nfunction block being passed anSMC_OUTQUEUEstructure will not start with the\nprocessing of this queue, until it has been filled up completely.\nHowever, when working on the lastSMC_GEOINFOobjects of a path,SMC_OUTQUEUEis no longer complete.\nHence, in order to keep the processing going on,bEndOfListhas to be\nset toTRUEas soon as the lastSMC_GEOINFOobject has been stored.\nIn case that the list will be empty hereafter, but should be filled up\nagain,bEndOfListhas to be reset toFALSE."
        ],
        [
          "byGenerator",
          "BYTE",
          "250",
          "Originator of the queue. The interpolator will use this information for\nverifying thatSMC_CheckVelocitieshas been processed as prescribed.Valid values are:SMC_NCDecoder: 1SMC_AvoidLoop: 10SMC_LimitCircularVelocity: 11SMC_RoundPath: 12SMC_SmoothPath: 13SMC_ToolCorr: 14SMC_RotateQueue2D: 30SMC_ScaleQueue3D: 31SMC_TranslateQueue3D: 32SMC_CheckVelocities: 254CNC editor: 255"
        ],
        [
          "bReCheckVelocities",
          "BOOL",
          "",
          "Internal variable"
        ],
        [
          "strProgramName",
          "STRING",
          "",
          "Name of the CNC program"
        ],
        [
          "nWritePos",
          "UDINT",
          "",
          "Contains the next free position in multiples ofSMC_GEOINFOobjects.\n(Declared after strProgramName in order to avoid cache thrashing:\nmake sure, nReadPos and nWritePos arenât part of the same cache line.))"
        ],
        [
          "xPartofLM",
          "BOOL",
          "",
          "If the input, generated by programming system, isTRUE,\nthe function block is maintained by managers."
        ],
        [
          "nNumReservedEntries",
          "UDINT",
          "",
          "The number of reserved entries:\nif this number of free entries is reached, SMC_OutQueue.bFull will return TRUE.\nMust be at least 3 and at mostnCapacity-1."
        ],
        [
          "nPastMarker",
          "DINT",
          "",
          "Points to the first element that has been stored in the queue (if any)\nand has not yet been overwritten. So the elements fromnPastMarkertonReadPos-1 are the âpastâ of the current queue.nPastMarkerequals -1 if (and only if) no element has been appended\nto the queue yet."
        ]
      ]
    }
  ]
}