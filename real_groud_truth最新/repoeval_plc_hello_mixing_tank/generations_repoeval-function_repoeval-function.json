[["```\nVAR\n\t// \u5185\u90e8\u72b6\u6001\u53d8\u91cf\n\teNextState\t\t\t:\tAUTO_SEQUENCE;\t// \u4e0b\u4e00\u4e2a\u72b6\u6001\n\ttStateTimer\t\t\t:\tTIME;\t\t\t// \u72b6\u6001\u8ba1\u65f6\u5668\n\tnCycleCounter\t\t:\tUINT := 0;\t\t// \u5faa\u73af\u8ba1\u6570\u5668\n\tbTransitionFlag\t\t:\tBOOL := FALSE;\t// \u72b6\u6001\u8f6c\u6362\u6807\u5fd7\nEND_VAR\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u679a\u4e3e\nTYPE AUTO_SEQUENCE :\n(\n\tIDLE,\t\t\t\t// \u7a7a\u95f2\u72b6\u6001\n\tFILLING_MEDIUM1,\t// \u4ecb\u8d281\u586b\u5145\u72b6\u6001\n\tFILLING_MEDIUM2,\t// \u4ecb\u8d282\u586b\u5145\u72b6\u6001\n\tMIXING,\t\t\t\t// \u6df7\u5408\u72b6\u6001\n\tDRAINING\t\t\t// \u6392\u7a7a\u72b6\u6001\n);\nEND_TYPE\n\n// \u81ea\u52a8\u5e8f\u5217\u903b\u8f91\u5b9e\u73b0\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tIDLE:\n\t\t\tIF bTankLevelEmpty THEN\n\t\t\t\teNextState := FILLING_MEDIUM1;\n\t\t\tEND_IF;\n\t\t\t\n\t\tFILLING_MEDIUM1:\n\t\t\tbMedium1OpenCmd := TRUE;\n\t\t\tIF bTankLevelFull THEN\n\t\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\t\teNextState := FILLING_MEDIUM2;\n\t\t\tEND_IF;\n\t\t\t\n\t\tFILLING_MEDIUM2:\n\t\t\tbMedium2OpenCmd := TRUE;\n\t\t\tIF bTankLevelFull THEN\n\t\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\teNextState := MIXING;\n\t\t\tEND_IF;\n\t\t\t\n\t\tMIXING:\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\tIF tStateTimer >= tMixingDuration THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teNextState := DRAINING;\n\t\t\tEND_IF;\n\t\t\t\n\t\tDRAINING:\n\t\t\tbDrainOpenCmd := TRUE;\n\t\t\tIF bTankLevelEmpty THEN\n\t\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\teNextState := IDLE;\n\t\t\t\tnCycleCounter := nCycleCounter + 1;\n\t\t\tEND_IF;\n\tEND_CASE;\n\t\n\t// \u72b6\u6001\u66f4\u65b0\n\tIF eNextState <> eCurrentState THEN\n\t\teCurrentState := eNextState;\n\t\ttStateTimer := T#0S; // \u91cd\u7f6e\u72b6\u6001\u8ba1\u65f6\u5668\n\tEND_IF;\n\t\n\t// \u72b6\u6001\u8ba1\u65f6\u5668\u66f4\u65b0\n\ttStateTimer := tStateTimer + T#1MS;\nELSE\n\t// \u7981\u7528\u65f6\u590d\u4f4d\u6240\u6709\u547d\u4ee4\u548c\u72b6\u6001\n\tbMixerRunCmd := FALSE;\n\tbMedium1OpenCmd := FALSE;\n\tbMedium2OpenCmd := FALSE;\n\tbDrainOpenCmd := FALSE;\n\teCurrentState := IDLE;\n\tnCycleCounter := 0;\nEND_IF;\n\nIF bReset THEN\n\t// \u590d\u4f4d\u903b\u8f91\n\tbMixerRunCmd := FALSE;\n\tbMedium1OpenCmd := FALSE;\n\tbMedium2OpenCmd := FALSE;\n\tbDrainOpenCmd := FALSE;\n\teCurrentState := IDLE;\n\tnCycleCounter := 0;\n\ttStateTimer := T#0S;\nEND_IF;\n```"], ["```\nVAR\n\t// \u5185\u90e8\u53d8\u91cf\n\tbResetCommands\t\t:\tBOOL;\nEND_VAR\n\n// \u4e3b\u7a0b\u5e8f\u903b\u8f91\n// \u590d\u4f4d\u547d\u4ee4\u903b\u8f91\nbResetCommands := F_ResetDeviceCommands(\n\tbMixerRunCmd := bMixerRunCmd,\n\tbMixerStopCmd := bMixerStopCmd,\n\tbMedium1OpenCmd := bMedium1OpenCmd,\n\tbMedium1CloseCmd := bMedium1CloseCmd,\n\tbMedium2OpenCmd := bMedium2OpenCmd,\n\tbMedium2CloseCmd := bMedium2CloseCmd,\n\tbDrainOpenCmd := bDrainOpenCmd,\n\tbDrainCloseCmd := bDrainCloseCmd,\n\tbMixerRunning := bMixerRunning,\n\tbMedium1Opened := bMedium1Opened,\n\tbMedium2Opened := bMedium2Opened,\n\tbDrainOpened := bDrainOpened\n);\n\n// \u8f93\u51fa\u547d\u4ee4\u903b\u8f91\nIF bMixerRunCmd AND NOT bMixerRunning THEN\n\tbMixerRunCmdOut := TRUE;\t// \u542f\u52a8\u6df7\u5408\u7535\u673a\nELSE\n\tbMixerRunCmdOut := FALSE;\nEND_IF\n\nIF bMedium1OpenCmd AND NOT bMedium1Opened THEN\n\tbMedium1OpenCmdOut := TRUE;\t// \u6253\u5f00\u4ecb\u8d281\u9600\u95e8\nELSE\n\tbMedium1OpenCmdOut := FALSE;\nEND_IF\n\nIF bMedium2OpenCmd AND NOT bMedium2Opened THEN\n\tbMedium2OpenCmdOut := TRUE;\t// \u6253\u5f00\u4ecb\u8d282\u9600\u95e8\nELSE\n\tbMedium2OpenCmdOut := FALSE;\nEND_IF\n\nIF bDrainOpenCmd AND NOT bDrainOpened THEN\n\tbDrainOpenCmdOut := TRUE;\t// \u6253\u5f00\u6392\u7a7a\u9600\u95e8\nELSE\n\tbDrainOpenCmdOut := FALSE;\nEND_IF\n```"], ["```\nVAR\n\tePreviousMode\t:\tMODES;\t// \u4e0a\u4e00\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u5b9a\u4e49\u6a21\u5f0f\u7c7b\u578b\nTYPE MODES : (MANUAL, AUTO);\nEND_TYPE\n\n// \u521d\u59cb\u5316\nIF NOT eCurrentMode THEN\n\teCurrentMode := MANUAL; // \u9ed8\u8ba4\u6a21\u5f0f\u4e3a\u624b\u52a8\u6a21\u5f0f\n\tePreviousMode := MANUAL;\n\tbModeChanged := FALSE;\nEND_IF\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nIF bSetToAuto AND (eCurrentMode <> AUTO) THEN\n\tePreviousMode := eCurrentMode;\n\teCurrentMode := AUTO;\n\tbModeChanged := TRUE;\nELSIF bSetToManual AND (eCurrentMode <> MANUAL) THEN\n\tePreviousMode := eCurrentMode;\n\teCurrentMode := MANUAL;\n\tbModeChanged := TRUE;\nELSE\n\tbModeChanged := FALSE;\nEND_IF\n```"], ["```\nVAR\n\trLevel\t\t\t\t:\tREAL;\t\t\t// \u5185\u90e8\u6db2\u4f4d\u53d8\u91cf\nEND_VAR\n\n// \u521d\u59cb\u5316\u6db2\u4f4d\nIF bReset THEN\n\trLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\u903b\u8f91\nIF bMedium1Opened THEN\n\trLevel := rLevel + rFillRate1;\nEND_IF\n\nIF bMedium2Opened THEN\n\trLevel := rLevel + rFillRate2;\nEND_IF\n\nIF bDrainOpened THEN\n\trLevel := rLevel - rDrainRate;\nEND_IF\n\n// \u9650\u5236\u6db2\u4f4d\u8303\u56f4\nIF rLevel < rMinLevel THEN\n\trLevel := rMinLevel;\nELSIF rLevel > rMaxLevel THEN\n\trLevel := rMaxLevel;\nEND_IF\n\n// \u8f93\u51fa\u5f53\u524d\u6db2\u4f4d\nrCurrentLevel := rLevel;\n```"], ["```\nVAR_OUTPUT\n\t// \u590d\u4f4d\u5b8c\u6210\u6807\u5fd7\n\tbResetComplete\t\t:\tBOOL;\nEND_VAR\n\n// \u529f\u80fd\u63cf\u8ff0\uff1a\u590d\u4f4d\u6240\u6709HMI\u547d\u4ee4\u6807\u5fd7\uff0c\u5f53\u8bbe\u5907\u72b6\u6001\u4e0e\u547d\u4ee4\u4e00\u81f4\u65f6\u5b8c\u6210\u590d\u4f4d\nbResetComplete := FALSE;\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\u903b\u8f91\nIF NOT bMixerRunning AND bMixerRunCmd THEN\n\tbMixerRunCmd := FALSE;\nEND_IF;\n\nIF bMixerRunning AND bMixerStopCmd THEN\n\tbMixerStopCmd := FALSE;\nEND_IF;\n\n// Medium1\u547d\u4ee4\u590d\u4f4d\u903b\u8f91\nIF NOT bMedium1Opened AND bMedium1OpenCmd THEN\n\tbMedium1OpenCmd := FALSE;\nEND_IF;\n\nIF bMedium1Opened AND bMedium1CloseCmd THEN\n\tbMedium1CloseCmd := FALSE;\nEND_IF;\n\n// Medium2\u547d\u4ee4\u590d\u4f4d\u903b\u8f91\nIF NOT bMedium2Opened AND bMedium2OpenCmd THEN\n\tbMedium2OpenCmd := FALSE;\nEND_IF;\n\nIF bMedium2Opened AND bMedium2CloseCmd THEN\n\tbMedium2CloseCmd := FALSE;\nEND_IF;\n\n// Drain\u547d\u4ee4\u590d\u4f4d\u903b\u8f91\nIF NOT bDrainOpened AND bDrainOpenCmd THEN\n\tbDrainOpenCmd := FALSE;\nEND_IF;\n\nIF bDrainOpened AND bDrainCloseCmd THEN\n\tbDrainCloseCmd := FALSE;\nEND_IF;\n\n// \u68c0\u67e5\u662f\u5426\u6240\u6709\u547d\u4ee4\u6807\u5fd7\u5df2\u590d\u4f4d\nIF NOT bMixerRunCmd AND NOT bMixerStopCmd AND\n   NOT bMedium1OpenCmd AND NOT bMedium1CloseCmd AND\n   NOT bMedium2OpenCmd AND NOT bMedium2CloseCmd AND\n   NOT bDrainOpenCmd AND NOT bDrainCloseCmd THEN\n\tbResetComplete := TRUE;\nEND_IF;\n\nRETURN bResetComplete;\nEND_FUNCTION\n```"], ["```\n# --------------------------------------------------\n# FUNCTION F_UpdateLimitSwitches\n# This function updates the limit switches based on the current tank level.\n# If the tank level exceeds the full threshold, the full switch is activated.\n# If the tank level drops below the empty threshold, the empty switch is activated.\n# --------------------------------------------------\n\n# Update the full level switch\nIF rTankLevel >= rFullThreshold THEN\n    bLevelFull := TRUE;\nELSE\n    bLevelFull := FALSE;\nEND_IF;\n\n# Update the empty level switch\nIF rTankLevel <= rEmptyThreshold THEN\n    bLevelEmpty := TRUE;\nELSE\n    bLevelEmpty := FALSE;\nEND_IF;\n\n# Return TRUE to indicate the function executed successfully\nF_UpdateLimitSwitches := TRUE;\n```"]]