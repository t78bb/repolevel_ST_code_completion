{"prompt": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR", "reference": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u6ee1\u65f6\uff0c\u7b49\u5f85\u586b\u5145\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u6df7\u5408\u72b6\u6001\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u542f\u52a8\u6df7\u5408\u7535\u673a\u5e76\u6df7\u540810\u79d2\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// \u5f53\u5b9a\u65f6\u5668\u5230\u8fbe10\u79d2\uff0c\u7b49\u5f85\u7535\u673a\u505c\u6b62\u8fd0\u884c\uff0c\u7136\u540e\u8fdb\u5165\u6392\u7a7a\u72b6\u6001\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u6392\u7a7a\u9600\uff0c\u5f00\u59cb\u6392\u7a7a\u7f50\u4f53\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u7a7a\u65f6\uff0c\u7b49\u5f85\u6392\u7a7a\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u586b\u5145\u72b6\u6001\n\t\t\tIF bTankLevelEmpty AND NOT bDrainOpened THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.FILLING;\n\t\t\t\tnCyclesCompleted := nCyclesCompleted + 1;\n\t\t\tEND_IF\n\tEND_CASE\nELSE\n\t// \u7981\u7528\u65f6\uff0c\u5173\u95ed\u6240\u6709\u8f93\u51fa\n\tbMixerRunCmd := FALSE;\n\tbMedium1OpenCmd := FALSE;\n\tbMedium2OpenCmd := FALSE;\n\tbDrainOpenCmd := FALSE;\n\ttonMixing(IN := FALSE);\nEND_IF", "docs": [{"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u6ee1\u65f6\uff0c\u7b49\u5f85\u586b\u5145\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u6df7\u5408\u72b6\u6001\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u6ee1\u65f6\uff0c\u7b49\u5f85\u586b\u5145\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u6df7\u5408\u72b6\u6001\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u6ee1\u65f6\uff0c\u7b49\u5f85\u586b\u5145\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u6df7\u5408\u72b6\u6001\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u542f\u52a8\u6df7\u5408\u7535\u673a\u5e76\u6df7\u540810\u79d2\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// \u5f53\u5b9a\u65f6\u5668\u5230\u8fbe10\u79d2\uff0c\u7b49\u5f85\u7535\u673a\u505c\u6b62\u8fd0\u884c\uff0c\u7136\u540e\u8fdb\u5165\u6392\u7a7a\u72b6\u6001\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u6ee1\u65f6\uff0c\u7b49\u5f85\u586b\u5145\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u6df7\u5408\u72b6\u6001\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u542f\u52a8\u6df7\u5408\u7535\u673a\u5e76\u6df7\u540810\u79d2\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}], "metadata": {"task_id": "plc_hello_mixing_tank/0", "ground_truth": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u6ee1\u65f6\uff0c\u7b49\u5f85\u586b\u5145\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u6df7\u5408\u72b6\u6001\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u542f\u52a8\u6df7\u5408\u7535\u673a\u5e76\u6df7\u540810\u79d2\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// \u5f53\u5b9a\u65f6\u5668\u5230\u8fbe10\u79d2\uff0c\u7b49\u5f85\u7535\u673a\u505c\u6b62\u8fd0\u884c\uff0c\u7136\u540e\u8fdb\u5165\u6392\u7a7a\u72b6\u6001\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u6392\u7a7a\u9600\uff0c\u5f00\u59cb\u6392\u7a7a\u7f50\u4f53\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n\t\t\t\n\t\t\t// \u5f53\u7f50\u4f53\u7a7a\u65f6\uff0c\u7b49\u5f85\u6392\u7a7a\u9600\u5173\u95ed\uff0c\u7136\u540e\u8fdb\u5165\u586b\u5145\u72b6\u6001\n\t\t\tIF bTankLevelEmpty AND NOT bDrainOpened THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.FILLING;\n\t\t\t\tnCyclesCompleted := nCyclesCompleted + 1;\n\t\t\tEND_IF\n\tEND_CASE\nELSE\n\t// \u7981\u7528\u65f6\uff0c\u5173\u95ed\u6240\u6709\u8f93\u51fa\n\tbMixerRunCmd := FALSE;\n\tbMedium1OpenCmd := FALSE;\n\tbMedium2OpenCmd := FALSE;\n\tbDrainOpenCmd := FALSE;\n\ttonMixing(IN := FALSE);\nEND_IF", "fpath_tuple": ["FUN", "FB_AutoSequence.st"], "context_start_lineno": 0, "lineno": 30, "function_name": "FB_AutoSequence"}}
{"prompt": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR", "reference": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// \u4ecb\u8d281\u9600\u95e8\u63a7\u5236\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n// \u4ecb\u8d282\u9600\u95e8\u63a7\u5236\nbMedium2OpenCmdOut := (bMedium2OpenCmd OR bMedium2Opened) AND NOT bMedium2CloseCmd;\n\n// \u6392\u7a7a\u9600\u95e8\u63a7\u5236\nbDrainOpenCmdOut := (bDrainOpenCmd OR bDrainOpened) AND NOT bDrainCloseCmd;", "docs": [{"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// \u4ecb\u8d281\u9600\u95e8\u63a7\u5236\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// \u4ecb\u8d281\u9600\u95e8\u63a7\u5236\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n// \u4ecb\u8d282\u9600\u95e8\u63a7\u5236\nbMedium2OpenCmdOut := (bMedium2OpenCmd OR bMedium2Opened) AND NOT bMedium2CloseCmd;\n\n// \u6392\u7a7a\u9600\u95e8\u63a7\u5236\nbDrainOpenCmdOut := (bDrainOpenCmd OR bDrainOpened) AND NOT bDrainCloseCmd;\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// \u4ecb\u8d281\u9600\u95e8\u63a7\u5236\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n// \u4ecb\u8d282\u9600\u95e8\u63a7\u5236\nbMedium2OpenCmdOut := (bMedium2OpenCmd OR bMedium2Opened) AND NOT bMedium2CloseCmd;\n\n// \u6392\u7a7a\u9600\u95e8\u63a7\u5236\nbDrainOpenCmdOut := (bDrainOpenCmd OR bDrainOpened) AND NOT bDrainCloseCmd;\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium2CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u6392\u7a7a\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}], "metadata": {"task_id": "plc_hello_mixing_tank/1", "ground_truth": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// \u4ecb\u8d281\u9600\u95e8\u63a7\u5236\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n// \u4ecb\u8d282\u9600\u95e8\u63a7\u5236\nbMedium2OpenCmdOut := (bMedium2OpenCmd OR bMedium2Opened) AND NOT bMedium2CloseCmd;\n\n// \u6392\u7a7a\u9600\u95e8\u63a7\u5236\nbDrainOpenCmdOut := (bDrainOpenCmd OR bDrainOpened) AND NOT bDrainCloseCmd;", "fpath_tuple": ["FUN", "FB_ManualControl.st"], "context_start_lineno": 0, "lineno": 26, "function_name": "FB_ManualControl"}}
{"prompt": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR", "reference": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// \u4e0a\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n\n// \u68c0\u6d4b\u6a21\u5f0f\u53d8\u5316\nbModeChanged := (eCurrentMode <> eLastMode);\neLastMode := eCurrentMode;", "docs": [{"text": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// \u4e0a\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n", "title": "plc_hello_mixing_tank-FUN\\FB_ModeController.st"}, {"text": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// \u4e0a\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n\n// \u68c0\u6d4b\u6a21\u5f0f\u53d8\u5316\nbModeChanged := (eCurrentMode <> eLastMode);\neLastMode := eCurrentMode;\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_ModeController.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}, {"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// \u4f7f\u80fd\u81ea\u52a8\u5e8f\u5217\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u6392\u7a7a\u72b6\u6001\n\t\n\t// \u6db2\u4f4d\u4f20\u611f\u5668\u53cd\u9988\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u4f20\u611f\u5668\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u4f20\u611f\u5668\n\t\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u4e2d\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// \u6df7\u5408\u6301\u7eed\u65f6\u95f4\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// \u6df7\u5408\u7535\u673a\u8fd0\u884c\u547d\u4ee4\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\u547d\u4ee4\n\t\n\t// \u72b6\u6001\u8f93\u51fa\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// \u5f53\u524d\u72b6\u6001\n\tnCyclesCompleted\t:\tUINT;\t\t\t// \u5b8c\u6210\u7684\u5faa\u73af\u6b21\u6570\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// \u6df7\u5408\u5b9a\u65f6\u5668\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// \u81ea\u52a8\u5e8f\u5217\u72b6\u6001\u673a\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// \u786e\u4fdd\u5176\u4ed6\u8bbe\u5907\u4e0d\u5de5\u4f5c\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// \u6253\u5f00\u4e24\u4e2a\u4ecb\u8d28\u9600\u95e8\uff0c\u5f00\u59cb\u586b\u5145\u7f50\u4f53\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st"}], "metadata": {"task_id": "plc_hello_mixing_tank/2", "ground_truth": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// \u4e0a\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n\n// \u68c0\u6d4b\u6a21\u5f0f\u53d8\u5316\nbModeChanged := (eCurrentMode <> eLastMode);\neLastMode := eCurrentMode;", "fpath_tuple": ["FUN", "FB_ModeController.st"], "context_start_lineno": 0, "lineno": 10, "function_name": "FB_ModeController"}}
{"prompt": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR", "reference": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n// \u5982\u679c\u4efb\u4e00\u586b\u5145\u9600\u6253\u5f00\u5219\u586b\u5145\uff0c\u5982\u679c\u6392\u7a7a\u9600\u6253\u5f00\u5219\u6392\u7a7a\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n\n// \u9650\u5236\u6db2\u4f4d\u8303\u56f4 (0-100%)\nrCurrentLevel := LIMIT(rMinLevel, rCurrentLevel, rMaxLevel);", "docs": [{"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n// \u5982\u679c\u4efb\u4e00\u586b\u5145\u9600\u6253\u5f00\u5219\u586b\u5145\uff0c\u5982\u679c\u6392\u7a7a\u9600\u6253\u5f00\u5219\u6392\u7a7a\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n// \u5982\u679c\u4efb\u4e00\u586b\u5145\u9600\u6253\u5f00\u5219\u586b\u5145\uff0c\u5982\u679c\u6392\u7a7a\u9600\u6253\u5f00\u5219\u6392\u7a7a\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n\n// \u9650\u5236\u6db2\u4f4d\u8303\u56f4 (0-100%)\nrCurrentLevel := LIMIT(rMinLevel, rCurrentLevel, rMaxLevel);\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== \u6db2\u4f4d\u6a21\u62df ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}, {"text": "\t\t// \u4f7f\u7528\u624b\u52a8\u63a7\u5236\u529f\u80fd\u5757\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// \u8f93\u51fa\u5230IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// \u81ea\u52a8\u5e8f\u5217\u7981\u7528\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*\u81ea\u52a8\u6a21\u5f0f*)\n\t\t// \u4f7f\u7528\u81ea\u52a8\u5e8f\u5217\u529f\u80fd\u5757\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// \u8f93\u51fa\u5230IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// \u66f4\u65b0\u5faa\u73af\u8ba1\u6570\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI\u547d\u4ee4\u590d\u4f4d ==========\n", "title": "plc_hello_mixing_tank-PRG\\main.st"}, {"text": "\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// \u81ea\u52a8\u5e8f\u5217\u7981\u7528\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*\u81ea\u52a8\u6a21\u5f0f*)\n\t\t// \u4f7f\u7528\u81ea\u52a8\u5e8f\u5217\u529f\u80fd\u5757\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// \u8f93\u51fa\u5230IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// \u66f4\u65b0\u5faa\u73af\u8ba1\u6570\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI\u547d\u4ee4\u590d\u4f4d ==========\nF_ResetDeviceCommands(\n\tbMixerRunCmd := HMI.MixerRunCmd,\n\tbMixerStopCmd := HMI.MixerStopCmd,\n\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== HMI\u72b6\u6001\u66f4\u65b0 ==========\nHMI.MotorRotating := HMI.MotorRotating + 2 * BOOL_TO_REAL(IO.xDI_M1_MixerMotorRunning);\nIF HMI.MotorRotating >= 360 THEN \n\tHMI.MotorRotating := 0; \nEND_IF\n", "title": "plc_hello_mixing_tank-PRG\\main.st"}, {"text": "PROGRAM simulator\nVAR\n\t///\u6a21\u62df\u6df7\u5408\u7535\u673a\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d281\u586b\u5145\u9600\u95e8\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d282\u586b\u5145\u9600\u95e8\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u6392\u7a7a\u9600\u95e8\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}, {"text": "PROGRAM simulator\nVAR\n\t///\u6a21\u62df\u6df7\u5408\u7535\u673a\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d281\u586b\u5145\u9600\u95e8\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d282\u586b\u5145\u9600\u95e8\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u6392\u7a7a\u9600\u95e8\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}, {"text": "PROGRAM simulator\nVAR\n\t///\u6a21\u62df\u6df7\u5408\u7535\u673a\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d281\u586b\u5145\u9600\u95e8\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d282\u586b\u5145\u9600\u95e8\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u6392\u7a7a\u9600\u95e8\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}, {"text": "PROGRAM simulator\nVAR\n\t///\u6a21\u62df\u6df7\u5408\u7535\u673a\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d281\u586b\u5145\u9600\u95e8\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d282\u586b\u5145\u9600\u95e8\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u6392\u7a7a\u9600\u95e8\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}], "metadata": {"task_id": "plc_hello_mixing_tank/3", "ground_truth": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n// \u5982\u679c\u4efb\u4e00\u586b\u5145\u9600\u6253\u5f00\u5219\u586b\u5145\uff0c\u5982\u679c\u6392\u7a7a\u9600\u6253\u5f00\u5219\u6392\u7a7a\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n\n// \u9650\u5236\u6db2\u4f4d\u8303\u56f4 (0-100%)\nrCurrentLevel := LIMIT(rMinLevel, rCurrentLevel, rMaxLevel);", "fpath_tuple": ["FUN", "FB_TankLevelSimulator.st"], "context_start_lineno": 0, "lineno": 19, "function_name": "FB_TankLevelSimulator"}}
{"prompt": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR", "reference": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium2CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u6392\u7a7a\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bDrainOpened THEN\n\tbDrainOpenCmd := FALSE;\t\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbDrainCloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\nF_ResetDeviceCommands := TRUE;", "docs": [{"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium2CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u6392\u7a7a\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium2CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u6392\u7a7a\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bDrainOpened THEN\n\tbDrainOpenCmd := FALSE;\t\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbDrainCloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium2CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u6392\u7a7a\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bDrainOpened THEN\n\tbDrainOpenCmd := FALSE;\t\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbDrainCloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\nF_ResetDeviceCommands := TRUE;\n\n", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}, {"text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI\u547d\u4ee4\u8f93\u5165\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// \u8bbe\u5907\u53cd\u9988\u8f93\u5165\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// \u8bbe\u5907\u63a7\u5236\u8f93\u51fa\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// \u624b\u52a8\u6a21\u5f0f\uff1aHMI\u547d\u4ee4\u901a\u8fc7\u9501\u5b58\u5668\u63a7\u5236\u8bbe\u5907\n// \u9501\u5b58\u903b\u8f91\uff1a\u6309\u4e0b\u542f\u52a8OR\u5df2\u542f\u52a8\u53cd\u9988 AND NOT \u6309\u4e0b\u505c\u6b62\n\n// \u6df7\u5408\u7535\u673a\u63a7\u5236\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// \u4ecb\u8d281\u9600\u95e8\u63a7\u5236\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st"}], "metadata": {"task_id": "plc_hello_mixing_tank/4", "ground_truth": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI\u547d\u4ee4\u6807\u5fd7\uff08\u9700\u8981\u590d\u4f4d\uff09\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// \u8bbe\u5907\u72b6\u6001\u53cd\u9988\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// \u547d\u4ee4\u5408\u7406\u6027\u590d\u4f4d\n// \u5f53\u8bbe\u5907\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u590d\u4f4d\u76f8\u5e94\u7684\u547d\u4ee4\u6807\u5fd7\n\n// \u6df7\u5408\u7535\u673a\u547d\u4ee4\u590d\u4f4d\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// \u5df2\u8fd0\u884c\uff0c\u590d\u4f4d\u8fd0\u884c\u547d\u4ee4\nELSE\n\tbMixerStopCmd := FALSE;\t\t// \u5df2\u505c\u6b62\uff0c\u590d\u4f4d\u505c\u6b62\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d281\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium1CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u4ecb\u8d282\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbMedium2CloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\n// \u6392\u7a7a\u9600\u95e8\u547d\u4ee4\u590d\u4f4d\nIF bDrainOpened THEN\n\tbDrainOpenCmd := FALSE;\t\t// \u5df2\u6253\u5f00\uff0c\u590d\u4f4d\u6253\u5f00\u547d\u4ee4\nELSE\n\tbDrainCloseCmd := FALSE;\t// \u5df2\u5173\u95ed\uff0c\u590d\u4f4d\u5173\u95ed\u547d\u4ee4\nEND_IF\n\nF_ResetDeviceCommands := TRUE;", "fpath_tuple": ["FUN", "F_ResetDeviceCommands.st"], "context_start_lineno": 0, "lineno": 20, "function_name": "F_ResetDeviceCommands"}}
{"prompt": "FUNCTION F_UpdateLimitSwitches : BOOL\nVAR_INPUT\n\trTankLevel\t\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\n\trFullThreshold\t\t:\tREAL := 85.0;\t// \u6ee1\u6db2\u4f4d\u9608\u503c (%)\n\trEmptyThreshold\t\t:\tREAL := 5.0;\t// \u7a7a\u6db2\u4f4d\u9608\u503c (%)\nEND_VAR\nVAR_OUTPUT\n\tbLevelFull\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u5f00\u5173\n\tbLevelEmpty\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u5f00\u5173\nEND_VAR", "reference": "FUNCTION F_UpdateLimitSwitches : BOOL\nVAR_INPUT\n\trTankLevel\t\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\n\trFullThreshold\t\t:\tREAL := 85.0;\t// \u6ee1\u6db2\u4f4d\u9608\u503c (%)\n\trEmptyThreshold\t\t:\tREAL := 5.0;\t// \u7a7a\u6db2\u4f4d\u9608\u503c (%)\nEND_VAR\nVAR_OUTPUT\n\tbLevelFull\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u5f00\u5173\n\tbLevelEmpty\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u5f00\u5173\nEND_VAR\n\n// \u6db2\u4f4d\u5f00\u5173\u6a21\u62df\nbLevelFull := rTankLevel >= rFullThreshold;\t\t// \u6db2\u4f4d >= 85% \u65f6\uff0c\u6ee1\u5f00\u5173\u6fc0\u6d3b\nbLevelEmpty := rTankLevel <= rEmptyThreshold;\t// \u6db2\u4f4d <= 5% \u65f6\uff0c\u7a7a\u5f00\u5173\u6fc0\u6d3b\n\nF_UpdateLimitSwitches := TRUE;", "docs": [{"text": "FUNCTION F_UpdateLimitSwitches : BOOL\nVAR_INPUT\n\trTankLevel\t\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\n\trFullThreshold\t\t:\tREAL := 85.0;\t// \u6ee1\u6db2\u4f4d\u9608\u503c (%)\n\trEmptyThreshold\t\t:\tREAL := 5.0;\t// \u7a7a\u6db2\u4f4d\u9608\u503c (%)\nEND_VAR\nVAR_OUTPUT\n\tbLevelFull\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u5f00\u5173\n\tbLevelEmpty\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u5f00\u5173\nEND_VAR\n\n// \u6db2\u4f4d\u5f00\u5173\u6a21\u62df\nbLevelFull := rTankLevel >= rFullThreshold;\t\t// \u6db2\u4f4d >= 85% \u65f6\uff0c\u6ee1\u5f00\u5173\u6fc0\u6d3b\nbLevelEmpty := rTankLevel <= rEmptyThreshold;\t// \u6db2\u4f4d <= 5% \u65f6\uff0c\u7a7a\u5f00\u5173\u6fc0\u6d3b\n\nF_UpdateLimitSwitches := TRUE;\n\n", "title": "plc_hello_mixing_tank-FUN\\F_UpdateLimitSwitches.st"}, {"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n// \u5982\u679c\u4efb\u4e00\u586b\u5145\u9600\u6253\u5f00\u5219\u586b\u5145\uff0c\u5982\u679c\u6392\u7a7a\u9600\u6253\u5f00\u5219\u6392\u7a7a\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d281\u9600\u95e8\u6253\u5f00\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// \u4ecb\u8d282\u9600\u95e8\u6253\u5f00\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// \u6392\u7a7a\u9600\u95e8\u6253\u5f00\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// \u590d\u4f4d\u5230\u521d\u59cb\u6db2\u4f4d\n\t\n\t// \u914d\u7f6e\u53c2\u6570\n\trInitialLevel\t\t:\tREAL := 25.0;\t// \u521d\u59cb\u6db2\u4f4d (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d281\u586b\u5145\u901f\u7387 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// \u4ecb\u8d282\u586b\u5145\u901f\u7387 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// \u6392\u7a7a\u901f\u7387 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// \u6700\u5c0f\u6db2\u4f4d (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// \u6700\u5927\u6db2\u4f4d (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\nEND_VAR\n\n// \u590d\u4f4d\u903b\u8f91\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// \u6db2\u4f4d\u8ba1\u7b97\n// \u5982\u679c\u4efb\u4e00\u586b\u5145\u9600\u6253\u5f00\u5219\u586b\u5145\uff0c\u5982\u679c\u6392\u7a7a\u9600\u6253\u5f00\u5219\u6392\u7a7a\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n\n// \u9650\u5236\u6db2\u4f4d\u8303\u56f4 (0-100%)\nrCurrentLevel := LIMIT(rMinLevel, rCurrentLevel, rMaxLevel);\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st"}, {"text": "\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== \u6db2\u4f4d\u6a21\u62df ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n\trFillRate1 := 0.1,\n\trFillRate2 := 0.1,\n\trDrainRate := 0.2,\n\trMinLevel := 0.0,\n\trMaxLevel := 100.0\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}, {"text": "\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== \u6db2\u4f4d\u6a21\u62df ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}, {"text": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// \u4e0a\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n\n// \u68c0\u6d4b\u6a21\u5f0f\u53d8\u5316\nbModeChanged := (eCurrentMode <> eLastMode);\neLastMode := eCurrentMode;\n\n", "title": "plc_hello_mixing_tank-FUN\\FB_ModeController.st"}, {"text": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// \u5207\u6362\u5230\u81ea\u52a8\u6a21\u5f0f\u547d\u4ee4\n\tbSetToManual\t:\tBOOL;\t// \u5207\u6362\u5230\u624b\u52a8\u6a21\u5f0f\u547d\u4ee4\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// \u5f53\u524d\u6a21\u5f0f\n\tbModeChanged\t:\tBOOL;\t// \u6a21\u5f0f\u6539\u53d8\u6807\u5fd7\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// \u4e0a\u6b21\u6a21\u5f0f\nEND_VAR\n\n// \u6a21\u5f0f\u5207\u6362\u903b\u8f91\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n", "title": "plc_hello_mixing_tank-FUN\\FB_ModeController.st"}, {"text": "\n// \u6a21\u5f0f\u5207\u6362\u65f6\uff0c\u590d\u4f4dHMI\u547d\u4ee4\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== \u63a7\u5236\u903b\u8f91 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*\u624b\u52a8\u6a21\u5f0f*)\n\t\t// \u4f7f\u7528\u624b\u52a8\u63a7\u5236\u529f\u80fd\u5757\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// \u8f93\u51fa\u5230IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// \u81ea\u52a8\u5e8f\u5217\u7981\u7528\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*\u81ea\u52a8\u6a21\u5f0f*)\n\t\t// \u4f7f\u7528\u81ea\u52a8\u5e8f\u5217\u529f\u80fd\u5757\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// \u8f93\u51fa\u5230IO\n", "title": "plc_hello_mixing_tank-PRG\\main.st"}, {"text": "PROGRAM simulator\nVAR\n\t///\u6a21\u62df\u6df7\u5408\u7535\u673a\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d281\u586b\u5145\u9600\u95e8\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u4ecb\u8d282\u586b\u5145\u9600\u95e8\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///\u6a21\u62df\u6392\u7a7a\u9600\u95e8\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///\u6db2\u4f4d\u6a21\u62df\u5668\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///\u5f53\u524d\u6db2\u4f4d\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///\u7535\u673a\u65cb\u8f6c\u89d2\u5ea6\uff08HMI\u7528\uff09\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== \u7535\u673a\u548c\u9600\u95e8\u6a21\u62df ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n", "title": "plc_hello_mixing_tank-PRG\\simulator.st"}], "metadata": {"task_id": "plc_hello_mixing_tank/5", "ground_truth": "FUNCTION F_UpdateLimitSwitches : BOOL\nVAR_INPUT\n\trTankLevel\t\t\t:\tREAL;\t\t\t// \u5f53\u524d\u6db2\u4f4d (%)\n\trFullThreshold\t\t:\tREAL := 85.0;\t// \u6ee1\u6db2\u4f4d\u9608\u503c (%)\n\trEmptyThreshold\t\t:\tREAL := 5.0;\t// \u7a7a\u6db2\u4f4d\u9608\u503c (%)\nEND_VAR\nVAR_OUTPUT\n\tbLevelFull\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u6ee1\u5f00\u5173\n\tbLevelEmpty\t\t\t:\tBOOL;\t\t\t// \u6db2\u4f4d\u7a7a\u5f00\u5173\nEND_VAR\n\n// \u6db2\u4f4d\u5f00\u5173\u6a21\u62df\nbLevelFull := rTankLevel >= rFullThreshold;\t\t// \u6db2\u4f4d >= 85% \u65f6\uff0c\u6ee1\u5f00\u5173\u6fc0\u6d3b\nbLevelEmpty := rTankLevel <= rEmptyThreshold;\t// \u6db2\u4f4d <= 5% \u65f6\uff0c\u7a7a\u5f00\u5173\u6fc0\u6d3b\n\nF_UpdateLimitSwitches := TRUE;", "fpath_tuple": ["FUN", "F_UpdateLimitSwitches.st"], "context_start_lineno": 0, "lineno": 11, "function_name": "F_UpdateLimitSwitches"}}
