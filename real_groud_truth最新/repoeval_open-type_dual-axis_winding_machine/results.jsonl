{"prompt": "FUNCTION_BLOCK CheckF\nVAR_INPUT\n\tlM\t:\tLREAL;\n\tlL\t:\tLREAL;\n\tlH\t:\tLREAL;\nEND_VAR\nVAR_OUTPUT\n\tlF\t:\tLREAL;\nEND_VAR", "reference": "FUNCTION_BLOCK CheckF\nVAR_INPUT\n\tlM\t:\tLREAL;\n\tlL\t:\tLREAL;\n\tlH\t:\tLREAL;\nEND_VAR\nVAR_OUTPUT\n\tlF\t:\tLREAL;\nEND_VAR\nVAR\nEND_VAR\n\nIF lH<>0 THEN\n\tlF:=9.8*lM/(2*COS(ATAN(lL/lH)));\nEND_IF", "docs": [{"text": "FUNCTION_BLOCK CheckF\nVAR_INPUT\n\tlM\t:\tLREAL;\n\tlL\t:\tLREAL;\n\tlH\t:\tLREAL;\nEND_VAR\nVAR_OUTPUT\n\tlF\t:\tLREAL;\nEND_VAR\nVAR\nEND_VAR\n\nIF lH<>0 THEN\n\tlF:=9.8*lM/(2*COS(ATAN(lL/lH)));\nEND_IF", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\CheckF.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\nEND_CASE", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}], "metadata": {"task_id": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad/0", "ground_truth": "FUNCTION_BLOCK CheckF\nVAR_INPUT\n\tlM\t:\tLREAL;\n\tlL\t:\tLREAL;\n\tlH\t:\tLREAL;\nEND_VAR\nVAR_OUTPUT\n\tlF\t:\tLREAL;\nEND_VAR\nVAR\nEND_VAR\n\nIF lH<>0 THEN\n\tlF:=9.8*lM/(2*COS(ATAN(lL/lH)));\nEND_IF", "fpath_tuple": ["FUN", "CheckF.st"], "context_start_lineno": 0, "lineno": 10, "function_name": "CheckF"}}
{"prompt": "FUNCTION F_CalculateRadius : LREAL\nVAR_INPUT\n\tlD\t\t\t\t:\tLREAL;\t\t//\u4e24\u8f74\u4e2d\u5fc3\u8ddd\u79bb\n\tlHold\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u5f00\u59cb\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlHnew\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u7ed3\u675f\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tlOffset\t\t\t:\tLREAL;\t\t//\u9ad8\u5ea6\u504f\u79fb\u91cf\nEND_VAR", "reference": "FUNCTION F_CalculateRadius : LREAL\nVAR_INPUT\n\tlD\t\t\t\t:\tLREAL;\t\t//\u4e24\u8f74\u4e2d\u5fc3\u8ddd\u79bb\n\tlHold\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u5f00\u59cb\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlHnew\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u7ed3\u675f\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tlOffset\t\t\t:\tLREAL;\t\t//\u9ad8\u5ea6\u504f\u79fb\u91cf\nEND_VAR\n\n// \u534a\u5f84\u8ba1\u7b97\u516c\u5f0f\uff1a\n// R = |\u221a(D\u00b2+(Hnew+offset)\u00b2) - \u221a(D\u00b2+(Hold+offset)\u00b2)| / \u03c0 + Tk\nF_CalculateRadius := ABS(SQRT(EXPT(lD,2)+EXPT(lHnew+lOffset,2)) - SQRT(EXPT(lD,2)+EXPT(lHold+lOffset,2))) / SMC_PI + lTk;", "docs": [{"text": "FUNCTION F_CalculateRadius : LREAL\nVAR_INPUT\n\tlD\t\t\t\t:\tLREAL;\t\t//\u4e24\u8f74\u4e2d\u5fc3\u8ddd\u79bb\n\tlHold\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u5f00\u59cb\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlHnew\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u7ed3\u675f\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tlOffset\t\t\t:\tLREAL;\t\t//\u9ad8\u5ea6\u504f\u79fb\u91cf\nEND_VAR\n\n// \u534a\u5f84\u8ba1\u7b97\u516c\u5f0f\uff1a\n// R = |\u221a(D\u00b2+(Hnew+offset)\u00b2) - \u221a(D\u00b2+(Hold+offset)\u00b2)| / \u03c0 + Tk\nF_CalculateRadius := ABS(SQRT(EXPT(lD,2)+EXPT(lHnew+lOffset,2)) - SQRT(EXPT(lD,2)+EXPT(lHold+lOffset,2))) / SMC_PI + lTk;\n\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\F_CalculateRadius.st"}, {"text": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR\n\n// \u68c0\u67e5\u8f74\u662f\u5426\u5728\u8fd0\u52a8\uff08\u4f4d\u7f6e\u662f\u5426\u53d8\u5316\uff09\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\uff0c\u901f\u5ea6\u9700\u8981\u589e\u52a0\n\t\t// \u516c\u5f0f\uff1aV_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\uff0c\u901f\u5ea6\u9700\u8981\u964d\u4f4e\n\t\t// \u516c\u5f0f\uff1aV_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\F_CompensateVelocity.st"}, {"text": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR\n\n// \u68c0\u67e5\u8f74\u662f\u5426\u5728\u8fd0\u52a8\uff08\u4f4d\u7f6e\u662f\u5426\u53d8\u5316\uff09\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\uff0c\u901f\u5ea6\u9700\u8981\u589e\u52a0\n\t\t// \u516c\u5f0f\uff1aV_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\uff0c\u901f\u5ea6\u9700\u8981\u964d\u4f4e\n\t\t// \u516c\u5f0f\uff1aV_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\nELSE\n\t// \u4f4d\u7f6e\u672a\u53d8\u5316\uff0c\u4fdd\u6301\u5f53\u524d\u901f\u5ea6\n\tF_CompensateVelocity := lCurrentVel;\nEND_IF\n\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\F_CompensateVelocity.st"}, {"text": "\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4ece\u8f74\u534a\u5f84\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// \u4f7f\u7528F_CompensateVelocity\u51fd\u6570\u8fdb\u884c\u901f\u5ea6\u8865\u507f\uff08\u53cd\u5411\uff09\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://\u9519\u8bef\u5904\u7406\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "FUNCTION_BLOCK CheckF\nVAR_INPUT\n\tlM\t:\tLREAL;\n\tlL\t:\tLREAL;\n\tlH\t:\tLREAL;\nEND_VAR\nVAR_OUTPUT\n\tlF\t:\tLREAL;\nEND_VAR\nVAR\nEND_VAR\n\nIF lH<>0 THEN\n\tlF:=9.8*lM/(2*COS(ATAN(lL/lH)));\nEND_IF", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\CheckF.st"}, {"text": "\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4e3b\u8f74\u534a\u5f84\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://\u521d\u59cb\u901f\u5ea6\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://\u540c\u6b65\u63a7\u5236\n\t\t\t// \u4f7f\u7528F_CompensateVelocity\u51fd\u6570\u8fdb\u884c\u901f\u5ea6\u8865\u507f\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://\u53f3\u9650\u4f4d\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://\u5f00\u59cb\u53cd\u5411\u5377\u7ed5\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4ece\u8f74\u534a\u5f84\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4e3b\u8f74\u534a\u5f84\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://\u521d\u59cb\u901f\u5ea6\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://\u540c\u6b65\u63a7\u5236\n\t\t\t// \u4f7f\u7528F_CompensateVelocity\u51fd\u6570\u8fdb\u884c\u901f\u5ea6\u8865\u507f\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://\u53f3\u9650\u4f4d\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4e3b\u8f74\u534a\u5f84\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4ece\u8f74\u534a\u5f84\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// \u4f7f\u7528F_CompensateVelocity\u51fd\u6570\u8fdb\u884c\u901f\u5ea6\u8865\u507f\uff08\u53cd\u5411\uff09\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "VAR_GLOBAL\n\tIOri\t:\tBOOL;\t//\u539f\u70b9\u5f00\u5173\n\tLFlage:BOOL;\t//\u5de6\u9650\u4f4d\u5f00\u5173\n\tRFlage:BOOL;\t//\u53f3\u9650\u4f4d\u5f00\u5173\n\tIReset\t:\tBOOL;\t//\u590d\u4f4d\n\tIStop\t:\tBOOL;\t//\u505c\u6b62\n\tIEStop\t:\tBOOL;\t//\u6025\u505c\n\tIRun\t:\tBOOL;\t//\u542f\u52a8\n\t\n\tQLedY\t:\tBOOL:=TRUE;\n\tQLedR\t:\tBOOL;\n\tQLedG\t:\tBOOL;\n\t\n\tMHmiInHomeVel\t:\tLREAL:=20;\t//\u56de\u96f6\u901f\u5ea6\n\tMHmiInJogVel\t:\tLREAL:=25;\t//\u70b9\u52a8\u901f\u5ea6\n\tMHmiInVel\t:\tLREAL:=20;\t//\u521d\u59cb\u901f\u5ea6\n\tMHmiInG\t:\tLREAL:=0.7;\t//\u6d6e\u68cd\u91cd\u91cf\n\tMHmiOutF\t\t:\tLREAL;\t//\u5b9e\u65f6\u62c9\u529b\n\tMHmiAxisVPos\t:\tREAL;\n\tMHmiOutModeNo\t\t:\tUSINT;//\u5de5\u4f5c\u6a21\u5f0fID\n\t\n\tMHmiJogMP\t:\tBOOL;\t//M\u8f74\u6b63\u5411\u70b9\u52a8\n\tMHmiJogMN\t:\tBOOL;\t//M\u8f74\u8d1f\u5411\u70b9\u52a8\n\tMHmiJogSP\t:\tBOOL;\t//S\u8f74\u6b63\u5411\u70b9\u52a8\n\tMHmiJogSN\t:\tBOOL;\t//S\u8f74\u8d1f\u5411\u70b9\u52a8\n\tMHmiModeChange\t:\tBOOL;\t//\u81ea\u52a8\u624b\u52a8\u6a21\u5f0f\u5207\u6362\u6309\u94ae\n\t\n\tMHmiLed1,MHmiLed2,MHmiLed3,MHmiLed4\t:\tBOOL;\n\tMHmiLGo,MHmiRGo\t:\tBOOL;\n\t\n\tAxisMSta\t:\tAxisStatus;\n\tAxisSSta\t:\tAxisStatus;\n\tMHmiOutMessage\t:\tSTRING;\nEND_VAR", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-global\\GVL.st"}, {"text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_ZERO.st"}], "metadata": {"task_id": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad/1", "ground_truth": "FUNCTION F_CalculateRadius : LREAL\nVAR_INPUT\n\tlD\t\t\t\t:\tLREAL;\t\t//\u4e24\u8f74\u4e2d\u5fc3\u8ddd\u79bb\n\tlHold\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u5f00\u59cb\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlHnew\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u7ed3\u675f\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tlOffset\t\t\t:\tLREAL;\t\t//\u9ad8\u5ea6\u504f\u79fb\u91cf\nEND_VAR\n\n// \u534a\u5f84\u8ba1\u7b97\u516c\u5f0f\uff1a\n// R = |\u221a(D\u00b2+(Hnew+offset)\u00b2) - \u221a(D\u00b2+(Hold+offset)\u00b2)| / \u03c0 + Tk\nF_CalculateRadius := ABS(SQRT(EXPT(lD,2)+EXPT(lHnew+lOffset,2)) - SQRT(EXPT(lD,2)+EXPT(lHold+lOffset,2))) / SMC_PI + lTk;", "fpath_tuple": ["FUN", "F_CalculateRadius.st"], "context_start_lineno": 0, "lineno": 9, "function_name": "F_CalculateRadius"}}
{"prompt": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR", "reference": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR\n\n// \u68c0\u67e5\u8f74\u662f\u5426\u5728\u8fd0\u52a8\uff08\u4f4d\u7f6e\u662f\u5426\u53d8\u5316\uff09\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\uff0c\u901f\u5ea6\u9700\u8981\u589e\u52a0\n\t\t// \u516c\u5f0f\uff1aV_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\uff0c\u901f\u5ea6\u9700\u8981\u964d\u4f4e\n\t\t// \u516c\u5f0f\uff1aV_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\nELSE\n\t// \u4f4d\u7f6e\u672a\u53d8\u5316\uff0c\u4fdd\u6301\u5f53\u524d\u901f\u5ea6\n\tF_CompensateVelocity := lCurrentVel;\nEND_IF", "docs": [{"text": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR\n\n// \u68c0\u67e5\u8f74\u662f\u5426\u5728\u8fd0\u52a8\uff08\u4f4d\u7f6e\u662f\u5426\u53d8\u5316\uff09\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\uff0c\u901f\u5ea6\u9700\u8981\u589e\u52a0\n\t\t// \u516c\u5f0f\uff1aV_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\uff0c\u901f\u5ea6\u9700\u8981\u964d\u4f4e\n\t\t// \u516c\u5f0f\uff1aV_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\nELSE\n\t// \u4f4d\u7f6e\u672a\u53d8\u5316\uff0c\u4fdd\u6301\u5f53\u524d\u901f\u5ea6\n\tF_CompensateVelocity := lCurrentVel;\nEND_IF\n\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\F_CompensateVelocity.st"}, {"text": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR\n\n// \u68c0\u67e5\u8f74\u662f\u5426\u5728\u8fd0\u52a8\uff08\u4f4d\u7f6e\u662f\u5426\u53d8\u5316\uff09\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\uff0c\u901f\u5ea6\u9700\u8981\u589e\u52a0\n\t\t// \u516c\u5f0f\uff1aV_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\uff0c\u901f\u5ea6\u9700\u8981\u964d\u4f4e\n\t\t// \u516c\u5f0f\uff1aV_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\F_CompensateVelocity.st"}, {"text": "FUNCTION F_CalculateRadius : LREAL\nVAR_INPUT\n\tlD\t\t\t\t:\tLREAL;\t\t//\u4e24\u8f74\u4e2d\u5fc3\u8ddd\u79bb\n\tlHold\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u5f00\u59cb\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlHnew\t\t\t:\tLREAL;\t\t//\u6d4b\u91cf\u7ed3\u675f\u65f6\u7684AxisV\u4f4d\u7f6e\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tlOffset\t\t\t:\tLREAL;\t\t//\u9ad8\u5ea6\u504f\u79fb\u91cf\nEND_VAR\n\n// \u534a\u5f84\u8ba1\u7b97\u516c\u5f0f\uff1a\n// R = |\u221a(D\u00b2+(Hnew+offset)\u00b2) - \u221a(D\u00b2+(Hold+offset)\u00b2)| / \u03c0 + Tk\nF_CalculateRadius := ABS(SQRT(EXPT(lD,2)+EXPT(lHnew+lOffset,2)) - SQRT(EXPT(lD,2)+EXPT(lHold+lOffset,2))) / SMC_PI + lTk;\n\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\F_CalculateRadius.st"}, {"text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n\t3://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 2;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_BSLOW_STOP_S.st"}, {"text": "\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_BSLOW_STOP_S.st"}, {"text": "\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n\t3://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 2;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\nEND_CASE\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_BSLOW_STOP_S.st"}, {"text": "\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n\t3://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 2;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_BSLOW_STOP_S.st"}, {"text": "\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://\u5230\u8fbe60\u5ea6\u4f4d\u7f6e\u540e\u505c\u6b62\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://\u534a\u5f84\u6d4b\u91cf\u521d\u59cb\u5316\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://\u534a\u5f84\u6d4b\u91cf\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4ece\u8f74\u534a\u5f84\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://\u5230\u8fbe60\u5ea6\u4f4d\u7f6e\u540e\u505c\u6b62\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://\u534a\u5f84\u6d4b\u91cf\u521d\u59cb\u5316\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://\u534a\u5f84\u6d4b\u91cf\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4ece\u8f74\u534a\u5f84\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// \u4f7f\u7528F_CalculateRadius\u51fd\u6570\u8ba1\u7b97\u4e3b\u8f74\u534a\u5f84\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://\u521d\u59cb\u901f\u5ea6\n\t\t\tAxisMVel:=MHmiInVel;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 32;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t34:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"}], "metadata": {"task_id": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad/2", "ground_truth": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//\u5f53\u524d\u901f\u5ea6\n\tlOldPos\t\t\t:\tLREAL;\t\t//\u4e0a\u4e00\u6b21\u4f4d\u7f6e\n\tlNewPos\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u4f4d\u7f6e\n\tlRadius\t\t\t:\tLREAL;\t\t//\u5f53\u524d\u534a\u5f84\n\tlTk\t\t\t\t:\tLREAL;\t\t//\u6750\u6599\u539a\u5ea6\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=\u653e\u5377\uff08\u534a\u5f84\u51cf\u5c0f\uff09\uff0cFALSE=\u6536\u5377\uff08\u534a\u5f84\u589e\u52a0\uff09\nEND_VAR\n\n// \u68c0\u67e5\u8f74\u662f\u5426\u5728\u8fd0\u52a8\uff08\u4f4d\u7f6e\u662f\u5426\u53d8\u5316\uff09\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\uff0c\u901f\u5ea6\u9700\u8981\u589e\u52a0\n\t\t// \u516c\u5f0f\uff1aV_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\uff0c\u901f\u5ea6\u9700\u8981\u964d\u4f4e\n\t\t// \u516c\u5f0f\uff1aV_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\nELSE\n\t// \u4f4d\u7f6e\u672a\u53d8\u5316\uff0c\u4fdd\u6301\u5f53\u524d\u901f\u5ea6\n\tF_CompensateVelocity := lCurrentVel;\nEND_IF", "fpath_tuple": ["FUN", "F_CompensateVelocity.st"], "context_start_lineno": 0, "lineno": 10, "function_name": "F_CompensateVelocity"}}
{"prompt": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR", "reference": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n\t\t_xBusy := FALSE;\n\t\t_nState := 0;\nEND_CASE\n\nFAST_ZERO();\nFAST_BSLOW_STOP_S();\nFAST_SLOW_STOP_S();\nFAST_BSLOW_I_STOP_S();\nFAST_SLOW_I_STOP_S();", "docs": [{"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_ZERO.st"}, {"text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_ZERO.st"}, {"text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_ZERO.st"}, {"text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome_FAST_BSLOW_STOP_S.st"}], "metadata": {"task_id": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad/3", "ground_truth": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n\t\t_xBusy := FALSE;\n\t\t_nState := 0;\nEND_CASE\n\nFAST_ZERO();\nFAST_BSLOW_STOP_S();\nFAST_SLOW_STOP_S();\nFAST_BSLOW_I_STOP_S();\nFAST_SLOW_I_STOP_S();", "fpath_tuple": ["FUN", "SeekHome.st"], "context_start_lineno": 0, "lineno": 24, "function_name": "SeekHome"}}
{"prompt": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR", "reference": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\nEND_CASE", "docs": [{"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\nEND_CASE", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\StaDisplay.st"}, {"text": "TYPE AxisStatus :\nSTRUCT\n\tbErr\t:\tBOOL;\n\tbStandStill\t:\tBOOL;\n\tbIsMoving\t:\tBOOL;\nEND_STRUCT\nEND_TYPE\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-struct\\AxisStatus.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}, {"text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "title": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad-FUN\\SeekHome.st"}], "metadata": {"task_id": "\u5f00\u653e\u5f0f\u53cc\u8f74\u5377\u7ed5\u673a\u7f16\u7a0b\u5f00\u53d1\u5b9e\u8bad/4", "ground_truth": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\nEND_CASE", "fpath_tuple": ["FUN", "StaDisplay.st"], "context_start_lineno": 0, "lineno": 8, "function_name": "StaDisplay"}}
