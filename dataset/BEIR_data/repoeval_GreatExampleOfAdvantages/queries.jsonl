{"_id": "GreatExampleOfAdvantages/0", "text": "FUNCTION_BLOCK Home\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "metadata": {"task_id": "GreatExampleOfAdvantages/0", "ground_truth": "FUNCTION_BLOCK Home\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tGroundFloor:GroundFloor;\n\tTopFloor:TopFloor;\nEND_VAR\n\nGroundFloor();\nTopFloor();", "fpath_tuple": ["FUN", "Home.st"], "context_start_lineno": 0, "lineno": 6, "function_name": "Home", "line_no": 6}}
{"_id": "GreatExampleOfAdvantages/1", "text": "FUNCTION_BLOCK MQTT_STUFF\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "metadata": {"task_id": "GreatExampleOfAdvantages/1", "ground_truth": "FUNCTION_BLOCK MQTT_STUFF\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\t//Client:SD_MQTT.HANDLE_MQTT;\n\t\n\tSubscriber:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\tInstanceName:CommonTypesAndFunctions.GetInstanceName;\n\tSubscribeTopic:STRING(255);\n\tbirthTopic:STRING(255);\n\tfound:DINT;\n\tpt:POINTER TO STRING;\n\tbirthMessage:MQTT.MQTTPublish;\n\tconnectRising:R_TRIG;\n\txxx:POINTER TO STRING;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSubscriber.SetMqttInOut(MQTT_IN_OUT:= GVL_MQTT.MQTT_IN_OUT);\n\tSubscribeTopic := InstanceName.GetInstanceTopic();\n\tbirthTopic := SubscribeTopic;\n\tfound := CommonTypesAndFunctions.find(str1:= ADR(SubscribeTopic), str2:= ADR('/'));\n\tfound := found + 1 + CommonTypesAndFunctions.find(str1:= ADR(SubscribeTopic[found + 1]), str2:= ADR('/'));\n\tpt := ADR(SubscribeTopic[found  + 1]);\n\tpt^ := 'Receive/#'; \n\tGVL_MQTT.MQTT_IN_OUT.ClientID := CONCAT('CodesysMqtt',TO_STRING(TICKS.GetTick(xDummy:= TRUE)));\nEND_IF\n\n\nGVL_MQTT.MQTT_IN_OUT.clientFB( \n\tMQTT_IN_OUT:= GVL_MQTT.MQTT_IN_OUT, \n\tENABLE:= TRUE, \n\tURL:= 'broker.hivemq.com:1883', \n\tTIMEOUT:= T#8S);\n\t\nSubscriber(\n\tSubscribe:= TRUE, \n\tTopic:= ADR(SubscribeTopic), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= MyProperty.Collector);\n\t\nconnectRising(CLK:= GVL_MQTT.MQTT_IN_OUT.BROKER_CONNECTED);\n\n\tbirthMessage(\n\tTopic:= ADR(birthTopic), \n\tPayloadString:= ADR('born'), \n\tPublishAsString:= TRUE,\n\tQoSIn:= MQTT.QoS.ExactlyOnce , \n\tMRetain:= FALSE, \n\tsend:= connectRising.Q);", "fpath_tuple": ["FUN", "MQTT_STUFF.st"], "context_start_lineno": 0, "lineno": 6, "function_name": "MQTT_STUFF", "line_no": 6}}
