{"_id": "Interation_HowTo_FUN_FirstPublish.st_0-23", "title": "Interation_HowTo-FUN\\FirstPublish.st", "text": "FUNCTION_BLOCK FirstPublish\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tpublisher:MQTT.MQTTPublish;\n\tdoPublish: BOOL;\n\tinit: BOOL;\n\tsendPayload:STRING :='testPayload';\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tpublisher.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\nEND_IF\npublisher(\n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tPayloadString:= ADR(sendPayload), \n\tPublishAsString:= TRUE, \n\tQoSIn:= MQTT.QoS.ExactlyOnce, \n\tMRetain:= FALSE, \n\tsend:= doPublish);", "metadata": [{"fpath_tuple": ["Interation_HowTo", "FUN\\FirstPublish.st"], "repo": "Interation_HowTo", "line_no": 0, "start_line_no": 0, "end_line_no": 23, "window_size": 50, "slice_size": 5}]}
{"_id": "Interation_HowTo_FUN_FirstSubscription.st_0-25", "title": "Interation_HowTo-FUN\\FirstSubscription.st", "text": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tcollector:MQTT.CallbackCollector;\n\tSUB1:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\treceiver:MQTT.ReceiveString;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSUB1.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\n\tcollector.put(instance:= receiver);\n\treceiver.initAsFindTopic(compString:= ADR('TestTopic/FromCodesys'), returnHit:= TRUE);\nEND_IF\n\nSUB1(\n\tSubscribe:= TRUE, \n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= collector);\n", "metadata": [{"fpath_tuple": ["Interation_HowTo", "FUN\\FirstSubscription.st"], "repo": "Interation_HowTo", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "Interation_HowTo_FUN_FirstSubscription.st_0-26", "title": "Interation_HowTo-FUN\\FirstSubscription.st", "text": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tcollector:MQTT.CallbackCollector;\n\tSUB1:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\treceiver:MQTT.ReceiveString;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSUB1.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\n\tcollector.put(instance:= receiver);\n\treceiver.initAsFindTopic(compString:= ADR('TestTopic/FromCodesys'), returnHit:= TRUE);\nEND_IF\n\nSUB1(\n\tSubscribe:= TRUE, \n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= collector);\n\t", "metadata": [{"fpath_tuple": ["Interation_HowTo", "FUN\\FirstSubscription.st"], "repo": "Interation_HowTo", "line_no": 5, "start_line_no": 0, "end_line_no": 26, "window_size": 50, "slice_size": 5}]}
{"_id": "Interation_HowTo_PRG_HowTo.st_0-17", "title": "Interation_HowTo-PRG\\HowTo.st", "text": "PROGRAM HowTo\nVAR\n\tMQTT_IN_OUT:MQTT.MQTT_IN_OUT;\n\t//HandleMQTT:SD_MQTT.HANDLE_MQTT;\n\tFirstPublish:FirstPublish;\n\tFirstSubscription:FirstSubscription;\nEND_VAR\n\nMQTT_IN_OUT.clientFB(\n\tMQTT_IN_OUT:= MQTT_IN_OUT, \n\tENABLE:= TRUE, \n\tURL:= 'test.mosquitto.org:1883', \n\tTIMEOUT:= T#2S, \n\tTLS:= FALSE);\n\t\nFirstPublish();\nFirstSubscription();", "metadata": [{"fpath_tuple": ["Interation_HowTo", "PRG\\HowTo.st"], "repo": "Interation_HowTo", "line_no": 0, "start_line_no": 0, "end_line_no": 17, "window_size": 50, "slice_size": 5}]}
