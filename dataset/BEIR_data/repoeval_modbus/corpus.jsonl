{"_id": "modbus_FUN_CommandExecutor.st_0-25", "title": "modbus-FUN\\CommandExecutor.st", "text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor.st_0-30", "title": "modbus-FUN\\CommandExecutor.st", "text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor.st_0-31", "title": "modbus-FUN\\CommandExecutor.st", "text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 31, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_0-25", "title": "modbus-FUN\\CommandExecutor0.st", "text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\t//方向\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_0-30", "title": "modbus-FUN\\CommandExecutor0.st", "text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\t//方向\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_0-35", "title": "modbus-FUN\\CommandExecutor0.st", "text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\t//方向\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_0-40", "title": "modbus-FUN\\CommandExecutor0.st", "text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\t//方向\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_0-45", "title": "modbus-FUN\\CommandExecutor0.st", "text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\t//方向\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_0-50", "title": "modbus-FUN\\CommandExecutor0.st", "text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\t//方向\n\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_CommandExecutor0.st_5-52", "title": "modbus-FUN\\CommandExecutor0.st", "text": "\tpercent\t\t:REAL;\t\t\t//比例阀百分比 传入0-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\t\nEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\CommandExecutor0.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 52, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_DataReverse.st_0-7", "title": "modbus-FUN\\DataReverse.st", "text": "FUNCTION_BLOCK DataReverse\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\DataReverse.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 7, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_DataReverse_cmdReverse.st_0-11", "title": "modbus-FUN\\DataReverse_cmdReverse.st", "text": "FUNCTION cmdReverse : TargetDirect\nVAR_INPUT\n\tinput\t\t:TargetDirect;\nEND_VAR\n\nIF input = TargetDirect.extend THEN\n\tcmdReverse := TargetDirect.retract;\nEND_IF\nIF input = TargetDirect.retract THEN\n\tcmdReverse := TargetDirect.extend;\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "FUN\\DataReverse_cmdReverse.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 11, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave.st_0-12", "title": "modbus-FUN\\fileSave.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 12, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_close.st_0-17", "title": "modbus-FUN\\fileSave_close.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_close.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 17, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_createDir.st_0-19", "title": "modbus-FUN\\fileSave_createDir.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_createDir.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 19, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_0-25", "title": "modbus-FUN\\fileSave_new.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_0-30", "title": "modbus-FUN\\fileSave_new.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_0-35", "title": "modbus-FUN\\fileSave_new.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_0-40", "title": "modbus-FUN\\fileSave_new.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_0-45", "title": "modbus-FUN\\fileSave_new.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_0-50", "title": "modbus-FUN\\fileSave_new.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_5-55", "title": "modbus-FUN\\fileSave_new.st", "text": "END_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_10-60", "title": "modbus-FUN\\fileSave_new.st", "text": "\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_new.st_15-64", "title": "modbus-FUN\\fileSave_new.st", "text": "\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_new.st"], "repo": "modbus", "line_no": 15, "start_line_no": 15, "end_line_no": 64, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_write.st_0-25", "title": "modbus-FUN\\fileSave_write.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_write.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_write.st_0-30", "title": "modbus-FUN\\fileSave_write.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_write.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_write.st_0-35", "title": "modbus-FUN\\fileSave_write.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_write.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_fileSave_write.st_0-39", "title": "modbus-FUN\\fileSave_write.st", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// 写入数据\n\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "FUN\\fileSave_write.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 39, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_0-25", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "FUNCTION_BLOCK mdbsLogicToPhy\t//modbus华中挡板地址编号对应本地索引编号\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定 1:skyExt, 2:skyRet, 3:grdExt, 4:grdRet)\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t10,14{1..10}  17,20{1..11}\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_0-30", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "FUNCTION_BLOCK mdbsLogicToPhy\t//modbus华中挡板地址编号对应本地索引编号\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定 1:skyExt, 2:skyRet, 3:grdExt, 4:grdRet)\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t10,14{1..10}  17,20{1..11}\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_0-35", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "FUNCTION_BLOCK mdbsLogicToPhy\t//modbus华中挡板地址编号对应本地索引编号\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定 1:skyExt, 2:skyRet, 3:grdExt, 4:grdRet)\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t10,14{1..10}  17,20{1..11}\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_0-40", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "FUNCTION_BLOCK mdbsLogicToPhy\t//modbus华中挡板地址编号对应本地索引编号\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定 1:skyExt, 2:skyRet, 3:grdExt, 4:grdRet)\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t10,14{1..10}  17,20{1..11}\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_0-45", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "FUNCTION_BLOCK mdbsLogicToPhy\t//modbus华中挡板地址编号对应本地索引编号\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定 1:skyExt, 2:skyRet, 3:grdExt, 4:grdRet)\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t10,14{1..10}  17,20{1..11}\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_0-50", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "FUNCTION_BLOCK mdbsLogicToPhy\t//modbus华中挡板地址编号对应本地索引编号\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定 1:skyExt, 2:skyRet, 3:grdExt, 4:grdRet)\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t10,14{1..10}  17,20{1..11}\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_5-55", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "VAR_OUTPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_10-60", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "VAR\nEND_VAR\n\n(**\n * 将华中指令解析为要动作挡板的标号\n * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tgrd1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tgrd3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tgrd4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tgrd5\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_15-65", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": " * (level:1->地轨\t2->天轨)(phyIdx:内存物理地址对应数组索引)\n *)\nCASE section OF\n\t1://区域限定1:skyExtend)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tgrd1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tgrd3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tgrd4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tgrd5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tgrd6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tgrd8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tgrd9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tgrd10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tgrd2\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_20-70", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tgrd1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tgrd3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tgrd4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tgrd5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tgrd6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tgrd8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tgrd9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tgrd10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tgrd2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tgrd7\n\t\tEND_CASE\n\t4://区域限定4:grdRetract)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.retract;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_25-75", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tgrd1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tgrd3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tgrd4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tgrd5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tgrd6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tgrd8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tgrd9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tgrd10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tgrd2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tgrd7\n\t\tEND_CASE\n\t4://区域限定4:grdRetract)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\n\t\t\t2:\tphyIdx := 3;\n\t\t\t3:\tphyIdx := 4;\n\t\t\t4:\tphyIdx := 5;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_30-80", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tgrd1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tgrd3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tgrd4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tgrd5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tgrd6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tgrd8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tgrd9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tgrd10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tgrd2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tgrd7\n\t\tEND_CASE\n\t4://区域限定4:grdRetract)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\n\t\t\t2:\tphyIdx := 3;\n\t\t\t3:\tphyIdx := 4;\n\t\t\t4:\tphyIdx := 5;\n\t\t\t5:\tphyIdx := 6;\n\t\t\t6:\tphyIdx := 8;\n\t\t\t7:\tphyIdx := 9;\n\t\t\t8:\tphyIdx := 10;\n\t\t\t9:\tphyIdx := 2;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsLogicToPhy.st_35-83", "title": "modbus-FUN\\mdbsLogicToPhy.st", "text": "\t2://区域限定2:skyRetract)\n\t\tlevel := 2;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tsky1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tsky3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tsky4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tsky5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tsky6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tsky8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tsky9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tsky10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tsky2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tsky7\n\t\t\t11:\tphyIdx := 0;\t\t//起竖\t->\tsky0\n\t\tEND_CASE\n\n\t3://区域限定3:grdExtend)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.extend;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\t\t//横1\t->\tgrd1\n\t\t\t2:\tphyIdx := 3;\t\t//横2\t->\tgrd3\n\t\t\t3:\tphyIdx := 4;\t\t//横3\t->\tgrd4\n\t\t\t4:\tphyIdx := 5;\t\t//横4\t->\tgrd5\n\t\t\t5:\tphyIdx := 6;\t\t//横5\t->\tgrd6\n\t\t\t6:\tphyIdx := 8;\t\t//横6\t->\tgrd8\n\t\t\t7:\tphyIdx := 9;\t\t//横7\t->\tgrd9\n\t\t\t8:\tphyIdx := 10;\t\t//横8\t->\tgrd10\n\t\t\t9:\tphyIdx := 2;\t\t//纵1\t->\tgrd2\n\t\t\t10:\tphyIdx := 7;\t\t//纵2\t->\tgrd7\n\t\tEND_CASE\n\t4://区域限定4:grdRetract)\n\t\tlevel := 1;\n\t\tdirect := TargetDirect.retract;\n\t\tCASE lgcIdx OF\n\t\t\t1:\tphyIdx := 1;\n\t\t\t2:\tphyIdx := 3;\n\t\t\t3:\tphyIdx := 4;\n\t\t\t4:\tphyIdx := 5;\n\t\t\t5:\tphyIdx := 6;\n\t\t\t6:\tphyIdx := 8;\n\t\t\t7:\tphyIdx := 9;\n\t\t\t8:\tphyIdx := 10;\n\t\t\t9:\tphyIdx := 2;\n\t\t\t10:\tphyIdx := 7;\n\t\tEND_CASE\nEND_CASE", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsLogicToPhy.st"], "repo": "modbus", "line_no": 35, "start_line_no": 35, "end_line_no": 83, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsNumToIdx.st_0-25", "title": "modbus-FUN\\mdbsNumToIdx.st", "text": "FUNCTION_BLOCK mdbsNumToIdx\nVAR_INPUT\n\tdevNo\t\t:WORD;\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\n\tidx\t\t\t:INT;\nEND_VAR\nVAR\n\t\nEND_VAR\n\nIF devNo > 40000 THEN\n\tCASE devNo OF\n\t\t//地轨\n\t\t41010:\tlevel := 1;\tidx := 1;\n\t\t41020:\tlevel := 1;\tidx := 3;\n\t\t41030:\tlevel := 1;\tidx := 4;\n\t\t41040:\tlevel := 1;\tidx := 5;\n\t\t41050:\tlevel := 1;\tidx := 6;\n\t\t41060:\tlevel := 1;\tidx := 8;\n\t\t41070:\tlevel := 1;\tidx := 9;\n\t\t41080:\tlevel := 1;\tidx := 10;\n\t\t42010:\tlevel := 1;\tidx := 2;\n\t\t42020:\tlevel := 1;\tidx := 7;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsNumToIdx.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsNumToIdx.st_0-30", "title": "modbus-FUN\\mdbsNumToIdx.st", "text": "FUNCTION_BLOCK mdbsNumToIdx\nVAR_INPUT\n\tdevNo\t\t:WORD;\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\n\tidx\t\t\t:INT;\nEND_VAR\nVAR\n\t\nEND_VAR\n\nIF devNo > 40000 THEN\n\tCASE devNo OF\n\t\t//地轨\n\t\t41010:\tlevel := 1;\tidx := 1;\n\t\t41020:\tlevel := 1;\tidx := 3;\n\t\t41030:\tlevel := 1;\tidx := 4;\n\t\t41040:\tlevel := 1;\tidx := 5;\n\t\t41050:\tlevel := 1;\tidx := 6;\n\t\t41060:\tlevel := 1;\tidx := 8;\n\t\t41070:\tlevel := 1;\tidx := 9;\n\t\t41080:\tlevel := 1;\tidx := 10;\n\t\t42010:\tlevel := 1;\tidx := 2;\n\t\t42020:\tlevel := 1;\tidx := 7;\n\t\t\n\t\t51010:\tlevel := 2;\tidx := 1;\n\t\t51020:\tlevel := 2;\tidx := 3;\n\t\t51030:\tlevel := 2;\tidx := 4;\n\t\t51040:\tlevel := 2;\tidx := 5;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsNumToIdx.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsNumToIdx.st_0-35", "title": "modbus-FUN\\mdbsNumToIdx.st", "text": "FUNCTION_BLOCK mdbsNumToIdx\nVAR_INPUT\n\tdevNo\t\t:WORD;\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\n\tidx\t\t\t:INT;\nEND_VAR\nVAR\n\t\nEND_VAR\n\nIF devNo > 40000 THEN\n\tCASE devNo OF\n\t\t//地轨\n\t\t41010:\tlevel := 1;\tidx := 1;\n\t\t41020:\tlevel := 1;\tidx := 3;\n\t\t41030:\tlevel := 1;\tidx := 4;\n\t\t41040:\tlevel := 1;\tidx := 5;\n\t\t41050:\tlevel := 1;\tidx := 6;\n\t\t41060:\tlevel := 1;\tidx := 8;\n\t\t41070:\tlevel := 1;\tidx := 9;\n\t\t41080:\tlevel := 1;\tidx := 10;\n\t\t42010:\tlevel := 1;\tidx := 2;\n\t\t42020:\tlevel := 1;\tidx := 7;\n\t\t\n\t\t51010:\tlevel := 2;\tidx := 1;\n\t\t51020:\tlevel := 2;\tidx := 3;\n\t\t51030:\tlevel := 2;\tidx := 4;\n\t\t51040:\tlevel := 2;\tidx := 5;\n\t\t51050:\tlevel := 2;\tidx := 6;\n\t\t51060:\tlevel := 2;\tidx := 8;\n\t\t51070:\tlevel := 2;\tidx := 9;\n\t\t51080:\tlevel := 2;\tidx := 10;\n\t\t52010:\tlevel := 2;\tidx := 2;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsNumToIdx.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsNumToIdx.st_0-40", "title": "modbus-FUN\\mdbsNumToIdx.st", "text": "FUNCTION_BLOCK mdbsNumToIdx\nVAR_INPUT\n\tdevNo\t\t:WORD;\nEND_VAR\nVAR_OUTPUT\n\tlevel\t\t:INT;\n\tidx\t\t\t:INT;\nEND_VAR\nVAR\n\t\nEND_VAR\n\nIF devNo > 40000 THEN\n\tCASE devNo OF\n\t\t//地轨\n\t\t41010:\tlevel := 1;\tidx := 1;\n\t\t41020:\tlevel := 1;\tidx := 3;\n\t\t41030:\tlevel := 1;\tidx := 4;\n\t\t41040:\tlevel := 1;\tidx := 5;\n\t\t41050:\tlevel := 1;\tidx := 6;\n\t\t41060:\tlevel := 1;\tidx := 8;\n\t\t41070:\tlevel := 1;\tidx := 9;\n\t\t41080:\tlevel := 1;\tidx := 10;\n\t\t42010:\tlevel := 1;\tidx := 2;\n\t\t42020:\tlevel := 1;\tidx := 7;\n\t\t\n\t\t51010:\tlevel := 2;\tidx := 1;\n\t\t51020:\tlevel := 2;\tidx := 3;\n\t\t51030:\tlevel := 2;\tidx := 4;\n\t\t51040:\tlevel := 2;\tidx := 5;\n\t\t51050:\tlevel := 2;\tidx := 6;\n\t\t51060:\tlevel := 2;\tidx := 8;\n\t\t51070:\tlevel := 2;\tidx := 9;\n\t\t51080:\tlevel := 2;\tidx := 10;\n\t\t52010:\tlevel := 2;\tidx := 2;\n\t\t52020:\tlevel := 2;\tidx := 7;\n\t\t53000:\tlevel := 2;\tidx := 0;\n\t\t53010:\tlevel := 2;\tidx := 0;\n\tEND_CASE\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsNumToIdx.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_0-25", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "FUNCTION_BLOCK mdbsPhyToLogic\t//modbus本地索引对应回传华中的状态地址\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定(1:grdExt, 2:grdRet, 3:skyExt, 4:skyRet)\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\nEND_VAR\nVAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_0-30", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "FUNCTION_BLOCK mdbsPhyToLogic\t//modbus本地索引对应回传华中的状态地址\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定(1:grdExt, 2:grdRet, 3:skyExt, 4:skyRet)\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\nEND_VAR\nVAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_0-35", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "FUNCTION_BLOCK mdbsPhyToLogic\t//modbus本地索引对应回传华中的状态地址\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定(1:grdExt, 2:grdRet, 3:skyExt, 4:skyRet)\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\nEND_VAR\nVAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_0-40", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "FUNCTION_BLOCK mdbsPhyToLogic\t//modbus本地索引对应回传华中的状态地址\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定(1:grdExt, 2:grdRet, 3:skyExt, 4:skyRet)\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\nEND_VAR\nVAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_0-45", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "FUNCTION_BLOCK mdbsPhyToLogic\t//modbus本地索引对应回传华中的状态地址\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定(1:grdExt, 2:grdRet, 3:skyExt, 4:skyRet)\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\nEND_VAR\nVAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_0-50", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "FUNCTION_BLOCK mdbsPhyToLogic\t//modbus本地索引对应回传华中的状态地址\nVAR_INPUT\n\tsection\t\t:INT;\t//区域限定(1:grdExt, 2:grdRet, 3:skyExt, 4:skyRet)\n\tphyIdx\t\t:INT;\t//内存物理地址对应数组索引\nEND_VAR\nVAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n\t\t\t2:\tlgcIdx := 135;\t\t//sky2e\t->\t纵1\t\n\t\t\t3:\tlgcIdx := 128;\t\t//sky3e\t->\t横2\t\n\t\t\t4:\tlgcIdx := 129;\t\t//sky4e\t->\t横3\t\n\t\t\t5:\tlgcIdx := 130;\t\t//sky5e\t->\t横4\t\n\t\t\t6:\tlgcIdx := 131;\t\t//sky6e\t->\t横5\t\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_5-55", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "VAR_OUTPUT\n\tlgcIdx\t\t:INT;\t//华中对应的地址\t127 175 223 271...\nEND_VAR\nVAR\nEND_VAR\n\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n\t\t\t2:\tlgcIdx := 135;\t\t//sky2e\t->\t纵1\t\n\t\t\t3:\tlgcIdx := 128;\t\t//sky3e\t->\t横2\t\n\t\t\t4:\tlgcIdx := 129;\t\t//sky4e\t->\t横3\t\n\t\t\t5:\tlgcIdx := 130;\t\t//sky5e\t->\t横4\t\n\t\t\t6:\tlgcIdx := 131;\t\t//sky6e\t->\t横5\t\n\t\t\t7:\tlgcIdx := 136;\t\t//sky7e\t->\t纵2\t\n\t\t\t8:\tlgcIdx := 132;\t\t//sky8e\t->\t横6\t\n\t\t\t9:\tlgcIdx := 133;\t\t//sky9e\t->\t横7\t\n\t\t\t10:\tlgcIdx := 134;\t\t//sky10e->\t横8\t\n\t\tEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_10-60", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "\n(**\n * 输入挡板标号，返回华中需要的寄存器地址号\n *)\nCASE section OF\n\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n\t\t\t2:\tlgcIdx := 135;\t\t//sky2e\t->\t纵1\t\n\t\t\t3:\tlgcIdx := 128;\t\t//sky3e\t->\t横2\t\n\t\t\t4:\tlgcIdx := 129;\t\t//sky4e\t->\t横3\t\n\t\t\t5:\tlgcIdx := 130;\t\t//sky5e\t->\t横4\t\n\t\t\t6:\tlgcIdx := 131;\t\t//sky6e\t->\t横5\t\n\t\t\t7:\tlgcIdx := 136;\t\t//sky7e\t->\t纵2\t\n\t\t\t8:\tlgcIdx := 132;\t\t//sky8e\t->\t横6\t\n\t\t\t9:\tlgcIdx := 133;\t\t//sky9e\t->\t横7\t\n\t\t\t10:\tlgcIdx := 134;\t\t//sky10e->\t横8\t\n\t\tEND_CASE\n\t\n\t4://区域限定(4:skyRetract)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 185;\t\t//sky0r\t->\t起竖\n\t\t\t1:\tlgcIdx := 175;\t\t//sky1r\t->\t横1\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_15-65", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "\t1://区域限定(1:groundExtend)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 223;\t\t//grd1e\t->\t横1\t223\n\t\t\t2:\tlgcIdx := 231;\t\t//grd2e\t->\t纵1\t231\n\t\t\t3:\tlgcIdx := 224;\t\t//grd3e\t->\t横2\t224\n\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n\t\t\t2:\tlgcIdx := 135;\t\t//sky2e\t->\t纵1\t\n\t\t\t3:\tlgcIdx := 128;\t\t//sky3e\t->\t横2\t\n\t\t\t4:\tlgcIdx := 129;\t\t//sky4e\t->\t横3\t\n\t\t\t5:\tlgcIdx := 130;\t\t//sky5e\t->\t横4\t\n\t\t\t6:\tlgcIdx := 131;\t\t//sky6e\t->\t横5\t\n\t\t\t7:\tlgcIdx := 136;\t\t//sky7e\t->\t纵2\t\n\t\t\t8:\tlgcIdx := 132;\t\t//sky8e\t->\t横6\t\n\t\t\t9:\tlgcIdx := 133;\t\t//sky9e\t->\t横7\t\n\t\t\t10:\tlgcIdx := 134;\t\t//sky10e->\t横8\t\n\t\tEND_CASE\n\t\n\t4://区域限定(4:skyRetract)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 185;\t\t//sky0r\t->\t起竖\n\t\t\t1:\tlgcIdx := 175;\t\t//sky1r\t->\t横1\n\t\t\t2:\tlgcIdx := 183;\t\t//sky2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 176;\t\t//sky3r\t->\t横2\n\t\t\t4:\tlgcIdx := 177;\t\t//sky4r\t->\t横3\n\t\t\t5:\tlgcIdx := 178;\t\t//sky5r\t->\t横4\n\t\t\t6:\tlgcIdx := 179;\t\t//sky6r\t->\t横5\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_20-70", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "\t\t\t4:\tlgcIdx := 225;\t\t//grd4e\t->\t横3\t225\n\t\t\t5:\tlgcIdx := 226;\t\t//grd5e\t->\t横4\t226\n\t\t\t6:\tlgcIdx := 227;\t\t//grd6e\t->\t横5\t227\n\t\t\t7:\tlgcIdx := 232;\t\t//grd7e\t->\t纵2\t232\n\t\t\t8:\tlgcIdx := 228;\t\t//grd8e\t->\t横6\t228\n\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n\t\t\t2:\tlgcIdx := 135;\t\t//sky2e\t->\t纵1\t\n\t\t\t3:\tlgcIdx := 128;\t\t//sky3e\t->\t横2\t\n\t\t\t4:\tlgcIdx := 129;\t\t//sky4e\t->\t横3\t\n\t\t\t5:\tlgcIdx := 130;\t\t//sky5e\t->\t横4\t\n\t\t\t6:\tlgcIdx := 131;\t\t//sky6e\t->\t横5\t\n\t\t\t7:\tlgcIdx := 136;\t\t//sky7e\t->\t纵2\t\n\t\t\t8:\tlgcIdx := 132;\t\t//sky8e\t->\t横6\t\n\t\t\t9:\tlgcIdx := 133;\t\t//sky9e\t->\t横7\t\n\t\t\t10:\tlgcIdx := 134;\t\t//sky10e->\t横8\t\n\t\tEND_CASE\n\t\n\t4://区域限定(4:skyRetract)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 185;\t\t//sky0r\t->\t起竖\n\t\t\t1:\tlgcIdx := 175;\t\t//sky1r\t->\t横1\n\t\t\t2:\tlgcIdx := 183;\t\t//sky2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 176;\t\t//sky3r\t->\t横2\n\t\t\t4:\tlgcIdx := 177;\t\t//sky4r\t->\t横3\n\t\t\t5:\tlgcIdx := 178;\t\t//sky5r\t->\t横4\n\t\t\t6:\tlgcIdx := 179;\t\t//sky6r\t->\t横5\n\t\t\t7:\tlgcIdx := 184;\t\t//sky7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 180;\t\t//sky8r\t->\t横6\n\t\t\t9:\tlgcIdx := 181;\t\t//sky9r\t->\t横7\n\t\t\t10:\tlgcIdx := 182;\t\t//sky10r->\t横8\n\t\tEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_mdbsPhyToLogic.st_25-71", "title": "modbus-FUN\\mdbsPhyToLogic.st", "text": "\t\t\t9:\tlgcIdx := 229;\t\t//grd9e\t->\t横7\t229\n\t\t\t10:\tlgcIdx := 230;\t\t//grd10e->\t横8\t230\n\t\tEND_CASE\n\t2://区域限定(2:groundRetract)\n\t\tCASE phyIdx OF\n\t\t\t1:\tlgcIdx := 271;\t\t//grd1r\t->\t横1\n\t\t\t2:\tlgcIdx := 279;\t\t//grd2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 272;\t\t//grd3r\t->\t横2\n\t\t\t4:\tlgcIdx := 273;\t\t//grd4r\t->\t横3\n\t\t\t5:\tlgcIdx := 274;\t\t//grd5r\t->\t横4\n\t\t\t6:\tlgcIdx := 275;\t\t//grd6r\t->\t横5\n\t\t\t7:\tlgcIdx := 280;\t\t//grd7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 276;\t\t//grd8r\t->\t横6\n\t\t\t9:\tlgcIdx := 277;\t\t//grd9r\t->\t横7\n\t\t\t10:\tlgcIdx := 278;\t\t//grd10r->\t横8\n\t\tEND_CASE\n\t3://区域限定(3:skyExtend)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 137;\t\t//sky0e\t->\t起竖\t\n\t\t\t1:\tlgcIdx := 127;\t\t//sky1e\t->\t横1\t\n\t\t\t2:\tlgcIdx := 135;\t\t//sky2e\t->\t纵1\t\n\t\t\t3:\tlgcIdx := 128;\t\t//sky3e\t->\t横2\t\n\t\t\t4:\tlgcIdx := 129;\t\t//sky4e\t->\t横3\t\n\t\t\t5:\tlgcIdx := 130;\t\t//sky5e\t->\t横4\t\n\t\t\t6:\tlgcIdx := 131;\t\t//sky6e\t->\t横5\t\n\t\t\t7:\tlgcIdx := 136;\t\t//sky7e\t->\t纵2\t\n\t\t\t8:\tlgcIdx := 132;\t\t//sky8e\t->\t横6\t\n\t\t\t9:\tlgcIdx := 133;\t\t//sky9e\t->\t横7\t\n\t\t\t10:\tlgcIdx := 134;\t\t//sky10e->\t横8\t\n\t\tEND_CASE\n\t\n\t4://区域限定(4:skyRetract)\n\t\tCASE phyIdx OF\n\t\t\t0:\tlgcIdx := 185;\t\t//sky0r\t->\t起竖\n\t\t\t1:\tlgcIdx := 175;\t\t//sky1r\t->\t横1\n\t\t\t2:\tlgcIdx := 183;\t\t//sky2r\t->\t纵1\n\t\t\t3:\tlgcIdx := 176;\t\t//sky3r\t->\t横2\n\t\t\t4:\tlgcIdx := 177;\t\t//sky4r\t->\t横3\n\t\t\t5:\tlgcIdx := 178;\t\t//sky5r\t->\t横4\n\t\t\t6:\tlgcIdx := 179;\t\t//sky6r\t->\t横5\n\t\t\t7:\tlgcIdx := 184;\t\t//sky7r\t->\t纵2\n\t\t\t8:\tlgcIdx := 180;\t\t//sky8r\t->\t横6\n\t\t\t9:\tlgcIdx := 181;\t\t//sky9r\t->\t横7\n\t\t\t10:\tlgcIdx := 182;\t\t//sky10r->\t横8\n\t\tEND_CASE\nEND_CASE", "metadata": [{"fpath_tuple": ["modbus", "FUN\\mdbsPhyToLogic.st"], "repo": "modbus", "line_no": 25, "start_line_no": 25, "end_line_no": 71, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_percentCalc.st_0-25", "title": "modbus-FUN\\percentCalc.st", "text": "FUNCTION percentCalc : REAL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\nEND_VAR\nVAR\n\tc\t\t\t:REAL;\n\tp\t\t\t:REAL;\nEND_VAR\n\n\n//伸出百分比计算\nCASE level OF\n\t1:\n\t\tIF gDev.grd[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.grd[idx].sensor.position - gDev.grd[idx].sensor.retractVal;\n\t\tp := gDev.grd[idx].sensor.extendVal - gDev.grd[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\n\t2:\n\t\tIF gDev.sky[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.sky[idx].sensor.position - gDev.sky[idx].sensor.retractVal;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\percentCalc.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_percentCalc.st_0-28", "title": "modbus-FUN\\percentCalc.st", "text": "FUNCTION percentCalc : REAL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\nEND_VAR\nVAR\n\tc\t\t\t:REAL;\n\tp\t\t\t:REAL;\nEND_VAR\n\n\n//伸出百分比计算\nCASE level OF\n\t1:\n\t\tIF gDev.grd[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.grd[idx].sensor.position - gDev.grd[idx].sensor.retractVal;\n\t\tp := gDev.grd[idx].sensor.extendVal - gDev.grd[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\n\t2:\n\t\tIF gDev.sky[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.sky[idx].sensor.position - gDev.sky[idx].sensor.retractVal;\n\t\tp := gDev.sky[idx].sensor.extendVal - gDev.sky[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\nEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\percentCalc.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 28, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_setButtonByDirect.st_0-25", "title": "modbus-FUN\\setButtonByDirect.st", "text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t本函数用于根据输入参数 操作UI界面的按钮变量\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\setButtonByDirect.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_setButtonByDirect.st_0-30", "title": "modbus-FUN\\setButtonByDirect.st", "text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t本函数用于根据输入参数 操作UI界面的按钮变量\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//参数校验\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\setButtonByDirect.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_setButtonByDirect.st_0-35", "title": "modbus-FUN\\setButtonByDirect.st", "text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t本函数用于根据输入参数 操作UI界面的按钮变量\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\setButtonByDirect.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_setButtonByDirect.st_0-40", "title": "modbus-FUN\\setButtonByDirect.st", "text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t本函数用于根据输入参数 操作UI界面的按钮变量\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := TRUE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\setButtonByDirect.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_setButtonByDirect.st_0-45", "title": "modbus-FUN\\setButtonByDirect.st", "text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t本函数用于根据输入参数 操作UI界面的按钮变量\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := TRUE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\setButtonByDirect.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_setButtonByDirect.st_0-48", "title": "modbus-FUN\\setButtonByDirect.st", "text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t//挡板索引编号\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t本函数用于根据输入参数 操作UI界面的按钮变量\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//参数校验\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := TRUE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t\t\nEND_CASE;", "metadata": [{"fpath_tuple": ["modbus", "FUN\\setButtonByDirect.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 48, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_tcpUpload_send.st_0-25", "title": "modbus-FUN\\tcpUpload_send.st", "text": "FUNCTION_BLOCK tcpUpload\nVAR_INPUT\n\tInetAddress\t\t:STRING;\n\tport\t\t\t:UINT;\n\tdataLength\t\t:__XINT;\n\tsendBuf \t\t:ARRAY[1..1024]OF BYTE;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\ttcpConnector\t:TCP.Connector;\n\ttcpStream\t\t:TCP.Stream;\n\tpointerStream\t:POINTER TO TCP.Stream;\n\tsizeData\t\t:__XINT;\n\n\ttcpState\t\t:UINT:=0;\n\ttcpCount\t\t:UINT:=0;\n\t\n\tnetState\t\t:INT;\nEND_VAR\n\ntcpCount := tcpCount + 1;\nCASE tcpState OF\n\n\t0:\t\t\t//connet server\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\tcpUpload_send.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_tcpUpload_send.st_0-30", "title": "modbus-FUN\\tcpUpload_send.st", "text": "FUNCTION_BLOCK tcpUpload\nVAR_INPUT\n\tInetAddress\t\t:STRING;\n\tport\t\t\t:UINT;\n\tdataLength\t\t:__XINT;\n\tsendBuf \t\t:ARRAY[1..1024]OF BYTE;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\ttcpConnector\t:TCP.Connector;\n\ttcpStream\t\t:TCP.Stream;\n\tpointerStream\t:POINTER TO TCP.Stream;\n\tsizeData\t\t:__XINT;\n\n\ttcpState\t\t:UINT:=0;\n\ttcpCount\t\t:UINT:=0;\n\t\n\tnetState\t\t:INT;\nEND_VAR\n\ntcpCount := tcpCount + 1;\nCASE tcpState OF\n\n\t0:\t\t\t//connet server\n\t\ttcpConnector.Connect(sIPAddress:= InetAddress,uiPort:= port,pStream => pointerStream);\n\t\tIF pointerStream<>0 THEN\n\t\t\ttcpState :=1;\n\t\tELSE\n\t\t\ttcpState :=2;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\tcpUpload_send.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_tcpUpload_send.st_0-35", "title": "modbus-FUN\\tcpUpload_send.st", "text": "FUNCTION_BLOCK tcpUpload\nVAR_INPUT\n\tInetAddress\t\t:STRING;\n\tport\t\t\t:UINT;\n\tdataLength\t\t:__XINT;\n\tsendBuf \t\t:ARRAY[1..1024]OF BYTE;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\ttcpConnector\t:TCP.Connector;\n\ttcpStream\t\t:TCP.Stream;\n\tpointerStream\t:POINTER TO TCP.Stream;\n\tsizeData\t\t:__XINT;\n\n\ttcpState\t\t:UINT:=0;\n\ttcpCount\t\t:UINT:=0;\n\t\n\tnetState\t\t:INT;\nEND_VAR\n\ntcpCount := tcpCount + 1;\nCASE tcpState OF\n\n\t0:\t\t\t//connet server\n\t\ttcpConnector.Connect(sIPAddress:= InetAddress,uiPort:= port,pStream => pointerStream);\n\t\tIF pointerStream<>0 THEN\n\t\t\ttcpState :=1;\n\t\tELSE\n\t\t\ttcpState :=2;\n\t\tEND_IF\n\t\t\n\t1:\t\t\t\n\t\tnetState := pointerStream^.Send(ADR(sendBuf),dataLength,diSent=>sizeData);\t\t\t\n\t\tIF netState <> 0 THEN\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\tcpUpload_send.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_tcpUpload_send.st_0-40", "title": "modbus-FUN\\tcpUpload_send.st", "text": "FUNCTION_BLOCK tcpUpload\nVAR_INPUT\n\tInetAddress\t\t:STRING;\n\tport\t\t\t:UINT;\n\tdataLength\t\t:__XINT;\n\tsendBuf \t\t:ARRAY[1..1024]OF BYTE;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\ttcpConnector\t:TCP.Connector;\n\ttcpStream\t\t:TCP.Stream;\n\tpointerStream\t:POINTER TO TCP.Stream;\n\tsizeData\t\t:__XINT;\n\n\ttcpState\t\t:UINT:=0;\n\ttcpCount\t\t:UINT:=0;\n\t\n\tnetState\t\t:INT;\nEND_VAR\n\ntcpCount := tcpCount + 1;\nCASE tcpState OF\n\n\t0:\t\t\t//connet server\n\t\ttcpConnector.Connect(sIPAddress:= InetAddress,uiPort:= port,pStream => pointerStream);\n\t\tIF pointerStream<>0 THEN\n\t\t\ttcpState :=1;\n\t\tELSE\n\t\t\ttcpState :=2;\n\t\tEND_IF\n\t\t\n\t1:\t\t\t\n\t\tnetState := pointerStream^.Send(ADR(sendBuf),dataLength,diSent=>sizeData);\t\t\t\n\t\tIF netState <> 0 THEN\n\t\t\ttcpState := 2;\t\n\t\tEND_IF\n\t\t\n\t\t\n\t2:\t\t \t//断开连接\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\tcpUpload_send.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_tcpUpload_send.st_0-44", "title": "modbus-FUN\\tcpUpload_send.st", "text": "FUNCTION_BLOCK tcpUpload\nVAR_INPUT\n\tInetAddress\t\t:STRING;\n\tport\t\t\t:UINT;\n\tdataLength\t\t:__XINT;\n\tsendBuf \t\t:ARRAY[1..1024]OF BYTE;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\ttcpConnector\t:TCP.Connector;\n\ttcpStream\t\t:TCP.Stream;\n\tpointerStream\t:POINTER TO TCP.Stream;\n\tsizeData\t\t:__XINT;\n\n\ttcpState\t\t:UINT:=0;\n\ttcpCount\t\t:UINT:=0;\n\t\n\tnetState\t\t:INT;\nEND_VAR\n\ntcpCount := tcpCount + 1;\nCASE tcpState OF\n\n\t0:\t\t\t//connet server\n\t\ttcpConnector.Connect(sIPAddress:= InetAddress,uiPort:= port,pStream => pointerStream);\n\t\tIF pointerStream<>0 THEN\n\t\t\ttcpState :=1;\n\t\tELSE\n\t\t\ttcpState :=2;\n\t\tEND_IF\n\t\t\n\t1:\t\t\t\n\t\tnetState := pointerStream^.Send(ADR(sendBuf),dataLength,diSent=>sizeData);\t\t\t\n\t\tIF netState <> 0 THEN\n\t\t\ttcpState := 2;\t\n\t\tEND_IF\n\t\t\n\t\t\n\t2:\t\t \t//断开连接\n\t    tcpConnector.Disconnect();\n\t\ttcpState := 0;\n\nEND_CASE", "metadata": [{"fpath_tuple": ["modbus", "FUN\\tcpUpload_send.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 44, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_0-25", "title": "modbus-FUN\\updateDevStatus.st", "text": "FUNCTION updateDevStatus : DevStatus\nVAR_INPUT\n\tlevel\t\t:INT;\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t//挡板索引编号\t\n\terrorVal\t:REAL;\t\t//误差范围\nEND_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_0-30", "title": "modbus-FUN\\updateDevStatus.st", "text": "FUNCTION updateDevStatus : DevStatus\nVAR_INPUT\n\tlevel\t\t:INT;\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t//挡板索引编号\t\n\terrorVal\t:REAL;\t\t//误差范围\nEND_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n\t\textendVal := gDev.sky[idx].sensor.extendVal;\n\t\tretractVal := gDev.sky[idx].sensor.retractVal;\n\t\tnowVal := gDev.sky[idx].sensor.position;\n\t\tstat := gDev.sky[idx].state;\nEND_CASE\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_0-35", "title": "modbus-FUN\\updateDevStatus.st", "text": "FUNCTION updateDevStatus : DevStatus\nVAR_INPUT\n\tlevel\t\t:INT;\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t//挡板索引编号\t\n\terrorVal\t:REAL;\t\t//误差范围\nEND_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n\t\textendVal := gDev.sky[idx].sensor.extendVal;\n\t\tretractVal := gDev.sky[idx].sensor.retractVal;\n\t\tnowVal := gDev.sky[idx].sensor.position;\n\t\tstat := gDev.sky[idx].state;\nEND_CASE\n\nIF nowVal > 1 THEN\n\tIF nowVal < retractVal + errorVal THEN\n\t\tstat := DevStatus.retracted;\n\tELSIF nowVal > extendVal - errorVal THEN\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_0-40", "title": "modbus-FUN\\updateDevStatus.st", "text": "FUNCTION updateDevStatus : DevStatus\nVAR_INPUT\n\tlevel\t\t:INT;\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t//挡板索引编号\t\n\terrorVal\t:REAL;\t\t//误差范围\nEND_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n\t\textendVal := gDev.sky[idx].sensor.extendVal;\n\t\tretractVal := gDev.sky[idx].sensor.retractVal;\n\t\tnowVal := gDev.sky[idx].sensor.position;\n\t\tstat := gDev.sky[idx].state;\nEND_CASE\n\nIF nowVal > 1 THEN\n\tIF nowVal < retractVal + errorVal THEN\n\t\tstat := DevStatus.retracted;\n\tELSIF nowVal > extendVal - errorVal THEN\n\t\tstat := DevStatus.extended;\n\tELSE \n\t\tIF stat <> DevStatus.runing THEN\n\t\t\tstat := DevStatus.error;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_0-45", "title": "modbus-FUN\\updateDevStatus.st", "text": "FUNCTION updateDevStatus : DevStatus\nVAR_INPUT\n\tlevel\t\t:INT;\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t//挡板索引编号\t\n\terrorVal\t:REAL;\t\t//误差范围\nEND_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n\t\textendVal := gDev.sky[idx].sensor.extendVal;\n\t\tretractVal := gDev.sky[idx].sensor.retractVal;\n\t\tnowVal := gDev.sky[idx].sensor.position;\n\t\tstat := gDev.sky[idx].state;\nEND_CASE\n\nIF nowVal > 1 THEN\n\tIF nowVal < retractVal + errorVal THEN\n\t\tstat := DevStatus.retracted;\n\tELSIF nowVal > extendVal - errorVal THEN\n\t\tstat := DevStatus.extended;\n\tELSE \n\t\tIF stat <> DevStatus.runing THEN\n\t\t\tstat := DevStatus.error;\n\t\tEND_IF\n\tEND_IF\nELSE\n\tstat := DevStatus.unknown;\t\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_0-50", "title": "modbus-FUN\\updateDevStatus.st", "text": "FUNCTION updateDevStatus : DevStatus\nVAR_INPUT\n\tlevel\t\t:INT;\t\t//1->地轨\t2->天轨\n\tidx\t\t\t:INT;\t\t//挡板索引编号\t\n\terrorVal\t:REAL;\t\t//误差范围\nEND_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n\t\textendVal := gDev.sky[idx].sensor.extendVal;\n\t\tretractVal := gDev.sky[idx].sensor.retractVal;\n\t\tnowVal := gDev.sky[idx].sensor.position;\n\t\tstat := gDev.sky[idx].state;\nEND_CASE\n\nIF nowVal > 1 THEN\n\tIF nowVal < retractVal + errorVal THEN\n\t\tstat := DevStatus.retracted;\n\tELSIF nowVal > extendVal - errorVal THEN\n\t\tstat := DevStatus.extended;\n\tELSE \n\t\tIF stat <> DevStatus.runing THEN\n\t\t\tstat := DevStatus.error;\n\t\tEND_IF\n\tEND_IF\nELSE\n\tstat := DevStatus.unknown;\t\nEND_IF\n\nCASE level OF\n\t1:\n\t\tgDev.grd[idx].state := stat;\n\t2:\n\t\tgDev.sky[idx].state := stat;\n", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_FUN_updateDevStatus.st_5-53", "title": "modbus-FUN\\updateDevStatus.st", "text": "END_VAR\nVAR\n\textendVal\t:REAL;\t\t//伸出值\n\tretractVal\t:REAL;\t\t//缩回到位值\n\tnowVal\t\t:REAL;\t\t//当前值\n\tstat\t\t:DevStatus;\t//设备状态\nEND_VAR\n\n(* 本函数用于根据设备的标定伸出/缩回值以及当前位置\n** 判断该缸体是否处于伸出/缩回到位状态，如果到位更新参数\n*)\n\nstat := DevStatus.unknown;\t//初始化状态量\nCASE level OF\n\t1:\n\t\textendVal := gDev.grd[idx].sensor.extendVal;\n\t\tretractVal := gDev.grd[idx].sensor.retractVal;\n\t\tnowVal := gDev.grd[idx].sensor.position;\n\t\tstat := gDev.grd[idx].state;\n\t2:\n\t\textendVal := gDev.sky[idx].sensor.extendVal;\n\t\tretractVal := gDev.sky[idx].sensor.retractVal;\n\t\tnowVal := gDev.sky[idx].sensor.position;\n\t\tstat := gDev.sky[idx].state;\nEND_CASE\n\nIF nowVal > 1 THEN\n\tIF nowVal < retractVal + errorVal THEN\n\t\tstat := DevStatus.retracted;\n\tELSIF nowVal > extendVal - errorVal THEN\n\t\tstat := DevStatus.extended;\n\tELSE \n\t\tIF stat <> DevStatus.runing THEN\n\t\t\tstat := DevStatus.error;\n\t\tEND_IF\n\tEND_IF\nELSE\n\tstat := DevStatus.unknown;\t\nEND_IF\n\nCASE level OF\n\t1:\n\t\tgDev.grd[idx].state := stat;\n\t2:\n\t\tgDev.sky[idx].state := stat;\nEND_CASE\n\nupdateDevStatus := stat;", "metadata": [{"fpath_tuple": ["modbus", "FUN\\updateDevStatus.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 53, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_global_gCan.st_0-25", "title": "modbus-global\\gCan.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\tC6TxMsg\t\t\tAT%QW00\t\t:Can_BUS_8Outputs;\t\n\tC6RxMsg\t\t\tAT%IW00\t\t:Can_BUS_8Inputs;\n\tC6RxCounter\t\t\t \t   \t:UINT;\n\t\n\tC3TxMsg\t\t\tAT%QW52\t\t:Can_BUS_8Outputs;\t\n\tC3RxMsg\t\t\tAT%IW47\t\t:Can_BUS_8Inputs;\n\tC3RxCounter\t\t\t   \t   \t:UINT;\n\n\tC4TxMsg\t\t\tAT%QW104\t:Can_BUS_8Outputs;\t\n\tC4RxMsg\t\t\tAT%IW94\t\t:Can_BUS_8Inputs;\n\tC4RxCounter\t\t\t\t  \t:UINT;\n\n\tC2TxMsg\t\t\tAT%QW156\t:Can_BUS_8Outputs;\t\n\tC2RxMsg\t\t\tAT%IW141\t:Can_BUS_8Inputs;\n\tC2RxCounter\t\t\t \t   \t:UINT;\n//(*\t\n\tC1TxMsg\t\t\tAT%QW208\t:Can_BUS_8Outputs;\t\n\tC1RxMsg\t\t\tAT%IW188\t:Can_BUS_8Inputs;\n\tC1RxCounter\t\t\t   \t   \t:UINT;\n\n\tC5TxMsg\t\t\tAT%QW260\t:Can_BUS_8Outputs;\t\n\tC5RxMsg\t\t\tAT%IW235\t:Can_BUS_8Inputs;\n\tC5RxCounter\t\t\t\t  \t:UINT;\n", "metadata": [{"fpath_tuple": ["modbus", "global\\gCan.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_global_gCan.st_0-28", "title": "modbus-global\\gCan.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\tC6TxMsg\t\t\tAT%QW00\t\t:Can_BUS_8Outputs;\t\n\tC6RxMsg\t\t\tAT%IW00\t\t:Can_BUS_8Inputs;\n\tC6RxCounter\t\t\t \t   \t:UINT;\n\t\n\tC3TxMsg\t\t\tAT%QW52\t\t:Can_BUS_8Outputs;\t\n\tC3RxMsg\t\t\tAT%IW47\t\t:Can_BUS_8Inputs;\n\tC3RxCounter\t\t\t   \t   \t:UINT;\n\n\tC4TxMsg\t\t\tAT%QW104\t:Can_BUS_8Outputs;\t\n\tC4RxMsg\t\t\tAT%IW94\t\t:Can_BUS_8Inputs;\n\tC4RxCounter\t\t\t\t  \t:UINT;\n\n\tC2TxMsg\t\t\tAT%QW156\t:Can_BUS_8Outputs;\t\n\tC2RxMsg\t\t\tAT%IW141\t:Can_BUS_8Inputs;\n\tC2RxCounter\t\t\t \t   \t:UINT;\n//(*\t\n\tC1TxMsg\t\t\tAT%QW208\t:Can_BUS_8Outputs;\t\n\tC1RxMsg\t\t\tAT%IW188\t:Can_BUS_8Inputs;\n\tC1RxCounter\t\t\t   \t   \t:UINT;\n\n\tC5TxMsg\t\t\tAT%QW260\t:Can_BUS_8Outputs;\t\n\tC5RxMsg\t\t\tAT%IW235\t:Can_BUS_8Inputs;\n\tC5RxCounter\t\t\t\t  \t:UINT;\n//*)\n\nEND_VAR", "metadata": [{"fpath_tuple": ["modbus", "global\\gCan.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 28, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_global_gController.st_0-6", "title": "modbus-global\\gController.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\t//发送至SWMC的比例阀的控制指令\n\tsky\t\t:ARRAY[0..10] OF CmdPercentSet;\n\tgrd\t\t:ARRAY[1..10] OF CmdPercentSet;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["modbus", "global\\gController.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 6, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_global_gDev.st_0-5", "title": "modbus-global\\gDev.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\tsky\t\t:ARRAY[0..10] OF DeviceUnit;\n\tgrd\t\t:ARRAY[1..10] OF DeviceUnit;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["modbus", "global\\gDev.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 5, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_global_gModbus.st_0-8", "title": "modbus-global\\gModbus.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL CONSTANT\n\tg_modbusDataSizeMax\t:  UINT:=65535; // 从机保持寄存器数量\nEND_VAR\nVAR_GLOBAL\n\tsrv\t\t\t\t:mdbsStruct;\t\t//modbus-service\n\tmodbusBuffer\t:ARRAY[0..g_modbusDataSizeMax] OF WORD;\t//输入寄存器数据区\t\nEND_VAR\n", "metadata": [{"fpath_tuple": ["modbus", "global\\gModbus.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 8, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_global_gUI.st_0-13", "title": "modbus-global\\gUI.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\t\n\tmode\t:UIMode;\t\t\t\t\t//模式设定\n\n\tsky\t\t:ARRAY[0..10] OF UIUnit;\t//挡板2组\n\tgrd\t\t:ARRAY[1..10] OF UIUnit;\t//挡板1组\n\t\n\tpid\t\t:UiPid;\t\t\t\t\t\t//pid测试界面参数\n\t\n\t\n\t\nEND_VAR", "metadata": [{"fpath_tuple": ["modbus", "global\\gUI.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 13, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_0-25", "title": "modbus-PRG\\ModbusAct.st", "text": "PROGRAM ModbusAct\nVAR\n\tbInit\t\t\t\t\t: BOOL:=TRUE;\n\tiCountAct\t\t\t\t: UINT:=10;\t\n\tconnectStatus\t\t\t: UINT;\n\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_0-30", "title": "modbus-PRG\\ModbusAct.st", "text": "PROGRAM ModbusAct\nVAR\n\tbInit\t\t\t\t\t: BOOL:=TRUE;\n\tiCountAct\t\t\t\t: UINT:=10;\t\n\tconnectStatus\t\t\t: UINT;\n\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_0-35", "title": "modbus-PRG\\ModbusAct.st", "text": "PROGRAM ModbusAct\nVAR\n\tbInit\t\t\t\t\t: BOOL:=TRUE;\n\tiCountAct\t\t\t\t: UINT:=10;\t\n\tconnectStatus\t\t\t: UINT;\n\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_0-40", "title": "modbus-PRG\\ModbusAct.st", "text": "PROGRAM ModbusAct\nVAR\n\tbInit\t\t\t\t\t: BOOL:=TRUE;\n\tiCountAct\t\t\t\t: UINT:=10;\t\n\tconnectStatus\t\t\t: UINT;\n\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n\nIF fbModbusClient.bSuccess THEN\n\tconnectStatus := 1;\t\n\tCASE iCountAct OF\n\t\t10:\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_0-45", "title": "modbus-PRG\\ModbusAct.st", "text": "PROGRAM ModbusAct\nVAR\n\tbInit\t\t\t\t\t: BOOL:=TRUE;\n\tiCountAct\t\t\t\t: UINT:=10;\t\n\tconnectStatus\t\t\t: UINT;\n\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n\nIF fbModbusClient.bSuccess THEN\n\tconnectStatus := 1;\t\n\tCASE iCountAct OF\n\t\t10:\n\t\t\thandleCmd();\t\t//接收华中指令\n\t\t\tlocalCmdHandler();\t//处理本机挡板指令 + 启动液压站\n\t\t20:\n\t\t\thandleStat1();\t\t//发送状态至华中\n\t\t21:\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_0-50", "title": "modbus-PRG\\ModbusAct.st", "text": "PROGRAM ModbusAct\nVAR\n\tbInit\t\t\t\t\t: BOOL:=TRUE;\n\tiCountAct\t\t\t\t: UINT:=10;\t\n\tconnectStatus\t\t\t: UINT;\n\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n\nIF fbModbusClient.bSuccess THEN\n\tconnectStatus := 1;\t\n\tCASE iCountAct OF\n\t\t10:\n\t\t\thandleCmd();\t\t//接收华中指令\n\t\t\tlocalCmdHandler();\t//处理本机挡板指令 + 启动液压站\n\t\t20:\n\t\t\thandleStat1();\t\t//发送状态至华中\n\t\t21:\n\t\t\thandleStat2();\n\t\t22:\n\t\t\thandleStat3();\n\tEND_CASE\nEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_5-55", "title": "modbus-PRG\\ModbusAct.st", "text": "\tiErrCode\t\t\t\t: BYTE;\n\tidx\t\t\t\t\t\t: INT;\n\tlogicIdx\t\t\t\t: INT;\n\tgi\t\t\t\t\t\t: INT;\n\tsi\t\t\t\t\t\t: INT;\t\t\n\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n\nIF fbModbusClient.bSuccess THEN\n\tconnectStatus := 1;\t\n\tCASE iCountAct OF\n\t\t10:\n\t\t\thandleCmd();\t\t//接收华中指令\n\t\t\tlocalCmdHandler();\t//处理本机挡板指令 + 启动液压站\n\t\t20:\n\t\t\thandleStat1();\t\t//发送状态至华中\n\t\t21:\n\t\t\thandleStat2();\n\t\t22:\n\t\t\thandleStat3();\n\tEND_CASE\nEND_IF\n\t\t\n//做服务器接收天地轨客户端发送的数据\nfbModbusServer(\twPort := 512, \n\tpInputData := ADR(inputBuff[0]), pOutputData := ADR(holdingBuff[0]), \n\tuiInputDataSize := 1000, uiOutputDataSize := 1000, \n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_10-60", "title": "modbus-PRG\\ModbusAct.st", "text": "\tiSec\t\t\t\t\t: INT;\t\t//section iterator\n\tdevNum\t\t\t\t\t: WORD;\n\tfbModbusServer\t\t\t: ModbusServer;\n\tinputBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\tholdingBuff\t\t\t\t: ARRAY[0..1000]OF WORD;\n\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n\nIF fbModbusClient.bSuccess THEN\n\tconnectStatus := 1;\t\n\tCASE iCountAct OF\n\t\t10:\n\t\t\thandleCmd();\t\t//接收华中指令\n\t\t\tlocalCmdHandler();\t//处理本机挡板指令 + 启动液压站\n\t\t20:\n\t\t\thandleStat1();\t\t//发送状态至华中\n\t\t21:\n\t\t\thandleStat2();\n\t\t22:\n\t\t\thandleStat3();\n\tEND_CASE\nEND_IF\n\t\t\n//做服务器接收天地轨客户端发送的数据\nfbModbusServer(\twPort := 512, \n\tpInputData := ADR(inputBuff[0]), pOutputData := ADR(holdingBuff[0]), \n\tuiInputDataSize := 1000, uiOutputDataSize := 1000, \n\txEnable := TRUE, xReset := FALSE, tTimeout := 1000, \n\txBusy => , xError => , byClientConnections => );\n\n\n//将缓冲区Buff数据转至本地\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct.st_15-63", "title": "modbus-PRG\\ModbusAct.st", "text": "\t\n\tfbModbusClient\t\t\t: ModbusTcp_Client;\n\tfbReadHoldRegister  \t: ReadHoldRegister;\t\t//读保持寄存器\n\tfbWriteMutiRegister\t\t: WriteMutiRegister;\t\n\tl2p\t\t\t\t\t\t: mdbsLogicToPhy;\n\tp2l\t\t\t\t\t\t: mdbsPhyToLogic;\n\tn2i\t\t\t\t\t\t: mdbsNumToIdx;\n\trvs\t\t\t\t\t\t: DataReverse;\nEND_VAR\n\n//初始化\nIF bInit THEN\n\tinitialize();\n\tbInit := FALSE;\nEND_IF\n\nIF connectStatus <> 1 THEN\n\tfbModbusClient(sIPAddress:='192.168.2.21',uiPort:=520);//连接IPC\n\t//fbModbusClient(sIPAddress:='192.168.5.55',uiPort:=502);//连接工控机\nEND_IF\n\nIF fbModbusClient.bSuccess THEN\n\tconnectStatus := 1;\t\n\tCASE iCountAct OF\n\t\t10:\n\t\t\thandleCmd();\t\t//接收华中指令\n\t\t\tlocalCmdHandler();\t//处理本机挡板指令 + 启动液压站\n\t\t20:\n\t\t\thandleStat1();\t\t//发送状态至华中\n\t\t21:\n\t\t\thandleStat2();\n\t\t22:\n\t\t\thandleStat3();\n\tEND_CASE\nEND_IF\n\t\t\n//做服务器接收天地轨客户端发送的数据\nfbModbusServer(\twPort := 512, \n\tpInputData := ADR(inputBuff[0]), pOutputData := ADR(holdingBuff[0]), \n\tuiInputDataSize := 1000, uiOutputDataSize := 1000, \n\txEnable := TRUE, xReset := FALSE, tTimeout := 1000, \n\txBusy => , xError => , byClientConnections => );\n\n\n//将缓冲区Buff数据转至本地\nlocalStatHandler();\n//updateStat();\n\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct.st"], "repo": "modbus", "line_no": 15, "start_line_no": 15, "end_line_no": 63, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_handleCmd.st_0-25", "title": "modbus-PRG\\ModbusAct_handleCmd.st", "text": "fbReadHoldRegister(\n\txExecute\t:= TRUE,\n\tslaveId\t\t:= 1,\n\twStartAdr\t:= gModbus.srv.request.startAddr,\n\twLen\t\t:= gModbus.srv.request.length,\n\tpTcpStream\t:= fbModbusClient.pfbTcpStream,\n\tmodbusHoldRegData:= gModbus.modbusBuffer);\n\t\n\nIF fbReadHoldRegister.bSucced THEN\n\tfbReadHoldRegister(xExecute := FALSE,\n\t\t\t\t\t\tmodbusHoldRegData:=g_modbusHoldRegData);\n\n\t//使用holdingBuff接收供给链控制指令，在下一轮循环中作为服务器保持该数据\n\tFOR idx := 10 TO 57 DO\t\t\t//startAddr to startAddr+length-1\n\t\tholdingBuff[idx] := gModbus.modbusBuffer[idx];\n\tEND_FOR\n\t\n\tiCountAct := 20;\t\t\nEND_IF\n\nIF fbReadHoldRegister.berror THEN\n\tfbReadHoldRegister(xExecute :=FALSE,\n\t\t\t\t\t\tmodbusHoldRegData:= gModbus.modbusBuffer);\n\tfbModbusClient.M_Reset();\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_handleCmd.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_handleCmd.st_0-30", "title": "modbus-PRG\\ModbusAct_handleCmd.st", "text": "fbReadHoldRegister(\n\txExecute\t:= TRUE,\n\tslaveId\t\t:= 1,\n\twStartAdr\t:= gModbus.srv.request.startAddr,\n\twLen\t\t:= gModbus.srv.request.length,\n\tpTcpStream\t:= fbModbusClient.pfbTcpStream,\n\tmodbusHoldRegData:= gModbus.modbusBuffer);\n\t\n\nIF fbReadHoldRegister.bSucced THEN\n\tfbReadHoldRegister(xExecute := FALSE,\n\t\t\t\t\t\tmodbusHoldRegData:=g_modbusHoldRegData);\n\n\t//使用holdingBuff接收供给链控制指令，在下一轮循环中作为服务器保持该数据\n\tFOR idx := 10 TO 57 DO\t\t\t//startAddr to startAddr+length-1\n\t\tholdingBuff[idx] := gModbus.modbusBuffer[idx];\n\tEND_FOR\n\t\n\tiCountAct := 20;\t\t\nEND_IF\n\nIF fbReadHoldRegister.berror THEN\n\tfbReadHoldRegister(xExecute :=FALSE,\n\t\t\t\t\t\tmodbusHoldRegData:= gModbus.modbusBuffer);\n\tfbModbusClient.M_Reset();\n\tconnectStatus := 0;\n\tiCountAct := 10;\t\n\tiErrCode := fbReadHoldRegister.errCode;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_handleCmd.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_handleCmd.st_0-32", "title": "modbus-PRG\\ModbusAct_handleCmd.st", "text": "fbReadHoldRegister(\n\txExecute\t:= TRUE,\n\tslaveId\t\t:= 1,\n\twStartAdr\t:= gModbus.srv.request.startAddr,\n\twLen\t\t:= gModbus.srv.request.length,\n\tpTcpStream\t:= fbModbusClient.pfbTcpStream,\n\tmodbusHoldRegData:= gModbus.modbusBuffer);\n\t\n\nIF fbReadHoldRegister.bSucced THEN\n\tfbReadHoldRegister(xExecute := FALSE,\n\t\t\t\t\t\tmodbusHoldRegData:=g_modbusHoldRegData);\n\n\t//使用holdingBuff接收供给链控制指令，在下一轮循环中作为服务器保持该数据\n\tFOR idx := 10 TO 57 DO\t\t\t//startAddr to startAddr+length-1\n\t\tholdingBuff[idx] := gModbus.modbusBuffer[idx];\n\tEND_FOR\n\t\n\tiCountAct := 20;\t\t\nEND_IF\n\nIF fbReadHoldRegister.berror THEN\n\tfbReadHoldRegister(xExecute :=FALSE,\n\t\t\t\t\t\tmodbusHoldRegData:= gModbus.modbusBuffer);\n\tfbModbusClient.M_Reset();\n\tconnectStatus := 0;\n\tiCountAct := 10;\t\n\tiErrCode := fbReadHoldRegister.errCode;\nEND_IF\n\n\n  ", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_handleCmd.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 32, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_handleStat1.st_0-20", "title": "modbus-PRG\\ModbusAct_handleStat1.st", "text": "fbWriteMutiRegister(\n\txExecute\t:= TRUE,\n\tslaveId\t\t:= 1,\n\tstartAddr\t:= 110, //gModbus.srv.response.startAddr 110-319\n\twRegNum\t\t:= 70,\n\tvalue\t\t:= ADR(gModbus.srv.response.data[110]),\n\tpTcpStream\t:= fbModbusClient.pfbTcpStream);\n\t\nIF fbWriteMutiRegister.bSucced THEN\n\tfbWriteMutiRegister(xExecute := FALSE);\n\tiCountAct:= 21;\nEND_IF\n\nIF fbWriteMutiRegister.berror THEN\n\tfbWriteMutiRegister(xExecute := FALSE);\n\tfbModbusClient.M_Reset();\n\tiCountAct := 10;\n\tconnectStatus := 0;\n\tiErrCode := fbWriteMutiRegister.errCode;\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_handleStat1.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 20, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_handleStat2.st_0-20", "title": "modbus-PRG\\ModbusAct_handleStat2.st", "text": "fbWriteMutiRegister(\n\txExecute\t:= TRUE,\n\tslaveId\t\t:= 1,\n\tstartAddr\t:= 180, //gModbus.srv.response.startAddr 110-319\n\twRegNum\t\t:= 70,\n\tvalue\t\t:= ADR(gModbus.srv.response.data[180]),\n\tpTcpStream\t:= fbModbusClient.pfbTcpStream);\n\t\nIF fbWriteMutiRegister.bSucced THEN\n\tfbWriteMutiRegister(xExecute := FALSE);\n\tiCountAct:= 22;\nEND_IF\n\nIF fbWriteMutiRegister.berror THEN\n\tfbWriteMutiRegister(xExecute := FALSE);\n\tfbModbusClient.M_Reset();\n\tiCountAct := 10;\n\tconnectStatus := 0;\n\tiErrCode := fbWriteMutiRegister.errCode;\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_handleStat2.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 20, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_handleStat3.st_0-22", "title": "modbus-PRG\\ModbusAct_handleStat3.st", "text": "\n\nfbWriteMutiRegister(\n\txExecute\t:= TRUE,\n\tslaveId\t\t:= 1,\n\tstartAddr\t:= 250, //gModbus.srv.response.startAddr 110-319\n\twRegNum\t\t:= 70,\n\tvalue\t\t:= ADR(gModbus.srv.response.data[250]),\n\tpTcpStream\t:= fbModbusClient.pfbTcpStream);\n\t\nIF fbWriteMutiRegister.bSucced THEN\n\tfbWriteMutiRegister(xExecute := FALSE);\n\tiCountAct:= 10;\nEND_IF\n\nIF fbWriteMutiRegister.berror THEN\n\tfbWriteMutiRegister(xExecute := FALSE);\n\tfbModbusClient.M_Reset();\n\tiCountAct := 10;\n\tconnectStatus := 0;\n\tiErrCode := fbWriteMutiRegister.errCode;\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_handleStat3.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 22, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_initialize.st_0-5", "title": "modbus-PRG\\ModbusAct_initialize.st", "text": "gModbus.srv.request.startAddr\t:= 10;\ngModbus.srv.request.length\t\t:= 48;\n\ngModbus.srv.response.startAddr := 110;\ngModbus.srv.response.length := 210;", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_initialize.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 5, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_0-25", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "METHOD localCmdHandler\nVAR_INPUT\nEND_VAR\nVAR\n\tiBit\t\t\t\t:INT;\n\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_0-30", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "METHOD localCmdHandler\nVAR_INPUT\nEND_VAR\nVAR\n\tiBit\t\t\t\t:INT;\n\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_0-35", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "METHOD localCmdHandler\nVAR_INPUT\nEND_VAR\nVAR\n\tiBit\t\t\t\t:INT;\n\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_0-40", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "METHOD localCmdHandler\nVAR_INPUT\nEND_VAR\nVAR\n\tiBit\t\t\t\t:INT;\n\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_0-45", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "METHOD localCmdHandler\nVAR_INPUT\nEND_VAR\nVAR\n\tiBit\t\t\t\t:INT;\n\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n\t\t\t\texeDirect := rvs.cmdReverse(input := exDirect);\t\t//华中要求伸缩指令及状态翻转\n\t\t\t\t\n\t\t\t\t//过滤\t机械结构未完成的grd[4] and sky[4]\n\t\t\t\tIF exIdx = 4 THEN\texeDirect := TargetDirect.stop;\tEND_IF\n\t\t\t\t\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_0-50", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "METHOD localCmdHandler\nVAR_INPUT\nEND_VAR\nVAR\n\tiBit\t\t\t\t:INT;\n\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n\t\t\t\texeDirect := rvs.cmdReverse(input := exDirect);\t\t//华中要求伸缩指令及状态翻转\n\t\t\t\t\n\t\t\t\t//过滤\t机械结构未完成的grd[4] and sky[4]\n\t\t\t\tIF exIdx = 4 THEN\texeDirect := TargetDirect.stop;\tEND_IF\n\t\t\t\t\n\t\t\t\tsetButtonByDirect(level := exLevel, idx := exIdx, direct := exeDirect);\n\t\t\tEND_IF\n\t\t\tgModbus.srv.request.arrLast[iSec, iBit] := gModbus.srv.request.arrNew[iSec, iBit];\t\t\t\n\t\tEND_IF\n\tEND_FOR\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_5-55", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "\texLevel\t\t\t\t:INT;\n\texIdx\t\t\t\t:INT;\n\texDirect\t\t\t:TargetDirect;\n\texeDirect\t\t\t:TargetDirect;\n\nEND_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n\t\t\t\texeDirect := rvs.cmdReverse(input := exDirect);\t\t//华中要求伸缩指令及状态翻转\n\t\t\t\t\n\t\t\t\t//过滤\t机械结构未完成的grd[4] and sky[4]\n\t\t\t\tIF exIdx = 4 THEN\texeDirect := TargetDirect.stop;\tEND_IF\n\t\t\t\t\n\t\t\t\tsetButtonByDirect(level := exLevel, idx := exIdx, direct := exeDirect);\n\t\t\tEND_IF\n\t\t\tgModbus.srv.request.arrLast[iSec, iBit] := gModbus.srv.request.arrNew[iSec, iBit];\t\t\t\n\t\tEND_IF\n\tEND_FOR\n\t\nEND_FOR\n\n\ndevNum := gModbus.modbusBuffer[49];\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_10-60", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "END_VAR\nVAR CONSTANT\n\tno\t\t:ARRAY [1..8] OF INT :=[11, 14, 17, 20, 49, 50, 51, 52];\t\nEND_VAR\n\n\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n\t\t\t\texeDirect := rvs.cmdReverse(input := exDirect);\t\t//华中要求伸缩指令及状态翻转\n\t\t\t\t\n\t\t\t\t//过滤\t机械结构未完成的grd[4] and sky[4]\n\t\t\t\tIF exIdx = 4 THEN\texeDirect := TargetDirect.stop;\tEND_IF\n\t\t\t\t\n\t\t\t\tsetButtonByDirect(level := exLevel, idx := exIdx, direct := exeDirect);\n\t\t\tEND_IF\n\t\t\tgModbus.srv.request.arrLast[iSec, iBit] := gModbus.srv.request.arrNew[iSec, iBit];\t\t\t\n\t\tEND_IF\n\tEND_FOR\n\t\nEND_FOR\n\n\ndevNum := gModbus.modbusBuffer[49];\n\n\n//新增一键启动液压站\n\nIF gUI.mode.hydPowerOn THEN\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_15-65", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "\nFOR iSec := 1 TO 8 DO\n\tgModbus.srv.request.data[no[iSec]] := gModbus.modbusBuffer[no[iSec]];\nEND_FOR\n\nFOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n\t\t\t\texeDirect := rvs.cmdReverse(input := exDirect);\t\t//华中要求伸缩指令及状态翻转\n\t\t\t\t\n\t\t\t\t//过滤\t机械结构未完成的grd[4] and sky[4]\n\t\t\t\tIF exIdx = 4 THEN\texeDirect := TargetDirect.stop;\tEND_IF\n\t\t\t\t\n\t\t\t\tsetButtonByDirect(level := exLevel, idx := exIdx, direct := exeDirect);\n\t\t\tEND_IF\n\t\t\tgModbus.srv.request.arrLast[iSec, iBit] := gModbus.srv.request.arrNew[iSec, iBit];\t\t\t\n\t\tEND_IF\n\tEND_FOR\n\t\nEND_FOR\n\n\ndevNum := gModbus.modbusBuffer[49];\n\n\n//新增一键启动液压站\n\nIF gUI.mode.hydPowerOn THEN\n\tholdingBuff[48] := holdingBuff[48] OR 1;\nEND_IF\nIF gUI.mode.hydPowerOff THEN\n\tholdingBuff[48] := holdingBuff[48] OR 2;\nEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localCmdHandler.st_20-66", "title": "modbus-PRG\\ModbusAct_localCmdHandler.st", "text": "FOR iSec := 1 TO 4 DO\n\tgModbus.srv.request.arrNew[iSec,1\t] := gModbus.srv.request.data[no[iSec]].1\t;\n\tgModbus.srv.request.arrNew[iSec,2\t] := gModbus.srv.request.data[no[iSec]].2\t;\n\tgModbus.srv.request.arrNew[iSec,3\t] := gModbus.srv.request.data[no[iSec]].3\t;\n\tgModbus.srv.request.arrNew[iSec,4\t] := gModbus.srv.request.data[no[iSec]].4\t;\n\tgModbus.srv.request.arrNew[iSec,5\t] := gModbus.srv.request.data[no[iSec]].5\t;\n\tgModbus.srv.request.arrNew[iSec,6\t] := gModbus.srv.request.data[no[iSec]].6\t;\n\tgModbus.srv.request.arrNew[iSec,7\t] := gModbus.srv.request.data[no[iSec]].7\t;\n\tgModbus.srv.request.arrNew[iSec,8\t] := gModbus.srv.request.data[no[iSec]].8\t;\n\tgModbus.srv.request.arrNew[iSec,9\t] := gModbus.srv.request.data[no[iSec]].9\t;\n\tgModbus.srv.request.arrNew[iSec,10\t] := gModbus.srv.request.data[no[iSec]].10\t;\n\tgModbus.srv.request.arrNew[iSec,11\t] := gModbus.srv.request.data[no[iSec]].11\t;\nEND_FOR\nFOR iSec := 1 TO 4 DO\n\tFOR iBit := 1 TO 11 DO\n\t\tIF gModbus.srv.request.arrNew[iSec, iBit] <> gModbus.srv.request.arrLast[iSec, iBit] THEN\n\t\t\tIF gModbus.srv.request.arrNew[iSec, iBit] THEN\t//仅执行上升沿\n\t\t\t\t//specifically output[grd/sky(exLevel), no(exIdx), TargetDirect(exDirect)]\n\t\t\t\tl2p(section := iSec, lgcIdx := iBit, \n\t\t\t\t\tlevel => exLevel, phyIdx => exIdx, direct => exDirect);\n\t\t\t\texeDirect := rvs.cmdReverse(input := exDirect);\t\t//华中要求伸缩指令及状态翻转\n\t\t\t\t\n\t\t\t\t//过滤\t机械结构未完成的grd[4] and sky[4]\n\t\t\t\tIF exIdx = 4 THEN\texeDirect := TargetDirect.stop;\tEND_IF\n\t\t\t\t\n\t\t\t\tsetButtonByDirect(level := exLevel, idx := exIdx, direct := exeDirect);\n\t\t\tEND_IF\n\t\t\tgModbus.srv.request.arrLast[iSec, iBit] := gModbus.srv.request.arrNew[iSec, iBit];\t\t\t\n\t\tEND_IF\n\tEND_FOR\n\t\nEND_FOR\n\n\ndevNum := gModbus.modbusBuffer[49];\n\n\n//新增一键启动液压站\n\nIF gUI.mode.hydPowerOn THEN\n\tholdingBuff[48] := holdingBuff[48] OR 1;\nEND_IF\nIF gUI.mode.hydPowerOff THEN\n\tholdingBuff[48] := holdingBuff[48] OR 2;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localCmdHandler.st"], "repo": "modbus", "line_no": 20, "start_line_no": 20, "end_line_no": 66, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_0-25", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "METHOD localStatHandler : TargetDirect\nVAR_INPUT\nEND_VAR\n\n\n//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_0-30", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "METHOD localStatHandler : TargetDirect\nVAR_INPUT\nEND_VAR\n\n\n//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_0-35", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "METHOD localStatHandler : TargetDirect\nVAR_INPUT\nEND_VAR\n\n\n//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_0-40", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "METHOD localStatHandler : TargetDirect\nVAR_INPUT\nEND_VAR\n\n\n//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_0-45", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "METHOD localStatHandler : TargetDirect\nVAR_INPUT\nEND_VAR\n\n\n//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_0-50", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "METHOD localStatHandler : TargetDirect\nVAR_INPUT\nEND_VAR\n\n\n//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_5-55", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_10-60", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t(*******************************\n\t伸缩反向判定，伸出到位返回缩回到位\n\t**********************************)\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n\t\t1:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.retractVal);\n\t\t2:\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_15-65", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n\t\t1:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.retractVal);\n\t\t2:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.retractVal);\n\tEND_CASE\nEND_IF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_localStatHandler.st_20-66", "title": "modbus-PRG\\ModbusAct_localStatHandler.st", "text": "\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\t\n\t\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n\t\t1:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.retractVal);\n\t\t2:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.retractVal);\n\tEND_CASE\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_localStatHandler.st"], "repo": "modbus", "line_no": 20, "start_line_no": 20, "end_line_no": 66, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_0-25", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_0-30", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_0-35", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_0-40", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_0-45", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_0-50", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//先把天地轨控制器数据同步至本地\nFOR idx := 110 TO 319 DO\n\tgModbus.srv.response.data[idx] := holdingBuff[idx];\nEND_FOR\n\n//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n\t\t1:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.retractVal);\n\t\t2:\n", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_PRG_ModbusAct_updateStat.st_5-55", "title": "modbus-PRG\\ModbusAct_updateStat.st", "text": "//根据实际状态将挡板数据同步至本地\nFOR gi := 1 TO 10 DO\n\t\n\t//地轨伸出到位检查\n\tp2l(section := 1, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[223,232]\n\tIF gDev.grd[gi].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//地轨缩回到位检查\n\tp2l(section := 2, phyIdx := gi, lgcIdx => logicIdx);//logicIdx范围[271,280]\n\tIF gDev.grd[gi].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\nEND_FOR\n\nFOR si := 0 TO 10 DO\n\t//天轨伸出到位检查\n\tp2l(section := 3, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[127,137]\n\tIF gDev.sky[si].state = DevStatus.extended THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\n\t//天轨缩回到位检查\n\tp2l(section := 4, phyIdx := si, lgcIdx => logicIdx);//logicIdx范围[175,185]\n\tIF gDev.sky[si].state = DevStatus.retracted THEN\n\t\tgModbus.srv.response.data[logicIdx] := 1;\n\tELSE\n\t\tgModbus.srv.response.data[logicIdx] := 0;\n\tEND_IF\t\nEND_FOR\n//至此110-309寄存器状态更新完毕，向华中发送时只需在寄存器写入response.data[]数组\n\nIF devNum > 40000 THEN\n\tn2i(devNo := devNum, level => , idx =>);\n\tCASE n2i.level OF\n\t\t1:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.grd[n2i.idx].sensor.retractVal);\n\t\t2:\n\t\t\tgModbus.srv.response.data[312] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.position);\n\t\t\tgModbus.srv.response.data[313] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.extendVal);\n\t\t\tgModbus.srv.response.data[314] := REAL_TO_WORD(10 * gDev.sky[n2i.idx].sensor.retractVal);\n\tEND_CASE\nEND_IF", "metadata": [{"fpath_tuple": ["modbus", "PRG\\ModbusAct_updateStat.st"], "repo": "modbus", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_CmdPercentSet.st_0-6", "title": "modbus-struct\\CmdPercentSet.st", "text": "TYPE CmdPercentSet :\nSTRUCT\n\textendPercent\t\t:WORD;\t\t//0-65535\n\tretractPercent\t\t:WORD;\t\t//0-65535\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\CmdPercentSet.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 6, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_DeviceUnit.st_0-17", "title": "modbus-struct\\DeviceUnit.st", "text": "TYPE DeviceUnit :\nSTRUCT\n\t\t\n\tsensor\t\t\t:SensorInfo;\t\t//传感器参数\n\tctrl\t\t\t:DevPid;\t\t\t//pid等计算控制执行参数\t\n\t\n\tvector\t\t\t:TargetDirect;\t\t//指令运行方向 1-伸出 2-缩回 3-停止\n\tstate\t\t\t:DevStatus;\t\t\t//设备状态 0-未知 1-运行 2-伸出到位 3-缩回到位 4-错误\n\t\n\ttimeCounter\t\t:INT;\t\t\t\t//timeoutCounter超时计数器\n\texeCounter\t\t:INT;\t\t\t\t//ExecuteCounter额外执行时间计数\n\n\tcurrent\t\t\t:ARRAY[1..2] OF WORD;\t//电流mA\t[i,j] -> 地轨挡板i的电流，j=1伸出电流，j=2缩回电流\n\n\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\DeviceUnit.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 17, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_DevStatus.st_0-15", "title": "modbus-struct\\DevStatus.st", "text": "{attribute 'qualified_only'}\n{attribute 'strict'}\nTYPE DevStatus :\n(\n\tunknown \t:= 0,\n\t\n\truning\t\t:= 1,\n\t\n\textended\t:= 2,\n\t\n\tretracted\t:= 3,\n\t\n\terror\t\t:= 4\n);\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\DevStatus.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 15, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_mdbsRequest.st_0-11", "title": "modbus-struct\\mdbsRequest.st", "text": "TYPE mdbsRequest :\t//所有请求动作指令数据\nSTRUCT\n\tstartAddr\t\t:WORD;\t\t\t\t\t//解析起始地址->10\n\tlength\t\t\t:WORD;\t\t\t\t\t//数据长度/字节->48\n\tdata\t\t\t:ARRAY[10..57] OF WORD;\t//指令数据\t\n\t\n\tarrNew\t\t:ARRAY [1..4,0..15] OF BOOL;\n\tarrLast\t\t:ARRAY [1..4,0..15] OF BOOL;\n\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\mdbsRequest.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 11, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_mdbsResponse.st_0-9", "title": "modbus-struct\\mdbsResponse.st", "text": "TYPE mdbsResponse :\t//所有响应状态数据回送\nSTRUCT\n\tstartAddr\t\t:WORD;\t\t\t\t\t\t\t//解析起始地址->110\n\tlength\t\t\t:WORD;\t\t\t\t\t\t\t//字节长度->210\n\t\n\tdata\t\t\t:ARRAY[110..319] OF WORD;\t\t//位置数据\n\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\mdbsResponse.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 9, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_mdbsStruct.st_0-7", "title": "modbus-struct\\mdbsStruct.st", "text": "TYPE mdbsStruct :\nSTRUCT\n\trequest\t\t:mdbsRequest;\t\t\t\t//请求动作指令\n\tresponse\t:mdbsResponse;\t\t\t//响应动作指令-天地轨所有\t\n\t\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\mdbsStruct.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 7, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_SensorInfo.st_0-12", "title": "modbus-struct\\SensorInfo.st", "text": "TYPE SensorInfo :\nSTRUCT\n\t\n\tposition\t:REAL;\t//实时位移\n\tspeed\t\t:REAL;\t//实时速度\n\t\n\t//记录最大最小位移值\n\tretractVal\t:REAL;\t//缩回到位值\n\textendVal\t:REAL;\t//伸出到位值\n\t\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\SensorInfo.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 12, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_TargetDirect.st_0-11", "title": "modbus-struct\\TargetDirect.st", "text": "{attribute 'qualified_only'}\n{attribute 'strict'}\nTYPE TargetDirect :\n(\n\textend \t:= 1,\t//伸出\n\t\n\tretract := 2,\t//缩回\n\t\n\tstop\t:= 3\t//停止\n);\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\TargetDirect.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 11, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_UIMode.st_0-16", "title": "modbus-struct\\UIMode.st", "text": "TYPE UIMode :\nSTRUCT\n\tmanualButtonSet\t\t\t:BOOL;\t\t//手动复位按钮模式\n\tusePID\t\t\t\t\t:BOOL;\t\t//使用pid\n\tautoEnable\t\t\t\t:BOOL;\t\t//自动使能\n\tmanualPercentSet\t\t:BOOL;\t\t//手动设定比例量\n\tmanualSetPid\t\t\t:BOOL;\t\t//手动调节pid参数，可通过pid测试界面设定目标位移值\n\t\n\tsyncExt\t\t\t\t\t:BOOL;\t\t//同步伸\n\tsyncRct\t\t\t\t\t:BOOL;\t\t//同步缩\n\t\n\thydPowerOn\t\t\t\t:BOOL;\t\t//液压站开启 modbus 使用\n\thydPowerOff\t\t\t\t:BOOL;\t\t//液压站关闭 modbus 使用\n\thydPowerReset\t\t\t:BOOL;\t\t\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\UIMode.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 16, "window_size": 50, "slice_size": 5}]}
{"_id": "modbus_struct_UIUnit.st_0-24", "title": "modbus-struct\\UIUnit.st", "text": "TYPE UIUnit :\nSTRUCT\n\t//cmd\n\tpwrEnable\t\t\t:BOOL;\t\t//比例阀使能   power-enable\n\tpwrPercent\t\t\t:REAL;\t\t//比例阀百分比 power-percent 0-100\n\t\n\t//button\n\tbtnExtend\t\t\t:BOOL;\n\tbtnRetract\t\t\t:BOOL;\n\tbtnStop\t\t\t\t:BOOL;\n\tbtnLast\t\t\t\t:TargetDirect;\t//上次动作方向\n\t\n\t//info display\n\tname\t\t\t\t:STRING;\t//挡板名\n\twname\t\t\t\t:WSTRING;\t//山河命名\n\thzname\t\t\t\t:WSTRING;\t//hua zhong ming ming\n\tpostion\t\t\t\t:REAL;\t\t//位移值\n\tspeed\t\t\t\t:REAL;\n\textendPercent\t\t:REAL;\t\t//伸出百分比 extend-percent\n\t\n\t\n\t\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["modbus", "struct\\UIUnit.st"], "repo": "modbus", "line_no": 0, "start_line_no": 0, "end_line_no": 24, "window_size": 50, "slice_size": 5}]}
