{"_id": "交通信号灯控制实训_FUN_FB_CountdownTimer.st_0-20", "title": "交通信号灯控制实训-FUN\\FB_CountdownTimer.st", "text": "FUNCTION_BLOCK FB_CountdownTimer\nVAR_INPUT\n\ttElapsedTime\t:\tTIME;\t\t//已经过的时间（定时器的ET）\n\ttTotalTime\t\t:\tTIME;\t\t//总时间（定时器的PT）\nEND_VAR\nVAR_OUTPUT\n\tnRemainingSeconds\t:\tUINT;\t//剩余秒数\nEND_VAR\nVAR\n\tnTotalSeconds\t\t:\tUINT;\t//总秒数\n\tnElapsedSeconds\t\t:\tUINT;\t//已过秒数\nEND_VAR\n\n// 将TIME转换为秒\nnTotalSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_DWORD(tTotalTime) / 1000.0));\nnElapsedSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_UINT(tElapsedTime) / 1000.0));\n\n// 计算剩余秒数\nnRemainingSeconds := nTotalSeconds - nElapsedSeconds;\n\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "FUN\\FB_CountdownTimer.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 20, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_FUN_F_SecondsToTime.st_0-9", "title": "交通信号灯控制实训-FUN\\F_SecondsToTime.st", "text": "FUNCTION F_SecondsToTime : TIME\nVAR_INPUT\n\tdwSeconds\t:\tDWORD;\t\t//输入的秒数\nEND_VAR\n\n// 将秒数（DWORD）转换为TIME类型\n// 秒数乘以1000得到毫秒\nF_SecondsToTime := DWORD_TO_TIME(dwSeconds * 1000);\n\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "FUN\\F_SecondsToTime.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 9, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_FUN_F_TimeToSeconds.st_0-9", "title": "交通信号灯控制实训-FUN\\F_TimeToSeconds.st", "text": "FUNCTION F_TimeToSeconds : DWORD\nVAR_INPUT\n\ttTime\t:\tTIME;\t\t//输入的时间\nEND_VAR\n\n// 将TIME类型转换为秒数（DWORD）\n// TIME内部是毫秒，除以1000得到秒数\nF_TimeToSeconds := DINT_TO_DWORD(TRUNC(TIME_TO_DWORD(tTime) / 1000.0));\n\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "FUN\\F_TimeToSeconds.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 9, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_global_GVL_Input.st_0-3", "title": "交通信号灯控制实训-global\\GVL_Input.st", "text": "VAR_GLOBAL\n\tIReset\t:\tBOOL;\nEND_VAR", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "global\\GVL_Input.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 3, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_global_GVL_Memory.st_0-6", "title": "交通信号灯控制实训-global\\GVL_Memory.st", "text": "VAR_GLOBAL\n\tMCountBackwards\t:\tUINT;//剩余时间\n\tMGreenTimeOn\t:\tTIME := T#30S;//绿灯亮的时间\n\tMGreenTimeFlash\t:\tTIME := T#3S;//绿灯闪的时间\n\tMYellowTimeOn\t:\tTIME := T#3S;//黄灯亮的时间\nEND_VAR", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "global\\GVL_Memory.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 6, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_global_GVL_Output.st_0-8", "title": "交通信号灯控制实训-global\\GVL_Output.st", "text": "VAR_GLOBAL\n\tQSouthNorthGreen\t:\tBOOL;//与视图中南北方向的绿灯相关联\n\tQSouthNorthYellow\t:\tBOOL;\n\tQSouthNorthRed\t:\tBOOL;\n\tQEastWestGreen\t:\tBOOL;\n\tQEastWestYellow\t:\tBOOL;\n\tQEastWestRed\t:\tBOOL;\nEND_VAR", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "global\\GVL_Output.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 8, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_0-25", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_0-30", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_0-35", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_0-40", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_0-45", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_0-50", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_5-55", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//倒计时计算功能块\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_10-60", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "fbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_15-65", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_20-70", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_25-75", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t0:\n\t\tQSouthNorthGreen := TRUE;//南北绿灯亮\n\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\tQEastWestRed := TRUE;//东西方向红灯亮\n\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_30-80", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\tQSouthNorthRed := FALSE;//南北方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭，准备开始闪\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_35-85", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_40-90", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_45-95", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//计算倒计时\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_50-100", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//东西方向黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 50, "start_line_no": 50, "end_line_no": 100, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_55-105", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//南北黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//东西方向黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\t\tnState := 0;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 55, "start_line_no": 55, "end_line_no": 105, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_60-110", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//南北黄灯灭\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//东西方向黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\n", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 60, "start_line_no": 60, "end_line_no": 110, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_PLC_PRG.st_65-111", "title": "交通信号灯控制实训-PRG\\PLC_PRG.st", "text": "\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//南北绿灯灭\n\t\tQSouthNorthRed := TRUE;//南北方向红灯亮\n\t\tQSouthNorthYellow := FALSE;//南北方向黄灯灭\n\t\tQEastWestGreen := TRUE;////东西方向绿灯亮\n\t\tQEastWestRed := FALSE;//东西方向红灯灭\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//定时，定时到后，绿灯开始闪\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯开始闪\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//定时，定时到后，绿灯灭，黄灯亮\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//定时0.5s，绿灯闪烁\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//定时0.5s，绿灯闪烁\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//东西方向绿灯灭\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//东西方向黄灯亮\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//定时，定时到后，黄灯灭\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//东西方向黄灯灭\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//计算倒计时\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\nMCountBackwards := temp;", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\PLC_PRG.st"], "repo": "交通信号灯控制实训", "line_no": 65, "start_line_no": 65, "end_line_no": 111, "window_size": 50, "slice_size": 5}]}
{"_id": "交通信号灯控制实训_PRG_TrafficLightHMI.st_0-15", "title": "交通信号灯控制实训-PRG\\TrafficLightHMI.st", "text": "PROGRAM TrafficLigthHMI\nVAR\n\tgreenTimeOn\t\t:\tDWORD := F_TimeToSeconds(MGreenTimeOn);\t\t//绿灯亮的时间（秒）\n\tgreenTimeFlash\t:\tDWORD := F_TimeToSeconds(MGreenTimeFlash);\t//绿灯闪的时间（秒）\n\tyellowTimeOn\t:\tDWORD := F_TimeToSeconds(MYellowTimeOn);\t//黄灯亮的时间（秒）\n\tbSave\t:\tBOOL;\n\tfbSaveRtrig\t:\tR_TRIG;\nEND_VAR\n\nfbSaveRtrig(CLK := bSave);\nIF fbSaveRtrig.Q THEN\n\tMGreenTimeOn := F_SecondsToTime(greenTimeOn);\n\tMGreenTimeFlash := F_SecondsToTime(greenTimeFlash);\n\tMYellowTimeOn := F_SecondsToTime(yellowTimeOn);\nEND_IF", "metadata": [{"fpath_tuple": ["交通信号灯控制实训", "PRG\\TrafficLightHMI.st"], "repo": "交通信号灯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 15, "window_size": 50, "slice_size": 5}]}
