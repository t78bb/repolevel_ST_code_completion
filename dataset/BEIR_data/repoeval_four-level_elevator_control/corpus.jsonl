{"_id": "四层电梯控制实训_FUN_F_CheckJobInDirection.st_0-25", "title": "四层电梯控制实训-FUN\\F_CheckJobInDirection.st", "text": "FUNCTION F_CheckJobInDirection : BOOL\nVAR_INPUT\n\tnStartFloor\t\t:\tUSINT;\t\t//起始楼层\n\tnEndFloor\t\t:\tUSINT;\t\t//结束楼层\n\tbIncreasing\t\t:\tBOOL;\t\t//TRUE=向上检查（递增），FALSE=向下检查（递减）\nEND_VAR\nVAR\n\ti\t:\tUSINT;\nEND_VAR\n\n// 检查从起始楼层到结束楼层之间是否有电梯需要停靠的楼层\nF_CheckJobInDirection := FALSE;\n\nIF bIncreasing THEN\n\t// 向上检查（从低楼层到高楼层）\n\tFOR i := nStartFloor TO nEndFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nELSE\n\t// 向下检查（从高楼层到低楼层）\n\tFOR i := nEndFloor TO nStartFloor BY -1 DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "FUN\\F_CheckJobInDirection.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_FUN_F_CheckJobInDirection.st_0-30", "title": "四层电梯控制实训-FUN\\F_CheckJobInDirection.st", "text": "FUNCTION F_CheckJobInDirection : BOOL\nVAR_INPUT\n\tnStartFloor\t\t:\tUSINT;\t\t//起始楼层\n\tnEndFloor\t\t:\tUSINT;\t\t//结束楼层\n\tbIncreasing\t\t:\tBOOL;\t\t//TRUE=向上检查（递增），FALSE=向下检查（递减）\nEND_VAR\nVAR\n\ti\t:\tUSINT;\nEND_VAR\n\n// 检查从起始楼层到结束楼层之间是否有电梯需要停靠的楼层\nF_CheckJobInDirection := FALSE;\n\nIF bIncreasing THEN\n\t// 向上检查（从低楼层到高楼层）\n\tFOR i := nStartFloor TO nEndFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nELSE\n\t// 向下检查（从高楼层到低楼层）\n\tFOR i := nEndFloor TO nStartFloor BY -1 DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "FUN\\F_CheckJobInDirection.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_FUN_F_CheckJobInDirection.st_0-31", "title": "四层电梯控制实训-FUN\\F_CheckJobInDirection.st", "text": "FUNCTION F_CheckJobInDirection : BOOL\nVAR_INPUT\n\tnStartFloor\t\t:\tUSINT;\t\t//起始楼层\n\tnEndFloor\t\t:\tUSINT;\t\t//结束楼层\n\tbIncreasing\t\t:\tBOOL;\t\t//TRUE=向上检查（递增），FALSE=向下检查（递减）\nEND_VAR\nVAR\n\ti\t:\tUSINT;\nEND_VAR\n\n// 检查从起始楼层到结束楼层之间是否有电梯需要停靠的楼层\nF_CheckJobInDirection := FALSE;\n\nIF bIncreasing THEN\n\t// 向上检查（从低楼层到高楼层）\n\tFOR i := nStartFloor TO nEndFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nELSE\n\t// 向下检查（从高楼层到低楼层）\n\tFOR i := nEndFloor TO nStartFloor BY -1 DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "FUN\\F_CheckJobInDirection.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 0, "end_line_no": 31, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_FUN_F_ClearFloorStop.st_0-25", "title": "四层电梯控制实训-FUN\\F_ClearFloorStop.st", "text": "FUNCTION F_ClearFloorStop\nVAR_INPUT\n\tnFloor\t\t\t:\tUSINT;\t\t//楼层号\n\tbClearUpStop\t:\tBOOL;\t\t//是否清除上升停靠标志\n\tbClearDownStop\t:\tBOOL;\t\t//是否清除下降停靠标志\n\tbClearStopFloor\t:\tBOOL;\t\t//是否清除楼层停靠标志\nEND_VAR\n\n// 清除楼层停靠标志\nIF bClearUpStop AND (nFloor <= MaxNumFloor - 1) THEN\n\tTar_Dir.IsUpStop[nFloor] := FALSE;\n\tQFloorUpLed[nFloor] := FALSE;\nEND_IF\n\nIF bClearDownStop AND (nFloor >= 2) THEN\n\tTar_Dir.IsDownStop[nFloor] := FALSE;\n\tQFloorDownLed[nFloor] := FALSE;\nEND_IF\n\nIF bClearStopFloor THEN\n\tTar_Dir.IsStopFloor[nFloor] := FALSE;\nEND_IF\n\n// 清除电梯内按钮LED\nIF bClearStopFloor THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "FUN\\F_ClearFloorStop.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_FUN_F_ClearFloorStop.st_0-28", "title": "四层电梯控制实训-FUN\\F_ClearFloorStop.st", "text": "FUNCTION F_ClearFloorStop\nVAR_INPUT\n\tnFloor\t\t\t:\tUSINT;\t\t//楼层号\n\tbClearUpStop\t:\tBOOL;\t\t//是否清除上升停靠标志\n\tbClearDownStop\t:\tBOOL;\t\t//是否清除下降停靠标志\n\tbClearStopFloor\t:\tBOOL;\t\t//是否清除楼层停靠标志\nEND_VAR\n\n// 清除楼层停靠标志\nIF bClearUpStop AND (nFloor <= MaxNumFloor - 1) THEN\n\tTar_Dir.IsUpStop[nFloor] := FALSE;\n\tQFloorUpLed[nFloor] := FALSE;\nEND_IF\n\nIF bClearDownStop AND (nFloor >= 2) THEN\n\tTar_Dir.IsDownStop[nFloor] := FALSE;\n\tQFloorDownLed[nFloor] := FALSE;\nEND_IF\n\nIF bClearStopFloor THEN\n\tTar_Dir.IsStopFloor[nFloor] := FALSE;\nEND_IF\n\n// 清除电梯内按钮LED\nIF bClearStopFloor THEN\n\tQGoFloorLed[nFloor] := FALSE;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "FUN\\F_ClearFloorStop.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 0, "end_line_no": 28, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_FUN_F_SetElevatorDirection.st_0-18", "title": "四层电梯控制实训-FUN\\F_SetElevatorDirection.st", "text": "FUNCTION F_SetElevatorDirection\nVAR_INPUT\n\tnCurrentFloor\t:\tUSINT;\t\t//当前楼层\n\tnTargetFloor\t:\tUSINT;\t\t//目标楼层\nEND_VAR\n\n// 根据当前楼层和目标楼层设定电梯运行方向\nIF nTargetFloor > nCurrentFloor THEN\n\t// 目标楼层高于当前楼层，电梯上升\n\tTar_Dir.IsPositive := TRUE;\n\tTar_Dir.IsNegative := FALSE;\nELSIF nTargetFloor < nCurrentFloor THEN\n\t// 目标楼层低于当前楼层，电梯下降\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\nEND_IF\n// 如果目标楼层等于当前楼层，不改变方向\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "FUN\\F_SetElevatorDirection.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 18, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_global_GVL_Input.st_0-16", "title": "四层电梯控制实训-global\\GVL_Input.st", "text": "VAR_GLOBAL\n\tIGoFloor\t:\tARRAY[1..MaxNumFloor] OF BOOL;  //电梯里面\n\tICallHelp\t:\tBOOL;\n\tIClose\t\t:\tBOOL;\n\tIOpen\t\t:\tBOOL;\n\tIIsClose\t:\tBOOL;\n\tIIsOpen\t\t:\tBOOL;\n\t\n\tIIsFloor\t:\tARRAY[1..MaxNumFloor] OF BOOL := [TRUE];//电梯停在一层\n\t\n\tIFloorUp\t:\tARRAY[1..MaxNumFloor - 1] OF BOOL; //电梯外面\n\tIFloorDown\t:\tARRAY[2..MaxNumFloor] OF BOOL;\n\n\tIReset\t\t:\tBOOL;\n\tIRespondHelp\t:\tBOOL;\nEND_VAR", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "global\\GVL_Input.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 16, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_global_GVL_Memory.st_0-6", "title": "四层电梯控制实训-global\\GVL_Memory.st", "text": "VAR_GLOBAL CONSTANT\n\tMaxNumFloor\t:\tUSINT := 4;\nEND_VAR\nVAR_GLOBAL\n\tTar_Dir\t:\tTarget_Direction;\nEND_VAR", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "global\\GVL_Memory.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 6, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_global_GVL_Output.st_0-12", "title": "四层电梯控制实训-global\\GVL_Output.st", "text": "VAR_GLOBAL\n\tQMotorPositiveRun\t:\tBOOL;    //电梯处于向上运动状态\n\tQMotorNegativeRun\t:\tBOOL; //电梯处于向下运动状态\n\tQClose\t:\tBOOL := TRUE;    //电梯是处于关闭状态\n\tQOpen\t:\tBOOL;               //电梯是处于打开状态\n\tQHelpBeer\t:\tBOOL;        //报警灯是亮还是灭\n\t\n\tQGoFloorLed\t:\tARRAY[1..MaxNumFloor] OF BOOL;   //电梯内“1/2/3/4”按钮，为TRUE时，按钮亮\n\n\tQFloorUpLed\t:\tARRAY[1..MaxNumFloor - 1] OF BOOL;   //楼层中3个“上”按钮，为TRUE时，按钮亮\n\tQFloorDownLed\t:\tARRAY[2..MaxNumFloor] OF BOOL;   //楼层中3个“下”按钮，为TRUE时，按钮亮\nEND_VAR", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "global\\GVL_Output.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 12, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_0-25", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "PROGRAM HMI\nVAR\n\tfbTon3s\t:\tStandard.TON;  //从电梯离开当前层起，定时3S，到达下一层\n\tfbTonOpen\t:\tStandard.TON; //电梯门1s开到位\n\tfbTonClose\t:\tStandard.TON;//电梯门1s关到位\n\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_0-30", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "PROGRAM HMI\nVAR\n\tfbTon3s\t:\tStandard.TON;  //从电梯离开当前层起，定时3S，到达下一层\n\tfbTonOpen\t:\tStandard.TON; //电梯门1s开到位\n\tfbTonClose\t:\tStandard.TON;//电梯门1s关到位\n\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_0-35", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "PROGRAM HMI\nVAR\n\tfbTon3s\t:\tStandard.TON;  //从电梯离开当前层起，定时3S，到达下一层\n\tfbTonOpen\t:\tStandard.TON; //电梯门1s开到位\n\tfbTonClose\t:\tStandard.TON;//电梯门1s关到位\n\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_0-40", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "PROGRAM HMI\nVAR\n\tfbTon3s\t:\tStandard.TON;  //从电梯离开当前层起，定时3S，到达下一层\n\tfbTonOpen\t:\tStandard.TON; //电梯门1s开到位\n\tfbTonClose\t:\tStandard.TON;//电梯门1s关到位\n\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_0-45", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "PROGRAM HMI\nVAR\n\tfbTon3s\t:\tStandard.TON;  //从电梯离开当前层起，定时3S，到达下一层\n\tfbTonOpen\t:\tStandard.TON; //电梯门1s开到位\n\tfbTonClose\t:\tStandard.TON;//电梯门1s关到位\n\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_0-50", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "PROGRAM HMI\nVAR\n\tfbTon3s\t:\tStandard.TON;  //从电梯离开当前层起，定时3S，到达下一层\n\tfbTonOpen\t:\tStandard.TON; //电梯门1s开到位\n\tfbTonClose\t:\tStandard.TON;//电梯门1s关到位\n\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_5-55", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tfbTon500ms\t:\tStandard.TON;//电梯关门后500ms电梯运动\n\tfbIsFloorFtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.F_TRIG;\n\ti\t:\tUSINT;\n\tbTiming\t:\tBOOL;\n\tbTimingOpen\t:\tBOOL;\n\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_10-60", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tbTimingClose\t:\tBOOL;\n\tisInWhichFloor\t:\tUSINT;//电梯现在处在哪一层\n\t\n\tbhideLiftUp\t:\tBOOL;// 隐藏上升箭头\n\tbHideLiftDown\t:\tBOOL;  // 隐藏下降箭头\n\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_15-65", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tbHideOpen\t:\tBOOL;  // 隐藏电梯门开箭头\n\tbHideClose\t:\tBOOL; // 隐藏电梯门关箭头\n\t\n\tfbMotorNegativeRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成下降时触发的上升沿\n\tfbMotorPositiveRunRtrig\t:\tStandard.R_TRIG;//电梯状态变成上升时触发的上升沿\n\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_20-70", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\t\n\tfbOpenRtrig\t:\tStandard.R_TRIG;  //电梯门状态变成开时触发的上升沿\n\tfbCloseRtrig\t:\tStandard.R_TRIG;//电梯门状态变成关时触发的上升沿\n\t\n\tfbIsFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;//电梯到达某层时触发当前层的上升沿\n\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_25-75", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tbIsStop\t:\tBOOL;\n\tbNotStop\t:\tBOOL;\nEND_VAR\n\n//判断什么时候显示电梯向上或者向下运动\nbhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_30-80", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "bhideLiftUp := QMotorNegativeRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向下运动或停止时隐藏上升箭头\nbhideLiftDown := QMotorPositiveRun OR (NOT QMotorNegativeRun AND NOT QMotorPositiveRun);///向上运动或停止隐藏下降箭头\n\n//判断什么时候复位IIsFloor[i]                      ///判断若在某层停下，则isstop 否则notStop\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_35-85", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);   //如电梯到达i层\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN  //若电梯没有向上运动也没有向下运动，则电梯在i层停下，bIsStop为TRUE\n\t\t\tbIsStop := TRUE;\n\t\t\tEXIT;\n\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_40-90", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\t\tEND_IF\n\t\tIF NOT bIsStop THEN\n\t\t\tbNotStop := TRUE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n//电梯门1s开、关到位\nfbOpenRtrig(CLK := QOpen);\nfbCloseRtrig(CLK := QClose);\nIF fbOpenRtrig.Q THEN\n\tbTimingOpen := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_45-95", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "END_FOR\n\nfbTon500ms(IN := bNotStop,PT := T#500MS);            //电梯关门后500ms电梯运动\nIF fbTon500ms.Q THEN\n\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;        \n\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n//电梯门1s开、关到位\nfbOpenRtrig(CLK := QOpen);\nfbCloseRtrig(CLK := QClose);\nIF fbOpenRtrig.Q THEN\n\tbTimingOpen := TRUE;\n\tbTimingClose := FALSE;\n\tIIsClose := FALSE;\nEND_IF\nIF fbCloseRtrig.Q THEN\n\tbTimingClose := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_50-100", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tbNotStop := FALSE;                               \nEND_IF\n\nIF bIsStop THEN                      ///停止状态时若有向上或向下运动请求时,则该层的“电梯到位”置为FALSE,IsStop为FALSE\n\tfbMotorNegativeRunRtrig(CLK := QMotorNegativeRun);\n\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n//电梯门1s开、关到位\nfbOpenRtrig(CLK := QOpen);\nfbCloseRtrig(CLK := QClose);\nIF fbOpenRtrig.Q THEN\n\tbTimingOpen := TRUE;\n\tbTimingClose := FALSE;\n\tIIsClose := FALSE;\nEND_IF\nIF fbCloseRtrig.Q THEN\n\tbTimingClose := TRUE;\n\tbTimingOpen := FALSE;\n\tIIsOpen := FALSE;\nEND_IF\n\nfbTonOpen(IN := bTimingOpen,PT := T#1S);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 50, "start_line_no": 50, "end_line_no": 100, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_55-105", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "\tfbMotorPositiveRunRtrig(CLK := QMotorPositiveRun);\n\tIF fbMotorNegativeRunRtrig.Q OR fbMotorPositiveRunRtrig.Q THEN\n\t\tIIsFloor[Tar_Dir.IsInWhichFloor] := FALSE;\n\t\tbIsStop := FALSE;                          \n\tEND_IF\nEND_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n//电梯门1s开、关到位\nfbOpenRtrig(CLK := QOpen);\nfbCloseRtrig(CLK := QClose);\nIF fbOpenRtrig.Q THEN\n\tbTimingOpen := TRUE;\n\tbTimingClose := FALSE;\n\tIIsClose := FALSE;\nEND_IF\nIF fbCloseRtrig.Q THEN\n\tbTimingClose := TRUE;\n\tbTimingOpen := FALSE;\n\tIIsOpen := FALSE;\nEND_IF\n\nfbTonOpen(IN := bTimingOpen,PT := T#1S);\nIF fbTonOpen.Q THEN\n\tbTimingOpen := FALSE;\n\tIIsOpen :=TRUE;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 55, "start_line_no": 55, "end_line_no": 105, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_60-110", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "END_IF\n\n\n//从电梯离开当前层起，定时3S，到达下一层\n//判断什么时候置位IIsFloor[i]\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n//电梯门1s开、关到位\nfbOpenRtrig(CLK := QOpen);\nfbCloseRtrig(CLK := QClose);\nIF fbOpenRtrig.Q THEN\n\tbTimingOpen := TRUE;\n\tbTimingClose := FALSE;\n\tIIsClose := FALSE;\nEND_IF\nIF fbCloseRtrig.Q THEN\n\tbTimingClose := TRUE;\n\tbTimingOpen := FALSE;\n\tIIsOpen := FALSE;\nEND_IF\n\nfbTonOpen(IN := bTimingOpen,PT := T#1S);\nIF fbTonOpen.Q THEN\n\tbTimingOpen := FALSE;\n\tIIsOpen :=TRUE;\nEND_IF\n\nfbTonClose(IN := bTimingClose,PT := T#1S);\nIF fbTonClose.Q THEN\n\tbTimingClose := FALSE;\n\tIIsClose :=TRUE;\nEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 60, "start_line_no": 60, "end_line_no": 110, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_HMI.st_65-113", "title": "四层电梯控制实训-PRG\\HMI.st", "text": "FOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorFtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorFtrig[i].Q THEN\n\t\tbTiming := TRUE;\n\t\tisInWhichFloor := i;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\nfbTon3s(IN := bTiming,PT := T#3S);\nIF fbTon3s.Q THEN\n\tbTiming := FALSE;\n\tIF QMotorPositiveRun THEN\n\t\tIIsFloor[isInWhichFloor + 1] := TRUE;\n\tEND_IF\n\tIF QMotorNegativeRun THEN\n\t\tIIsFloor[isInWhichFloor - 1] := TRUE;\n\tEND_IF\nEND_IF\n\n//电梯门1s开、关到位\nfbOpenRtrig(CLK := QOpen);\nfbCloseRtrig(CLK := QClose);\nIF fbOpenRtrig.Q THEN\n\tbTimingOpen := TRUE;\n\tbTimingClose := FALSE;\n\tIIsClose := FALSE;\nEND_IF\nIF fbCloseRtrig.Q THEN\n\tbTimingClose := TRUE;\n\tbTimingOpen := FALSE;\n\tIIsOpen := FALSE;\nEND_IF\n\nfbTonOpen(IN := bTimingOpen,PT := T#1S);\nIF fbTonOpen.Q THEN\n\tbTimingOpen := FALSE;\n\tIIsOpen :=TRUE;\nEND_IF\n\nfbTonClose(IN := bTimingClose,PT := T#1S);\nIF fbTonClose.Q THEN\n\tbTimingClose := FALSE;\n\tIIsClose :=TRUE;\nEND_IF\n\nbHideOpen := bTimingClose OR (NOT bTimingClose AND NOT bTimingOpen);         //隐藏电梯开门箭头\nbHideClose := bTimingOpen OR (NOT bTimingClose AND NOT bTimingOpen);           //隐藏电梯关门箭头", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\HMI.st"], "repo": "四层电梯控制实训", "line_no": 65, "start_line_no": 65, "end_line_no": 113, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_0-25", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\ti\t:\tUSINT;\n\tj\t:\tUSINT;\n\t\n\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_0-30", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\ti\t:\tUSINT;\n\tj\t:\tUSINT;\n\t\n\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_0-35", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\ti\t:\tUSINT;\n\tj\t:\tUSINT;\n\t\n\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_0-40", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\ti\t:\tUSINT;\n\tj\t:\tUSINT;\n\t\n\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_0-45", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\ti\t:\tUSINT;\n\tj\t:\tUSINT;\n\t\n\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_0-50", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\ti\t:\tUSINT;\n\tj\t:\tUSINT;\n\t\n\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_5-55", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tfbCloseRtrig\t:\tStandard.R_TRIG;  //电梯里Colse按钮的上升触发沿\n\tfbOpenRtrig\t\t:\tStandard.R_TRIG;  //电梯里Open按钮的上升触发沿\n\tfbHelpRtrig\t:\tStandard.R_TRIG;  //电梯里Alarm按钮的上升触发沿\n\tfbGoFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯里1/2/3/4按钮的上升触发沿\n\tfbRespondHelpRtrig\t:\tStandard.R_TRIG; // 电梯外面应答报警按钮的上升触发沿\n\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_10-60", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tfbResetRtrig\t:\tStandard.R_TRIG; // 电梯外面复位按钮的上升触发沿\n\tfbFloorUpRtrig\t\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG; // 电梯外面上按钮的上升触发沿\n\tfbFloorDownRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG; // 电梯外面下按钮的上升触发沿\n\tfbIsFloorRtrig\t\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  // 电梯是否到位\n\tfbIsStopFloorRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;  //电梯要在哪层停止的上升触发沿\n\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_15-65", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tbStopping\t:\tBOOL;  //处在停止状态\n\tbWaitClose\t:\tBOOL;  //等待关闭\n\tfbTon\t:\tStandard.TON;\n\tfbTonOpen\t:\tStandard.TON;\n\tbUpHasJob\t:\tBOOL;  //有要向上运动的工作\n\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_20-70", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tbDownHasJob\t:\tBOOL; //有要向下运动的工作\n\tbTrigArrive\t:\tBOOL;// 运动到该层的到达\n\tbArrive\t:\tBOOL;//电梯本来就停在该层\n\t\n\tfbIsOpenRtrig\t:\tStandard.R_TRIG;  //是否处于开的状态\n\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_25-75", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tfbIsCloseRtrig\t:\tStandard.R_TRIG;   //是否处于关的状态\nEND_VAR\n\n//检测是否按下求救\nfbHelpRtrig(CLK := ICallHelp);\nIF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_30-80", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "IF fbHelpRtrig.Q THEN\n\t//按下求救开关，报警铃响\n\tQHelpBeer := TRUE;\nEND_IF\n\n//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_35-85", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "//检测是否应答求救\nfbRespondHelpRtrig(CLK := IRespondHelp);\nIF fbRespondHelpRtrig.Q THEN\n\tQHelpBeer := FALSE;//已经应答了求救，报警声停\nEND_IF\n\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_40-90", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\n//检测是否按下复位按钮\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\t//按下复位，忽略之前及后来的指令，电梯停到1楼\n\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_45-95", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tTar_Dir.IsBlock := TRUE;\n\tFOR i := 1 TO MaxNumFloor DO\n\t\tTar_Dir.IsStopFloor[i] := FALSE;\n\t\tQGoFloorLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_50-100", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tFOR i := 1 TO MaxNumFloor - 1 DO\n\t\tTar_Dir.IsUpStop[i] := FALSE;\n\t\tQFloorUpLed[i] := FALSE;\n\tEND_FOR\n\tFOR i := 2 TO MaxNumFloor DO\n\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 50, "start_line_no": 50, "end_line_no": 100, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_55-105", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\tTar_Dir.IsDownStop[i] := FALSE;\n\t\tQFloorDownLed[i] := FALSE;\n\tEND_FOR\n\tTar_Dir.IsStopFloor[1] := TRUE;\n\tTar_Dir.IsUpStop[1] := TRUE;\n\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 55, "start_line_no": 55, "end_line_no": 105, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_60-110", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\n\tQMotorPositiveRun := FALSE;\n\tQMotorNegativeRun := TRUE;\nEND_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 60, "start_line_no": 60, "end_line_no": 110, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_65-115", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "END_IF\n\n//判断电梯目前处于第几层\nFOR i := 1 TO MaxNumFloor DO\n\tfbIsFloorRtrig[i](CLK := IIsFloor[i]);\n\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 65, "start_line_no": 65, "end_line_no": 115, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_70-120", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tIF fbIsFloorRtrig[i].Q THEN\n\t\tTar_Dir.IsInWhichFloor := i;//保存当前电梯处于第几层\n\tEND_IF\nEND_FOR\n\n//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 70, "start_line_no": 70, "end_line_no": 120, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_75-125", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "//电梯内的开关按钮操作\nIF (NOT QMotorNegativeRun) AND (NOT QMotorPositiveRun) THEN\n\t//电梯停止在楼层，可以在电梯里手动控制电梯开关\n\tfbCloseRtrig(CLK := IClose);\n\tfbOpenRtrig(CLK := IOpen);\n\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 75, "start_line_no": 75, "end_line_no": 125, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_80-130", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tIF fbCloseRtrig.Q THEN\n\t\tQClose := TRUE;//关门\n\t\tQOpen := FALSE;\n\tEND_IF\n\tIF fbOpenRtrig.Q THEN\n\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 80, "start_line_no": 80, "end_line_no": 130, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_85-135", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\tQOpen := TRUE;//开门\n\t\tQClose := FALSE;\n\tEND_IF\nEND_IF\n\n//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 85, "start_line_no": 85, "end_line_no": 135, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_90-140", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "//在电梯里选择目标的楼层，不可取消选择                                  ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor DO  \n\tfbGoFloorRtrig[i](CLK := IGoFloor[i]);\n\tIF fbGoFloorRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQGoFloorLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 90, "start_line_no": 90, "end_line_no": 140, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_95-145", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tEND_IF\nEND_FOR\n\n//各楼层电梯外面选择目标楼层，不可取消                            ///哪层被按下了哪层亮\nFOR i := 1 TO MaxNumFloor - 1 DO //1、2、3楼的上升按钮\n\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 95, "start_line_no": 95, "end_line_no": 145, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_100-150", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tfbFloorUpRtrig[i](CLK := IFloorUp[i]);\n\tIF fbFloorUpRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorUpLed[i] := TRUE;\n\tEND_IF\nEND_FOR\nFOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 100, "start_line_no": 100, "end_line_no": 150, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_105-155", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "FOR i := 2 TO MaxNumFloor DO //2、3、4楼的下降按钮\n\tfbFloorDownRtrig[i](CLK := IFloorDown[i]);\n\tIF fbFloorDownRtrig[i].Q AND NOT Tar_Dir.IsBlock THEN\n\t\tQFloorDownLed[i] := TRUE;\n\tEND_IF\nEND_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 105, "start_line_no": 105, "end_line_no": 155, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_110-160", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "END_FOR\n\nUpdateTarget();      //更新数据结构Target_Direction中的指令状态信息\n\n//由方向和目标楼层决定电梯的动作\nIF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 110, "start_line_no": 110, "end_line_no": 160, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_115-165", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "IF Tar_Dir.IsPositive AND NOT bStopping THEN\n\tFOR i := Tar_Dir.IsInWhichFloor TO MaxNumFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN   //从当前层到最高层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorPositiveRun := TRUE;//电梯上行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 115, "start_line_no": 115, "end_line_no": 165, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_120-170", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\tEND_IF\n\tEND_FOR\nEND_IF\n\nIF Tar_Dir.IsNegative AND not bStopping THEN\n\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 120, "start_line_no": 120, "end_line_no": 170, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_125-175", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tFOR i := 1 TO Tar_Dir.IsInWhichFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN  //从最底层到当前层是否有目标楼层（电梯要停止的楼层）\n\t\t\tQMotorNegativeRun := TRUE;//电梯下行\n\t\t\tEXIT;\n\t\tEND_IF\n\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 125, "start_line_no": 125, "end_line_no": 175, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_130-180", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tEND_FOR\nEND_IF\n\n//根据电梯碰到楼层的到位开关决定电梯的动作\nFOR i := 1 TO MaxNumFloor DO \n\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 130, "start_line_no": 130, "end_line_no": 180, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_135-185", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t//fbIsFloorRtrig1[i](CLK := IIsFloor[i]);\n\tfbIsStopFloorRtrig[i](CLK := Tar_Dir.IsStopFloor[i]);\n\tIF IIsFloor[i] AND fbIsStopFloorRtrig[i].Q THEN         ///电梯本来已经在目标层  电梯本来停在i层而且i层就是目标楼层（电梯要停止的楼层）\n\t\tbArrive := TRUE;\n\tELSE\n\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 135, "start_line_no": 135, "end_line_no": 185, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_140-190", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\tbArrive := FALSE;\n\tEND_IF\n\t\n\tIF fbIsFloorRtrig[i].Q AND Tar_Dir.IsStopFloor[i] THEN ///电梯运动到目标层   i层是目标楼层而且电梯运动到了该层\n\t\tbTrigArrive := TRUE;\n\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 140, "start_line_no": 140, "end_line_no": 190, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_145-195", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\tELSE\n\t\tbTrigArrive := FALSE;\n\tEND_IF\n\t\n\tIF bArrive OR bTrigArrive THEN           /// 若电梯停在了目标层i层，则将要在QGoFloorLed数组中将该层的值置为FALSE\n\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 145, "start_line_no": 145, "end_line_no": 195, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_150-200", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\tIF QGoFloorLed[i] THEN\n\t\t\tQGoFloorLed[i] := FALSE;\n\t\tEND_IF\n\t\tCASE i OF\n\t\t\t1:(* 首层 *)\n\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 150, "start_line_no": 150, "end_line_no": 200, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_155-205", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tIF Tar_Dir.IsUpStop[1] THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 155, "start_line_no": 155, "end_line_no": 205, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_160-210", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\t// 清除首层上升停靠标志\n\t\t\t\t\tF_ClearFloorStop(1, TRUE, FALSE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF Tar_Dir.IsBlock THEN\n\t\t\t\t\tTar_Dir.IsBlock := FALSE;\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 160, "start_line_no": 160, "end_line_no": 210, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_165-215", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tEND_IF\n\t\t\t\t// 检查向上是否有任务\n\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tbDownHasJob := FALSE;\n\t\t\tMaxNumFloor:(* 顶层 *)\n\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 165, "start_line_no": 165, "end_line_no": 215, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_170-220", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tIF Tar_Dir.IsDownStop[MaxNumFloor] THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 170, "start_line_no": 170, "end_line_no": 220, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_175-225", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\t// 清除顶层下降停靠标志\n\t\t\t\t\tF_ClearFloorStop(MaxNumFloor, FALSE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\t// 检查向下是否有任务\n\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 175, "start_line_no": 175, "end_line_no": 225, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_180-230", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tbUpHasJob := FALSE;\n\t\t\tELSE(* 中间层 *)\n\t\t\t\tIF Tar_Dir.IsPositive THEN\n\t\t\t\t\t// 检查向上是否有任务\n\t\t\t\t\tbUpHasJob := F_CheckJobInDirection(i + 1, MaxNumFloor, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 180, "start_line_no": 180, "end_line_no": 230, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_185-235", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsPositive AND Tar_Dir.IsUpStop[i]) OR (Tar_Dir.IsPositive AND (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i])THEN\n\t\t\t\t\tQMotorPositiveRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 185, "start_line_no": 185, "end_line_no": 235, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_190-240", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, NOT Tar_Dir.IsDownStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 190, "start_line_no": 190, "end_line_no": 240, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_195-245", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\tIF (NOT bUpHasJob) AND Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 195, "start_line_no": 195, "end_line_no": 245, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_200-250", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\n\t\t\t\tIF Tar_Dir.IsNegative THEN\n\t\t\t\t\t// 检查向下是否有任务\n\t\t\t\t\tbDownHasJob := F_CheckJobInDirection(1, i - 1, TRUE);\n\t\t\t\tEND_IF\n\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 200, "start_line_no": 200, "end_line_no": 250, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_205-255", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tIF (Tar_Dir.IsNegative AND Tar_Dir.IsDownStop[i]) OR (Tar_Dir.IsNegative AND (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i])THEN\n\t\t\t\t\tQMotorNegativeRun := FALSE;//电梯停止\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 205, "start_line_no": 205, "end_line_no": 255, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_210-260", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\tIF Tar_Dir.IsDownStop[i] THEN\n\t\t\t\t\t\t// 清除下降停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, FALSE, TRUE, NOT Tar_Dir.IsUpStop[i]);\n\t\t\t\t\tEND_IF\n\t\t\t\t\tIF (NOT bDownHasJob) AND Tar_Dir.IsUpStop[i] THEN\n\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\n//门开了5秒后，关门\nfbIsOpenRtrig(CLK := IIsOpen);\nIF fbIsOpenRtrig.Q THEN\n\tbWaitClose := TRUE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 210, "start_line_no": 210, "end_line_no": 260, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_215-265", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\t\t// 清除上升停靠标志\n\t\t\t\t\t\tF_ClearFloorStop(i, TRUE, FALSE, TRUE);\n\t\t\t\t\tEND_IF\n\t\t\t\tEND_IF\n\t\t\t\t\n\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\n//门开了5秒后，关门\nfbIsOpenRtrig(CLK := IIsOpen);\nIF fbIsOpenRtrig.Q THEN\n\tbWaitClose := TRUE;\nEND_IF\n\nfbTonOpen(IN := bWaitClose,PT := T#5S);\nIF fbTonOpen.Q THEN\n\tbWaitClose := FALSE;\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 215, "start_line_no": 215, "end_line_no": 265, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_220-270", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tIF (NOT Tar_Dir.IsNegative AND NOT Tar_Dir.IsPositive) THEN\n\t\t\t\t\tbStopping := TRUE;//电梯停止，等待开门与关门\n\t\t\t\t\tQOpen := TRUE;//开电梯门\n\t\t\t\t\tQClose := FALSE;\n\t\t\t\t\t// 清除所有停靠标志\n\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\n//门开了5秒后，关门\nfbIsOpenRtrig(CLK := IIsOpen);\nIF fbIsOpenRtrig.Q THEN\n\tbWaitClose := TRUE;\nEND_IF\n\nfbTonOpen(IN := bWaitClose,PT := T#5S);\nIF fbTonOpen.Q THEN\n\tbWaitClose := FALSE;\n\tQClose := TRUE;\n\tQOpen := FALSE;\nEND_IF\n\n//电梯门关到位后，停止状态清零，电梯可运动\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 220, "start_line_no": 220, "end_line_no": 270, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_225-275", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\tF_ClearFloorStop(i, TRUE, TRUE, TRUE);\n\t\t\t\tEND_IF\n\t\tEND_CASE\n\t\n\t\tIF Tar_Dir.IsPositive AND bUpHasJob THEN  //当电梯处在上行状态且有向上运动的工作，则电梯状态为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\n//门开了5秒后，关门\nfbIsOpenRtrig(CLK := IIsOpen);\nIF fbIsOpenRtrig.Q THEN\n\tbWaitClose := TRUE;\nEND_IF\n\nfbTonOpen(IN := bWaitClose,PT := T#5S);\nIF fbTonOpen.Q THEN\n\tbWaitClose := FALSE;\n\tQClose := TRUE;\n\tQOpen := FALSE;\nEND_IF\n\n//电梯门关到位后，停止状态清零，电梯可运动\nfbIsCloseRtrig(CLK := IIsClose);\nIF fbIsCloseRtrig.Q THEN\n\tbStopping := FALSE;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 225, "start_line_no": 225, "end_line_no": 275, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_PLC_PRG.st_230-277", "title": "四层电梯控制实训-PRG\\PLC_PRG.st", "text": "\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsPositive AND (NOT bUpHasJob) AND bDownHasJob THEN  //当电梯处在上行状态、没有向上运动的工作，但有下行的工作，则电梯状态置为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND bDownHasJob THEN  //当电梯处在下行状态且有向下运动的工作，则电梯状态为下降\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := TRUE;\n\t\tEND_IF\n\t\tIF Tar_Dir.IsNegative AND (NOT bDownHasJob) AND bUpHasJob THEN //当电梯处在下行状态、没有向下运动的工作，但有上行的工作，则电梯状态置为上升\n\t\t\tTar_Dir.IsPositive := TRUE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\t\t\n\t\tIF bUpHasJob OR bDownHasJob THEN\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tELSE\n\t\t\tTar_Dir.IsFree := TRUE;\n\t\t\tTar_Dir.IsPositive := FALSE;\n\t\t\tTar_Dir.IsNegative := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\n//门开了5秒后，关门\nfbIsOpenRtrig(CLK := IIsOpen);\nIF fbIsOpenRtrig.Q THEN\n\tbWaitClose := TRUE;\nEND_IF\n\nfbTonOpen(IN := bWaitClose,PT := T#5S);\nIF fbTonOpen.Q THEN\n\tbWaitClose := FALSE;\n\tQClose := TRUE;\n\tQOpen := FALSE;\nEND_IF\n\n//电梯门关到位后，停止状态清零，电梯可运动\nfbIsCloseRtrig(CLK := IIsClose);\nIF fbIsCloseRtrig.Q THEN\n\tbStopping := FALSE;\nEND_IF\n\nHMI(); // 设定电梯上升下降时间等以及视图中箭头的隐藏与显示\n\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\PLC_PRG.st"], "repo": "四层电梯控制实训", "line_no": 230, "start_line_no": 230, "end_line_no": 277, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_0-25", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "PROGRAM UpdateTarget\nVAR\n\ti\t:\tUSINT;\n\t//j\t:\tUSINT;\n\tfbGoFloorLedRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;   //视图中“1/2/3/4”按钮触发的上升沿\n\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_0-30", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "PROGRAM UpdateTarget\nVAR\n\ti\t:\tUSINT;\n\t//j\t:\tUSINT;\n\tfbGoFloorLedRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;   //视图中“1/2/3/4”按钮触发的上升沿\n\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_0-35", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "PROGRAM UpdateTarget\nVAR\n\ti\t:\tUSINT;\n\t//j\t:\tUSINT;\n\tfbGoFloorLedRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;   //视图中“1/2/3/4”按钮触发的上升沿\n\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_0-40", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "PROGRAM UpdateTarget\nVAR\n\ti\t:\tUSINT;\n\t//j\t:\tUSINT;\n\tfbGoFloorLedRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;   //视图中“1/2/3/4”按钮触发的上升沿\n\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_0-45", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "PROGRAM UpdateTarget\nVAR\n\ti\t:\tUSINT;\n\t//j\t:\tUSINT;\n\tfbGoFloorLedRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;   //视图中“1/2/3/4”按钮触发的上升沿\n\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n\t\tIF (Tar_Dir.IsStopFloor[i] <> TRUE) THEN\n\t\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tEND_IF\n\t\tIF i >= Tar_Dir.IsInWhichFloor THEN\n\t\t\tIF i < MaxNumFloor THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_0-50", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "PROGRAM UpdateTarget\nVAR\n\ti\t:\tUSINT;\n\t//j\t:\tUSINT;\n\tfbGoFloorLedRtrig\t:\tARRAY[1..MaxNumFloor] OF Standard.R_TRIG;   //视图中“1/2/3/4”按钮触发的上升沿\n\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n\t\tIF (Tar_Dir.IsStopFloor[i] <> TRUE) THEN\n\t\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tEND_IF\n\t\tIF i >= Tar_Dir.IsInWhichFloor THEN\n\t\t\tIF i < MaxNumFloor THEN\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_5-55", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "\tfbFloorUpLedRtrig\t:\tARRAY[1..MaxNumFloor - 1] OF Standard.R_TRIG;  //视图中3个“上”按钮触发的上升沿\n\tfbFloorDownLedRtrig\t:\tARRAY[2..MaxNumFloor] OF Standard.R_TRIG;   //视图中3个“下”按钮触发的上升沿\n\nEND_VAR\n\n//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n\t\tIF (Tar_Dir.IsStopFloor[i] <> TRUE) THEN\n\t\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tEND_IF\n\t\tIF i >= Tar_Dir.IsInWhichFloor THEN\n\t\t\tIF i < MaxNumFloor THEN\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n\t\t\t\t// 设置电梯运行方向（向上）\n\t\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\t\tTar_Dir.IsFree := FALSE;\n\t\t\tEND_IF\n\t\tELSE\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_10-60", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "//由电梯内外决定电梯将要进行的动作\nFOR i := 1 TO MaxNumFloor - 1 DO //第1、2、3楼楼层中（电梯外面）向上的按钮\n\tfbFloorUpLedRtrig[i](CLK := QFloorUpLed[i]);\n\tIF fbFloorUpLedRtrig[i].Q THEN//判断是否有“上”按钮按下\n\t\tTar_Dir.IsStopFloor[i] := TRUE;//之前没有记录，更新\n\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n\t\tIF (Tar_Dir.IsStopFloor[i] <> TRUE) THEN\n\t\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tEND_IF\n\t\tIF i >= Tar_Dir.IsInWhichFloor THEN\n\t\t\tIF i < MaxNumFloor THEN\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n\t\t\t\t// 设置电梯运行方向（向上）\n\t\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\t\tTar_Dir.IsFree := FALSE;\n\t\t\tEND_IF\n\t\tELSE\n\t\t\tIF i > 1 THEN\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_15-65", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "\t\tTar_Dir.IsUpStop[i] := TRUE;//将上升电梯要停的楼层数组中将该层置为TRUE\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n\t\tIF (Tar_Dir.IsStopFloor[i] <> TRUE) THEN\n\t\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tEND_IF\n\t\tIF i >= Tar_Dir.IsInWhichFloor THEN\n\t\t\tIF i < MaxNumFloor THEN\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n\t\t\t\t// 设置电梯运行方向（向上）\n\t\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\t\tTar_Dir.IsFree := FALSE;\n\t\t\tEND_IF\n\t\tELSE\n\t\t\tIF i > 1 THEN\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n\t\t\t\t// 设置电梯运行方向（向下）\n\t\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\t\tTar_Dir.IsFree := FALSE;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "四层电梯控制实训_PRG_UpdateTarget.st_20-68", "title": "四层电梯控制实训-PRG\\UpdateTarget.st", "text": "\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 2 TO MaxNumFloor DO//第2、3、4楼楼层中（电梯外面）向下的按钮\n\tfbFloorDownLedRtrig[i](CLK := QFloorDownLed[i]);\n\tIF fbFloorDownLedRtrig[i].Q THEN\n\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\tIF (Tar_Dir.IsFree = TRUE) THEN\n\t\t\t// 设置电梯运行方向\n\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\tTar_Dir.IsFree := FALSE;\n\t\tEND_IF\n\tEND_IF\nEND_FOR\n\nFOR i := 1 TO MaxNumFloor DO//电梯内的“1、2、3、4”的按钮\n\tfbGoFloorLedRtrig[i](CLK := QGoFloorLed[i]);\n\tIF fbGoFloorLedRtrig[i].Q THEN\n\t\tIF (Tar_Dir.IsStopFloor[i] <> TRUE) THEN\n\t\t\tTar_Dir.IsStopFloor[i] := TRUE;\n\t\tEND_IF\n\t\tIF i >= Tar_Dir.IsInWhichFloor THEN\n\t\t\tIF i < MaxNumFloor THEN\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n\t\t\t\t// 设置电梯运行方向（向上）\n\t\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\t\tTar_Dir.IsFree := FALSE;\n\t\t\tEND_IF\n\t\tELSE\n\t\t\tIF i > 1 THEN\n\t\t\t\tTar_Dir.IsDownStop[i] := TRUE;\n\t\t\tELSE\n\t\t\t\tTar_Dir.IsUpStop[i] := TRUE;\n\t\t\tEND_IF\n\t\t\tIF Tar_Dir.IsFree THEN\n\t\t\t\t// 设置电梯运行方向（向下）\n\t\t\t\tF_SetElevatorDirection(Tar_Dir.IsInWhichFloor, i);\n\t\t\t\tTar_Dir.IsFree := FALSE;\n\t\t\tEND_IF\n\t\tEND_IF\n\tEND_IF\nEND_FOR", "metadata": [{"fpath_tuple": ["四层电梯控制实训", "PRG\\UpdateTarget.st"], "repo": "四层电梯控制实训", "line_no": 20, "start_line_no": 20, "end_line_no": 68, "window_size": 50, "slice_size": 5}]}
