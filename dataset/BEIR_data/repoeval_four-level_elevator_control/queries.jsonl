{"_id": "四层电梯控制实训/0", "text": "FUNCTION F_CheckJobInDirection : BOOL\nVAR_INPUT\n\tnStartFloor\t\t:\tUSINT;\t\t//起始楼层\n\tnEndFloor\t\t:\tUSINT;\t\t//结束楼层\n\tbIncreasing\t\t:\tBOOL;\t\t//TRUE=向上检查（递增），FALSE=向下检查（递减）\nEND_VAR", "metadata": {"task_id": "四层电梯控制实训/0", "ground_truth": "FUNCTION F_CheckJobInDirection : BOOL\nVAR_INPUT\n\tnStartFloor\t\t:\tUSINT;\t\t//起始楼层\n\tnEndFloor\t\t:\tUSINT;\t\t//结束楼层\n\tbIncreasing\t\t:\tBOOL;\t\t//TRUE=向上检查（递增），FALSE=向下检查（递减）\nEND_VAR\nVAR\n\ti\t:\tUSINT;\nEND_VAR\n\n// 检查从起始楼层到结束楼层之间是否有电梯需要停靠的楼层\nF_CheckJobInDirection := FALSE;\n\nIF bIncreasing THEN\n\t// 向上检查（从低楼层到高楼层）\n\tFOR i := nStartFloor TO nEndFloor DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nELSE\n\t// 向下检查（从高楼层到低楼层）\n\tFOR i := nEndFloor TO nStartFloor BY -1 DO\n\t\tIF Tar_Dir.IsStopFloor[i] THEN\n\t\t\tF_CheckJobInDirection := TRUE;\n\t\t\tRETURN;\n\t\tEND_IF\n\tEND_FOR\nEND_IF", "fpath_tuple": ["FUN", "F_CheckJobInDirection.st"], "context_start_lineno": 0, "lineno": 7, "function_name": "F_CheckJobInDirection", "line_no": 7}}
{"_id": "四层电梯控制实训/1", "text": "FUNCTION F_ClearFloorStop\nVAR_INPUT\n\tnFloor\t\t\t:\tUSINT;\t\t//楼层号\n\tbClearUpStop\t:\tBOOL;\t\t//是否清除上升停靠标志\n\tbClearDownStop\t:\tBOOL;\t\t//是否清除下降停靠标志\n\tbClearStopFloor\t:\tBOOL;\t\t//是否清除楼层停靠标志\nEND_VAR", "metadata": {"task_id": "四层电梯控制实训/1", "ground_truth": "FUNCTION F_ClearFloorStop\nVAR_INPUT\n\tnFloor\t\t\t:\tUSINT;\t\t//楼层号\n\tbClearUpStop\t:\tBOOL;\t\t//是否清除上升停靠标志\n\tbClearDownStop\t:\tBOOL;\t\t//是否清除下降停靠标志\n\tbClearStopFloor\t:\tBOOL;\t\t//是否清除楼层停靠标志\nEND_VAR\n\n// 清除楼层停靠标志\nIF bClearUpStop AND (nFloor <= MaxNumFloor - 1) THEN\n\tTar_Dir.IsUpStop[nFloor] := FALSE;\n\tQFloorUpLed[nFloor] := FALSE;\nEND_IF\n\nIF bClearDownStop AND (nFloor >= 2) THEN\n\tTar_Dir.IsDownStop[nFloor] := FALSE;\n\tQFloorDownLed[nFloor] := FALSE;\nEND_IF\n\nIF bClearStopFloor THEN\n\tTar_Dir.IsStopFloor[nFloor] := FALSE;\nEND_IF\n\n// 清除电梯内按钮LED\nIF bClearStopFloor THEN\n\tQGoFloorLed[nFloor] := FALSE;\nEND_IF", "fpath_tuple": ["FUN", "F_ClearFloorStop.st"], "context_start_lineno": 0, "lineno": 8, "function_name": "F_ClearFloorStop", "line_no": 8}}
{"_id": "四层电梯控制实训/2", "text": "FUNCTION F_SetElevatorDirection\nVAR_INPUT\n\tnCurrentFloor\t:\tUSINT;\t\t//当前楼层\n\tnTargetFloor\t:\tUSINT;\t\t//目标楼层\nEND_VAR", "metadata": {"task_id": "四层电梯控制实训/2", "ground_truth": "FUNCTION F_SetElevatorDirection\nVAR_INPUT\n\tnCurrentFloor\t:\tUSINT;\t\t//当前楼层\n\tnTargetFloor\t:\tUSINT;\t\t//目标楼层\nEND_VAR\n\n// 根据当前楼层和目标楼层设定电梯运行方向\nIF nTargetFloor > nCurrentFloor THEN\n\t// 目标楼层高于当前楼层，电梯上升\n\tTar_Dir.IsPositive := TRUE;\n\tTar_Dir.IsNegative := FALSE;\nELSIF nTargetFloor < nCurrentFloor THEN\n\t// 目标楼层低于当前楼层，电梯下降\n\tTar_Dir.IsPositive := FALSE;\n\tTar_Dir.IsNegative := TRUE;\nEND_IF\n// 如果目标楼层等于当前楼层，不改变方向", "fpath_tuple": ["FUN", "F_SetElevatorDirection.st"], "context_start_lineno": 0, "lineno": 6, "function_name": "F_SetElevatorDirection", "line_no": 6}}
