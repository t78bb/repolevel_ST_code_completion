{"_id": "healthydata/0", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR", "metadata": {"task_id": "healthydata/0", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "fpath_tuple": ["FUN", "fileSave_close.st"], "context_start_lineno": 0, "lineno": 6, "function_name": "fileSave", "line_no": 6}}
{"_id": "healthydata/1", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR", "metadata": {"task_id": "healthydata/1", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "fpath_tuple": ["FUN", "fileSave_createDir.st"], "context_start_lineno": 0, "lineno": 7, "function_name": "fileSave", "line_no": 7}}
{"_id": "healthydata/2", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR", "metadata": {"task_id": "healthydata/2", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "fpath_tuple": ["FUN", "fileSave_new.st"], "context_start_lineno": 0, "lineno": 7, "function_name": "fileSave", "line_no": 7}}
{"_id": "healthydata/3", "text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR", "metadata": {"task_id": "healthydata/3", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// 写入数据\n\nEND_IF", "fpath_tuple": ["FUN", "fileSave_write.st"], "context_start_lineno": 0, "lineno": 9, "function_name": "fileSave", "line_no": 9}}
