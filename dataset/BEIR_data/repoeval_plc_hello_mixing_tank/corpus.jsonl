{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_0-25", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// 使能自动序列\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到排空状态\n\t\n\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_0-30", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// 使能自动序列\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到排空状态\n\t\n\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_0-35", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// 使能自动序列\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到排空状态\n\t\n\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_0-40", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// 使能自动序列\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到排空状态\n\t\n\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_0-45", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// 使能自动序列\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到排空状态\n\t\n\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_0-50", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "FUNCTION_BLOCK FB_AutoSequence\nVAR_INPUT\n\tbEnable\t\t\t\t:\tBOOL;\t\t\t// 使能自动序列\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到排空状态\n\t\n\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_5-55", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\t// 液位传感器反馈\n\tbTankLevelFull\t\t:\tBOOL;\t\t\t// 液位满传感器\n\tbTankLevelEmpty\t\t:\tBOOL;\t\t\t// 液位空传感器\n\t\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_10-60", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\tbMixerRunning\t\t:\tBOOL;\t\t\t// 混合电机运行中\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\t\n\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_15-65", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\t// 配置参数\n\ttMixingDuration\t\t:\tTIME := T#10S;\t// 混合持续时间\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_20-70", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\tbMixerRunCmd\t\t:\tBOOL;\t\t\t// 混合电机运行命令\n\tbMedium1OpenCmd\t\t:\tBOOL;\t\t\t// 介质1阀门打开命令\n\tbMedium2OpenCmd\t\t:\tBOOL;\t\t\t// 介质2阀门打开命令\n\tbDrainOpenCmd\t\t:\tBOOL;\t\t\t// 排空阀门打开命令\n\t\n\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_25-75", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\t// 状态输出\n\teCurrentState\t\t:\tAUTO_SEQUENCE;\t// 当前状态\n\tnCyclesCompleted\t:\tUINT;\t\t\t// 完成的循环次数\nEND_VAR\nVAR\n\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_30-80", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\ttonMixing\t\t\t:\tTON;\t\t\t// 混合定时器\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开排空阀，开始排空罐体\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_35-85", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\tnCyclesCompleted := 0;\nEND_IF\n\n// 自动序列状态机\nIF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开排空阀，开始排空罐体\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n\t\t\t\n\t\t\t// 当罐体空时，等待排空阀关闭，然后进入填充状态\n\t\t\tIF bTankLevelEmpty AND NOT bDrainOpened THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.FILLING;\n\t\t\t\tnCyclesCompleted := nCyclesCompleted + 1;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_40-90", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "IF bEnable THEN\n\tCASE eCurrentState OF\n\t\tAUTO_SEQUENCE.FILLING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开排空阀，开始排空罐体\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n\t\t\t\n\t\t\t// 当罐体空时，等待排空阀关闭，然后进入填充状态\n\t\t\tIF bTankLevelEmpty AND NOT bDrainOpened THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.FILLING;\n\t\t\t\tnCyclesCompleted := nCyclesCompleted + 1;\n\t\t\tEND_IF\n\tEND_CASE\nELSE\n\t// 禁用时，关闭所有输出\n\tbMixerRunCmd := FALSE;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_45-95", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开两个介质阀门，开始填充罐体\n\t\t\tbMedium1OpenCmd := NOT bTankLevelFull;\n\t\t\tbMedium2OpenCmd := NOT bTankLevelFull;\n\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开排空阀，开始排空罐体\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n\t\t\t\n\t\t\t// 当罐体空时，等待排空阀关闭，然后进入填充状态\n\t\t\tIF bTankLevelEmpty AND NOT bDrainOpened THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.FILLING;\n\t\t\t\tnCyclesCompleted := nCyclesCompleted + 1;\n\t\t\tEND_IF\n\tEND_CASE\nELSE\n\t// 禁用时，关闭所有输出\n\tbMixerRunCmd := FALSE;\n\tbMedium1OpenCmd := FALSE;\n\tbMedium2OpenCmd := FALSE;\n\tbDrainOpenCmd := FALSE;\n\ttonMixing(IN := FALSE);\nEND_IF\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_AutoSequence.st_50-96", "title": "plc_hello_mixing_tank-FUN\\FB_AutoSequence.st", "text": "\t\t\t\n\t\t\t// 当罐体满时，等待填充阀关闭，然后进入混合状态\n\t\t\tIF bTankLevelFull AND NOT (bMedium1Opened OR bMedium2Opened) THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.MIXING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.MIXING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\tbDrainOpenCmd := FALSE;\n\t\t\t\n\t\t\t// 启动混合电机并混合10秒\n\t\t\tbMixerRunCmd := TRUE;\n\t\t\ttonMixing(IN := bMixerRunning, PT := tMixingDuration);\n\t\t\t\n\t\t\t// 当定时器到达10秒，等待电机停止运行，然后进入排空状态\n\t\t\tIF tonMixing.Q THEN\n\t\t\t\tbMixerRunCmd := FALSE;\n\t\t\t\teCurrentState := AUTO_SEQUENCE.DRAINING;\n\t\t\tEND_IF\n\t\t\t\n\t\tAUTO_SEQUENCE.DRAINING:\n\t\t\t// 确保其他设备不工作\n\t\t\tbMixerRunCmd := FALSE;\n\t\t\tbMedium1OpenCmd := FALSE;\n\t\t\tbMedium2OpenCmd := FALSE;\n\t\t\t\n\t\t\t// 打开排空阀，开始排空罐体\n\t\t\tbDrainOpenCmd := NOT bTankLevelEmpty;\n\t\t\t\n\t\t\t// 当罐体空时，等待排空阀关闭，然后进入填充状态\n\t\t\tIF bTankLevelEmpty AND NOT bDrainOpened THEN\n\t\t\t\teCurrentState := AUTO_SEQUENCE.FILLING;\n\t\t\t\tnCyclesCompleted := nCyclesCompleted + 1;\n\t\t\tEND_IF\n\tEND_CASE\nELSE\n\t// 禁用时，关闭所有输出\n\tbMixerRunCmd := FALSE;\n\tbMedium1OpenCmd := FALSE;\n\tbMedium2OpenCmd := FALSE;\n\tbDrainOpenCmd := FALSE;\n\ttonMixing(IN := FALSE);\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_AutoSequence.st"], "repo": "plc_hello_mixing_tank", "line_no": 50, "start_line_no": 50, "end_line_no": 96, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ManualControl.st_0-25", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st", "text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI命令输入\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// 设备反馈输入\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ManualControl.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ManualControl.st_0-30", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st", "text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI命令输入\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// 设备反馈输入\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// 手动模式：HMI命令通过锁存器控制设备\n// 锁存逻辑：按下启动OR已启动反馈 AND NOT 按下停止\n\n// 混合电机控制\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ManualControl.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ManualControl.st_0-35", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st", "text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI命令输入\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// 设备反馈输入\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// 手动模式：HMI命令通过锁存器控制设备\n// 锁存逻辑：按下启动OR已启动反馈 AND NOT 按下停止\n\n// 混合电机控制\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// 介质1阀门控制\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ManualControl.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ManualControl.st_0-40", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st", "text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI命令输入\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// 设备反馈输入\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// 手动模式：HMI命令通过锁存器控制设备\n// 锁存逻辑：按下启动OR已启动反馈 AND NOT 按下停止\n\n// 混合电机控制\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// 介质1阀门控制\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n// 介质2阀门控制\nbMedium2OpenCmdOut := (bMedium2OpenCmd OR bMedium2Opened) AND NOT bMedium2CloseCmd;\n\n// 排空阀门控制\nbDrainOpenCmdOut := (bDrainOpenCmd OR bDrainOpened) AND NOT bDrainCloseCmd;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ManualControl.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ManualControl.st_0-41", "title": "plc_hello_mixing_tank-FUN\\FB_ManualControl.st", "text": "FUNCTION_BLOCK FB_ManualControl\nVAR_INPUT\n\t// HMI命令输入\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\n\t\n\t// 设备反馈输入\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t// 设备控制输出\n\tbMixerRunCmdOut\t\t:\tBOOL;\n\tbMedium1OpenCmdOut\t:\tBOOL;\n\tbMedium2OpenCmdOut\t:\tBOOL;\n\tbDrainOpenCmdOut\t:\tBOOL;\nEND_VAR\n\n// 手动模式：HMI命令通过锁存器控制设备\n// 锁存逻辑：按下启动OR已启动反馈 AND NOT 按下停止\n\n// 混合电机控制\nbMixerRunCmdOut := (bMixerRunCmd OR bMixerRunning) AND NOT bMixerStopCmd;\n\n// 介质1阀门控制\nbMedium1OpenCmdOut := (bMedium1OpenCmd OR bMedium1Opened) AND NOT bMedium1CloseCmd;\n\n// 介质2阀门控制\nbMedium2OpenCmdOut := (bMedium2OpenCmd OR bMedium2Opened) AND NOT bMedium2CloseCmd;\n\n// 排空阀门控制\nbDrainOpenCmdOut := (bDrainOpenCmd OR bDrainOpened) AND NOT bDrainCloseCmd;\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ManualControl.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 0, "end_line_no": 41, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ModeController.st_0-25", "title": "plc_hello_mixing_tank-FUN\\FB_ModeController.st", "text": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// 切换到自动模式命令\n\tbSetToManual\t:\tBOOL;\t// 切换到手动模式命令\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// 当前模式\n\tbModeChanged\t:\tBOOL;\t// 模式改变标志\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// 上次模式\nEND_VAR\n\n// 模式切换逻辑\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ModeController.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_ModeController.st_0-30", "title": "plc_hello_mixing_tank-FUN\\FB_ModeController.st", "text": "FUNCTION_BLOCK FB_ModeController\nVAR_INPUT\n\tbSetToAuto\t\t:\tBOOL;\t// 切换到自动模式命令\n\tbSetToManual\t:\tBOOL;\t// 切换到手动模式命令\nEND_VAR\nVAR_OUTPUT\n\teCurrentMode\t:\tMODES;\t// 当前模式\n\tbModeChanged\t:\tBOOL;\t// 模式改变标志\nEND_VAR\nVAR\n\teLastMode\t\t:\tMODES;\t// 上次模式\nEND_VAR\n\n// 模式切换逻辑\nCASE eCurrentMode OF\n\tMODES.AUTO:\n\t\tIF bSetToManual THEN\n\t\t\teCurrentMode := MODES.MANUAL;\n\t\tEND_IF\n\t\t\n\tMODES.MANUAL:\n\t\tIF bSetToAuto THEN\n\t\t\teCurrentMode := MODES.AUTO;\n\t\tEND_IF\nEND_CASE\n\n// 检测模式变化\nbModeChanged := (eCurrentMode <> eLastMode);\neLastMode := eCurrentMode;\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_ModeController.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_TankLevelSimulator.st_0-25", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st", "text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到初始液位\n\t\n\t// 配置参数\n\trInitialLevel\t\t:\tREAL := 25.0;\t// 初始液位 (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// 介质1填充速率 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// 介质2填充速率 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// 排空速率 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// 最小液位 (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// 最大液位 (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// 当前液位 (%)\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// 液位计算\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_TankLevelSimulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_TankLevelSimulator.st_0-30", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st", "text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到初始液位\n\t\n\t// 配置参数\n\trInitialLevel\t\t:\tREAL := 25.0;\t// 初始液位 (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// 介质1填充速率 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// 介质2填充速率 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// 排空速率 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// 最小液位 (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// 最大液位 (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// 当前液位 (%)\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// 液位计算\n// 如果任一填充阀打开则填充，如果排空阀打开则排空\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_TankLevelSimulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_FB_TankLevelSimulator.st_0-34", "title": "plc_hello_mixing_tank-FUN\\FB_TankLevelSimulator.st", "text": "FUNCTION_BLOCK FB_TankLevelSimulator\nVAR_INPUT\n\tbMedium1Opened\t\t:\tBOOL;\t\t\t// 介质1阀门打开\n\tbMedium2Opened\t\t:\tBOOL;\t\t\t// 介质2阀门打开\n\tbDrainOpened\t\t:\tBOOL;\t\t\t// 排空阀门打开\n\tbReset\t\t\t\t:\tBOOL;\t\t\t// 复位到初始液位\n\t\n\t// 配置参数\n\trInitialLevel\t\t:\tREAL := 25.0;\t// 初始液位 (%)\n\trFillRate1\t\t\t:\tREAL := 0.1;\t// 介质1填充速率 (%/cycle)\n\trFillRate2\t\t\t:\tREAL := 0.1;\t// 介质2填充速率 (%/cycle)\n\trDrainRate\t\t\t:\tREAL := 0.2;\t// 排空速率 (%/cycle)\n\trMinLevel\t\t\t:\tREAL := 0.0;\t// 最小液位 (%)\n\trMaxLevel\t\t\t:\tREAL := 100.0;\t// 最大液位 (%)\nEND_VAR\nVAR_OUTPUT\n\trCurrentLevel\t\t:\tREAL;\t\t\t// 当前液位 (%)\nEND_VAR\n\n// 复位逻辑\nIF bReset THEN\n\trCurrentLevel := rInitialLevel;\nEND_IF\n\n// 液位计算\n// 如果任一填充阀打开则填充，如果排空阀打开则排空\nrCurrentLevel := rCurrentLevel\n\t\t\t\t+ rFillRate1 * BOOL_TO_REAL(bMedium1Opened)\n\t\t\t\t+ rFillRate2 * BOOL_TO_REAL(bMedium2Opened)\n\t\t\t\t- rDrainRate * BOOL_TO_REAL(bDrainOpened);\n\n// 限制液位范围 (0-100%)\nrCurrentLevel := LIMIT(rMinLevel, rCurrentLevel, rMaxLevel);\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\FB_TankLevelSimulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 34, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_0-25", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI命令标志（需要复位）\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_0-30", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI命令标志（需要复位）\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// 已运行，复位运行命令\nELSE\n\tbMixerStopCmd := FALSE;\t\t// 已停止，复位停止命令\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_0-35", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI命令标志（需要复位）\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// 已运行，复位运行命令\nELSE\n\tbMixerStopCmd := FALSE;\t\t// 已停止，复位停止命令\nEND_IF\n\n// 介质1阀门命令复位\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium1CloseCmd := FALSE;\t// 已关闭，复位关闭命令\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_0-40", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI命令标志（需要复位）\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// 已运行，复位运行命令\nELSE\n\tbMixerStopCmd := FALSE;\t\t// 已停止，复位停止命令\nEND_IF\n\n// 介质1阀门命令复位\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium1CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 介质2阀门命令复位\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// 已打开，复位打开命令\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_0-45", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI命令标志（需要复位）\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// 已运行，复位运行命令\nELSE\n\tbMixerStopCmd := FALSE;\t\t// 已停止，复位停止命令\nEND_IF\n\n// 介质1阀门命令复位\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium1CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 介质2阀门命令复位\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium2CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 排空阀门命令复位\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_0-50", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "FUNCTION F_ResetDeviceCommands : BOOL\nVAR_IN_OUT\n\t// HMI命令标志（需要复位）\n\tbMixerRunCmd\t\t:\tBOOL;\n\tbMixerStopCmd\t\t:\tBOOL;\n\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// 已运行，复位运行命令\nELSE\n\tbMixerStopCmd := FALSE;\t\t// 已停止，复位停止命令\nEND_IF\n\n// 介质1阀门命令复位\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium1CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 介质2阀门命令复位\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium2CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 排空阀门命令复位\nIF bDrainOpened THEN\n\tbDrainOpenCmd := FALSE;\t\t// 已打开，复位打开命令\nELSE\n\tbDrainCloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_ResetDeviceCommands.st_5-53", "title": "plc_hello_mixing_tank-FUN\\F_ResetDeviceCommands.st", "text": "\tbMedium1OpenCmd\t\t:\tBOOL;\n\tbMedium1CloseCmd\t:\tBOOL;\n\tbMedium2OpenCmd\t\t:\tBOOL;\n\tbMedium2CloseCmd\t:\tBOOL;\n\tbDrainOpenCmd\t\t:\tBOOL;\n\tbDrainCloseCmd\t\t:\tBOOL;\nEND_VAR\nVAR_INPUT\n\t// 设备状态反馈\n\tbMixerRunning\t\t:\tBOOL;\n\tbMedium1Opened\t\t:\tBOOL;\n\tbMedium2Opened\t\t:\tBOOL;\n\tbDrainOpened\t\t:\tBOOL;\nEND_VAR\n\n// 命令合理性复位\n// 当设备到达目标状态时，复位相应的命令标志\n\n// 混合电机命令复位\nIF bMixerRunning THEN\n\tbMixerRunCmd := FALSE;\t\t// 已运行，复位运行命令\nELSE\n\tbMixerStopCmd := FALSE;\t\t// 已停止，复位停止命令\nEND_IF\n\n// 介质1阀门命令复位\nIF bMedium1Opened THEN\n\tbMedium1OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium1CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 介质2阀门命令复位\nIF bMedium2Opened THEN\n\tbMedium2OpenCmd := FALSE;\t// 已打开，复位打开命令\nELSE\n\tbMedium2CloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\n// 排空阀门命令复位\nIF bDrainOpened THEN\n\tbDrainOpenCmd := FALSE;\t\t// 已打开，复位打开命令\nELSE\n\tbDrainCloseCmd := FALSE;\t// 已关闭，复位关闭命令\nEND_IF\n\nF_ResetDeviceCommands := TRUE;\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_ResetDeviceCommands.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 5, "end_line_no": 53, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_FUN_F_UpdateLimitSwitches.st_0-17", "title": "plc_hello_mixing_tank-FUN\\F_UpdateLimitSwitches.st", "text": "FUNCTION F_UpdateLimitSwitches : BOOL\nVAR_INPUT\n\trTankLevel\t\t\t:\tREAL;\t\t\t// 当前液位 (%)\n\trFullThreshold\t\t:\tREAL := 85.0;\t// 满液位阈值 (%)\n\trEmptyThreshold\t\t:\tREAL := 5.0;\t// 空液位阈值 (%)\nEND_VAR\nVAR_OUTPUT\n\tbLevelFull\t\t\t:\tBOOL;\t\t\t// 液位满开关\n\tbLevelEmpty\t\t\t:\tBOOL;\t\t\t// 液位空开关\nEND_VAR\n\n// 液位开关模拟\nbLevelFull := rTankLevel >= rFullThreshold;\t\t// 液位 >= 85% 时，满开关激活\nbLevelEmpty := rTankLevel <= rEmptyThreshold;\t// 液位 <= 5% 时，空开关激活\n\nF_UpdateLimitSwitches := TRUE;\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "FUN\\F_UpdateLimitSwitches.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 17, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_global_HMI.st_0-25", "title": "plc_hello_mixing_tank-global\\HMI.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\t///Command to start the mixer\n\tMixerRunCmd: BOOL;\n\t///Command to stop the mixer\n\tMixerStopCmd: BOOL;\n\t///Command to open medium 1 valve\n\tMedium1OpenCmd: BOOL;\n\t///Command to close medium 1 valve\n\tMedium1CloseCmd: BOOL;\n\t///Command to open medium 2 valve\n\tMedium2OpenCmd: BOOL;\n\t///Command to close medium 2 valve\n\tMedium2CloseCmd: BOOL;\n\t///Command to open drain valve\n\tDrainOpenCmd: BOOL;\n\t///Command to close drain valve\n\tDrainCloseCmd: BOOL;\n\t///Command to set the system to auto mode\n\tSetToAuto: BOOL;\n\t///Command to set the system to manual mode\n\tSetToManual: BOOL;\n\t//HMI Support variables\n\tMotorRotating : REAL;\n\t//System in AUTO\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "global\\HMI.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_global_HMI.st_0-30", "title": "plc_hello_mixing_tank-global\\HMI.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\t///Command to start the mixer\n\tMixerRunCmd: BOOL;\n\t///Command to stop the mixer\n\tMixerStopCmd: BOOL;\n\t///Command to open medium 1 valve\n\tMedium1OpenCmd: BOOL;\n\t///Command to close medium 1 valve\n\tMedium1CloseCmd: BOOL;\n\t///Command to open medium 2 valve\n\tMedium2OpenCmd: BOOL;\n\t///Command to close medium 2 valve\n\tMedium2CloseCmd: BOOL;\n\t///Command to open drain valve\n\tDrainOpenCmd: BOOL;\n\t///Command to close drain valve\n\tDrainCloseCmd: BOOL;\n\t///Command to set the system to auto mode\n\tSetToAuto: BOOL;\n\t///Command to set the system to manual mode\n\tSetToManual: BOOL;\n\t//HMI Support variables\n\tMotorRotating : REAL;\n\t//System in AUTO\n\tInAuto : BOOL;\n\t//System in MANUAL\n\tInManual : BOOL;\n\t//Cycles completed\n\tCyclesCompleted : UINT;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "global\\HMI.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_global_HMI.st_0-31", "title": "plc_hello_mixing_tank-global\\HMI.st", "text": "{attribute 'qualified_only'}\nVAR_GLOBAL\n\t///Command to start the mixer\n\tMixerRunCmd: BOOL;\n\t///Command to stop the mixer\n\tMixerStopCmd: BOOL;\n\t///Command to open medium 1 valve\n\tMedium1OpenCmd: BOOL;\n\t///Command to close medium 1 valve\n\tMedium1CloseCmd: BOOL;\n\t///Command to open medium 2 valve\n\tMedium2OpenCmd: BOOL;\n\t///Command to close medium 2 valve\n\tMedium2CloseCmd: BOOL;\n\t///Command to open drain valve\n\tDrainOpenCmd: BOOL;\n\t///Command to close drain valve\n\tDrainCloseCmd: BOOL;\n\t///Command to set the system to auto mode\n\tSetToAuto: BOOL;\n\t///Command to set the system to manual mode\n\tSetToManual: BOOL;\n\t//HMI Support variables\n\tMotorRotating : REAL;\n\t//System in AUTO\n\tInAuto : BOOL;\n\t//System in MANUAL\n\tInManual : BOOL;\n\t//Cycles completed\n\tCyclesCompleted : UINT;\nEND_VAR", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "global\\HMI.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 31, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_global_IO.st_0-23", "title": "plc_hello_mixing_tank-global\\IO.st", "text": "{attribute 'qualified_only' := ''}\nVAR_GLOBAL\n\t///Tank level switch (HIGH) active\n\txDI_LS01_TankLevelFull: BOOL;\n\t///Tank level switch (LOW) active\n\txDI_LS02_TankLevelEmpty: BOOL;\n\t///Medium 1 filling valve open\n\txDI_VV01_Medium1_Opened: BOOL;\n\t///Medium 2 filling valve open\n\txDI_VV02_Medium2_Opened: BOOL;\n\t///Tank draining valve open\n\txDI_VV03_TankDrain_Opened: BOOL;\n\t///Mixer motor running\n\txDI_M1_MixerMotorRunning: BOOL;\n\t///Medium 1 filling valve open command\n\txDO_VV01_Medium1_OpenCmd: BOOL;\n\t///Medium 2 filling valve open command\n\txDO_VV02_Medium2_OpenCmd: BOOL;\n\t///Tank draining valve open command\n\txDO_VV03_TankDrain_OpenCmd: BOOL;\n\t///Mixer motor run command\n\txDO_M1_MixerMotorRunCmd: BOOL;\nEND_VAR", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "global\\IO.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 23, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_0-25", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "PROGRAM main\nVAR\n\t///模式控制器\n\tfbModeController\t\t:\tFB_ModeController;\n\t///手动控制功能块\n\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_0-30", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "PROGRAM main\nVAR\n\t///模式控制器\n\tfbModeController\t\t:\tFB_ModeController;\n\t///手动控制功能块\n\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_0-35", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "PROGRAM main\nVAR\n\t///模式控制器\n\tfbModeController\t\t:\tFB_ModeController;\n\t///手动控制功能块\n\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_0-40", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "PROGRAM main\nVAR\n\t///模式控制器\n\tfbModeController\t\t:\tFB_ModeController;\n\t///手动控制功能块\n\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_0-45", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "PROGRAM main\nVAR\n\t///模式控制器\n\tfbModeController\t\t:\tFB_ModeController;\n\t///手动控制功能块\n\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_0-50", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "PROGRAM main\nVAR\n\t///模式控制器\n\tfbModeController\t\t:\tFB_ModeController;\n\t///手动控制功能块\n\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_5-55", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\tfbManualControl\t\t\t:\tFB_ManualControl;\n\t///自动序列控制功能块\n\tfbAutoSequence\t\t\t:\tFB_AutoSequence;\n\t\n\t///当前运行模式\n\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_10-60", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\tvMode\t\t\t\t\t:\tMODES;\nEND_VAR\n(*Functional description:\nThere are two ways of operation:\n\t- Manual\n\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_15-65", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t- Automatic\nManual:\n\t- Operator is able to operate each valve manually\n\t- Operator is able to operate the mixer motor manually\n\t- Overfill protections are disabled\n\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_20-70", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t- Operator is able to put the system to auto\n\t\nAutomatic:\n\t- Program will automatically control the valves and the mixing motor if system is in auto\n\t- If the tanks level is undefined it assumes draining state\n\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_25-75", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t- In draining state, drains the tank until LS02 activates (tank is empty)\n\t- When tank is empty, it activates the medium 1 and 2 valves, closes the drain valve and the tank is filling up\n\t- Filling state is until LS01 is activated (Tank is full)\n\t- Then the mixer motor is mixing for 10 seconds\n\t- After mixing is completed, drain the whole contents\n\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_30-80", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t- Repeats as long as auto is activated\n\t\nHMI Requirements:\n\t- Manual / Auto needs to be correctly controlled and displayed\n\t- If manual, clicking on devices activates or stops them\n\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_35-85", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t- If auto, clicking is not doing anything\n\t- If auto, system is counting number of cycles completed\n\t- Devices must clearly display if they are activated or deactivated*)\n\n// ========== 模式控制 ==========\nfbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_40-90", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "fbModeController(\n\tbSetToAuto := HMI.SetToAuto,\n\tbSetToManual := HMI.SetToManual\n);\nvMode := fbModeController.eCurrentMode;\n\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_45-95", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\n// 模式切换时，复位HMI命令\nIF fbModeController.bModeChanged THEN\n\tHMI.SetToAuto := FALSE;\n\tHMI.SetToManual := FALSE;\nEND_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_50-100", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "END_IF\n\n// ========== 控制逻辑 ==========\nCASE vMode OF\n\tMODES.MANUAL: (*手动模式*)\n\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 50, "start_line_no": 50, "end_line_no": 100, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_55-105", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t\t// 使用手动控制功能块\n\t\tfbManualControl(\n\t\t\tbMixerRunCmd := HMI.MixerRunCmd,\n\t\t\tbMixerStopCmd := HMI.MixerStopCmd,\n\t\t\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// 更新循环计数\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI命令复位 ==========\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 55, "start_line_no": 55, "end_line_no": 105, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_60-110", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t\t\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\t\t\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\t\t\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\t\t\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\t\t\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// 更新循环计数\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI命令复位 ==========\nF_ResetDeviceCommands(\n\tbMixerRunCmd := HMI.MixerRunCmd,\n\tbMixerStopCmd := HMI.MixerStopCmd,\n\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 60, "start_line_no": 60, "end_line_no": 110, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_65-115", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// 更新循环计数\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI命令复位 ==========\nF_ResetDeviceCommands(\n\tbMixerRunCmd := HMI.MixerRunCmd,\n\tbMixerStopCmd := HMI.MixerStopCmd,\n\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 65, "start_line_no": 65, "end_line_no": 115, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_70-120", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbManualControl.bMixerRunCmdOut;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbManualControl.bMedium1OpenCmdOut;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbManualControl.bMedium2OpenCmdOut;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// 更新循环计数\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI命令复位 ==========\nF_ResetDeviceCommands(\n\tbMixerRunCmd := HMI.MixerRunCmd,\n\tbMixerStopCmd := HMI.MixerStopCmd,\n\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n);\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 70, "start_line_no": 70, "end_line_no": 120, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_75-125", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbManualControl.bDrainOpenCmdOut;\n\t\t\n\t\t// 自动序列禁用\n\t\tfbAutoSequence(bEnable := FALSE);\n\t\n\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// 更新循环计数\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI命令复位 ==========\nF_ResetDeviceCommands(\n\tbMixerRunCmd := HMI.MixerRunCmd,\n\tbMixerStopCmd := HMI.MixerStopCmd,\n\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== HMI状态更新 ==========\nHMI.MotorRotating := HMI.MotorRotating + 2 * BOOL_TO_REAL(IO.xDI_M1_MixerMotorRunning);\nIF HMI.MotorRotating >= 360 THEN \n\tHMI.MotorRotating := 0; \nEND_IF\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 75, "start_line_no": 75, "end_line_no": 125, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_main.st_80-127", "title": "plc_hello_mixing_tank-PRG\\main.st", "text": "\tMODES.AUTO: (*自动模式*)\n\t\t// 使用自动序列功能块\n\t\tfbAutoSequence(\n\t\t\tbEnable := TRUE,\n\t\t\tbReset := fbModeController.bModeChanged,\n\t\t\tbTankLevelFull := IO.xDI_LS01_TankLevelFull,\n\t\t\tbTankLevelEmpty := IO.xDI_LS02_TankLevelEmpty,\n\t\t\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\t\t\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\t\t\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\t\t\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened,\n\t\t\ttMixingDuration := T#10S\n\t\t);\n\t\t\n\t\t// 输出到IO\n\t\tIO.xDO_M1_MixerMotorRunCmd := fbAutoSequence.bMixerRunCmd;\n\t\tIO.xDO_VV01_Medium1_OpenCmd := fbAutoSequence.bMedium1OpenCmd;\n\t\tIO.xDO_VV02_Medium2_OpenCmd := fbAutoSequence.bMedium2OpenCmd;\n\t\tIO.xDO_VV03_TankDrain_OpenCmd := fbAutoSequence.bDrainOpenCmd;\n\t\t\n\t\t// 更新循环计数\n\t\tHMI.CyclesCompleted := fbAutoSequence.nCyclesCompleted;\nEND_CASE\n\n// ========== HMI命令复位 ==========\nF_ResetDeviceCommands(\n\tbMixerRunCmd := HMI.MixerRunCmd,\n\tbMixerStopCmd := HMI.MixerStopCmd,\n\tbMedium1OpenCmd := HMI.Medium1OpenCmd,\n\tbMedium1CloseCmd := HMI.Medium1CloseCmd,\n\tbMedium2OpenCmd := HMI.Medium2OpenCmd,\n\tbMedium2CloseCmd := HMI.Medium2CloseCmd,\n\tbDrainOpenCmd := HMI.DrainOpenCmd,\n\tbDrainCloseCmd := HMI.DrainCloseCmd,\n\tbMixerRunning := IO.xDI_M1_MixerMotorRunning,\n\tbMedium1Opened := IO.xDI_VV01_Medium1_Opened,\n\tbMedium2Opened := IO.xDI_VV02_Medium2_Opened,\n\tbDrainOpened := IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== HMI状态更新 ==========\nHMI.MotorRotating := HMI.MotorRotating + 2 * BOOL_TO_REAL(IO.xDI_M1_MixerMotorRunning);\nIF HMI.MotorRotating >= 360 THEN \n\tHMI.MotorRotating := 0; \nEND_IF\nHMI.InAuto := vMode = MODES.AUTO;\nHMI.InManual := vMode = MODES.MANUAL;\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\main.st"], "repo": "plc_hello_mixing_tank", "line_no": 80, "start_line_no": 80, "end_line_no": 127, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_0-25", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "PROGRAM simulator\nVAR\n\t///模拟混合电机\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质1填充阀门\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_0-30", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "PROGRAM simulator\nVAR\n\t///模拟混合电机\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质1填充阀门\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_0-35", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "PROGRAM simulator\nVAR\n\t///模拟混合电机\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质1填充阀门\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_0-40", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "PROGRAM simulator\nVAR\n\t///模拟混合电机\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质1填充阀门\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_0-45", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "PROGRAM simulator\nVAR\n\t///模拟混合电机\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质1填充阀门\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_0-50", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "PROGRAM simulator\nVAR\n\t///模拟混合电机\n\tMixerMotor\t\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质1填充阀门\n\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_5-55", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "\tMediumValve1\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟介质2填充阀门\n\tMediumValve2\t\t\t:\tGenericBistableDeviceModel;\n\t///模拟排空阀门\n\tDrainValve\t\t\t\t:\tGenericBistableDeviceModel;\n\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_10-60", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "\t\n\t///液位模拟器\n\tfbTankLevelSimulator\t:\tFB_TankLevelSimulator;\n\t\n\t///当前液位\n\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_15-65", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "\tvTankLevel\t\t\t\t:\tREAL;\n\t///电机旋转角度（HMI用）\n\tvMotorRotating\t\t\t:\tREAL;\nEND_VAR\n\n// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n\trFillRate1 := 0.1,\n\trFillRate2 := 0.1,\n\trDrainRate := 0.2,\n\trMinLevel := 0.0,\n\trMaxLevel := 100.0\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_20-70", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "// ========== 电机和阀门模拟 ==========\nMixerMotor(\n\tActivateCmd := IO.xDO_M1_MixerMotorRunCmd,\n\tDeactivateCmd := NOT IO.xDO_M1_MixerMotorRunCmd,\n\tcfgActTime := T#2S,\n\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n\trFillRate1 := 0.1,\n\trFillRate2 := 0.1,\n\trDrainRate := 0.2,\n\trMinLevel := 0.0,\n\trMaxLevel := 100.0\n);\nvTankLevel := fbTankLevelSimulator.rCurrentLevel;\n\n// ========== 液位开关模拟 ==========\nF_UpdateLimitSwitches(\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_25-75", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "\tcfgDeactTime := T#0S,\n\tActivated => IO.xDI_M1_MixerMotorRunning\n);\n\nMediumValve1(\n\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n\trFillRate1 := 0.1,\n\trFillRate2 := 0.1,\n\trDrainRate := 0.2,\n\trMinLevel := 0.0,\n\trMaxLevel := 100.0\n);\nvTankLevel := fbTankLevelSimulator.rCurrentLevel;\n\n// ========== 液位开关模拟 ==========\nF_UpdateLimitSwitches(\n\trTankLevel := vTankLevel,\n\trFullThreshold := 85.0,\n\trEmptyThreshold := 5.0,\n\tbLevelFull => IO.xDI_LS01_TankLevelFull,\n\tbLevelEmpty => IO.xDI_LS02_TankLevelEmpty\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_30-80", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": "\tActivateCmd := IO.xDO_VV01_Medium1_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV01_Medium1_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV01_Medium1_Opened\n);\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n\trFillRate1 := 0.1,\n\trFillRate2 := 0.1,\n\trDrainRate := 0.2,\n\trMinLevel := 0.0,\n\trMaxLevel := 100.0\n);\nvTankLevel := fbTankLevelSimulator.rCurrentLevel;\n\n// ========== 液位开关模拟 ==========\nF_UpdateLimitSwitches(\n\trTankLevel := vTankLevel,\n\trFullThreshold := 85.0,\n\trEmptyThreshold := 5.0,\n\tbLevelFull => IO.xDI_LS01_TankLevelFull,\n\tbLevelEmpty => IO.xDI_LS02_TankLevelEmpty\n);\n\n// ========== HMI 电机旋转动画 ==========\nvMotorRotating := vMotorRotating + 1 * BOOL_TO_REAL(MixerMotor.Activated);\nIF vMotorRotating >= 360 THEN \n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_PRG_simulator.st_35-82", "title": "plc_hello_mixing_tank-PRG\\simulator.st", "text": ");\n\nMediumValve2(\n\tActivateCmd := IO.xDO_VV02_Medium2_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV02_Medium2_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV02_Medium2_Opened\n);\n\nDrainValve(\n\tActivateCmd := IO.xDO_VV03_TankDrain_OpenCmd,\n\tDeactivateCmd := NOT IO.xDO_VV03_TankDrain_OpenCmd,\n\tcfgActTime := T#1S,\n\tcfgDeactTime := T#1S,\n\tActivated => IO.xDI_VV03_TankDrain_Opened\n);\n\n// ========== 液位模拟 ==========\nfbTankLevelSimulator(\n\tbMedium1Opened := MediumValve1.Activated,\n\tbMedium2Opened := MediumValve2.Activated,\n\tbDrainOpened := DrainValve.Activated,\n\tbReset := FALSE,\n\trInitialLevel := 25.0,\n\trFillRate1 := 0.1,\n\trFillRate2 := 0.1,\n\trDrainRate := 0.2,\n\trMinLevel := 0.0,\n\trMaxLevel := 100.0\n);\nvTankLevel := fbTankLevelSimulator.rCurrentLevel;\n\n// ========== 液位开关模拟 ==========\nF_UpdateLimitSwitches(\n\trTankLevel := vTankLevel,\n\trFullThreshold := 85.0,\n\trEmptyThreshold := 5.0,\n\tbLevelFull => IO.xDI_LS01_TankLevelFull,\n\tbLevelEmpty => IO.xDI_LS02_TankLevelEmpty\n);\n\n// ========== HMI 电机旋转动画 ==========\nvMotorRotating := vMotorRotating + 1 * BOOL_TO_REAL(MixerMotor.Activated);\nIF vMotorRotating >= 360 THEN \n\tvMotorRotating := 0; \nEND_IF\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "PRG\\simulator.st"], "repo": "plc_hello_mixing_tank", "line_no": 35, "start_line_no": 35, "end_line_no": 82, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_struct_AUTO_SEQUENCE.st_0-12", "title": "plc_hello_mixing_tank-struct\\AUTO_SEQUENCE.st", "text": "{attribute 'qualified_only' := ''}\n{attribute 'strict' := ''}\nTYPE AUTO_SEQUENCE :\n(\n\t///Draining state when system is in auto mode\n\tDRAINING := 0,\n\t///Filling state when system is in auto mode\n\tFILLING := 1,\n\t///Mixing state when system is in auto mode\n\tMIXING := 2\n);\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "struct\\AUTO_SEQUENCE.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 12, "window_size": 50, "slice_size": 5}]}
{"_id": "plc_hello_mixing_tank_struct_MODES.st_0-10", "title": "plc_hello_mixing_tank-struct\\MODES.st", "text": "{attribute 'qualified_only' := ''}\n{attribute 'strict' := ''}\nTYPE MODES :\n(\n\t///System is in manual mode (Operator control)\n\tMANUAL := 0,\n\t///System is in auto mode (PLC in control)\n\tAUTO := 1\n);\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["plc_hello_mixing_tank", "struct\\MODES.st"], "repo": "plc_hello_mixing_tank", "line_no": 0, "start_line_no": 0, "end_line_no": 10, "window_size": 50, "slice_size": 5}]}
