{"_id": "开放式双轴卷绕机编程开发实训_FUN_CheckF.st_0-15", "title": "开放式双轴卷绕机编程开发实训-FUN\\CheckF.st", "text": "FUNCTION_BLOCK CheckF\nVAR_INPUT\n\tlM\t:\tLREAL;\n\tlL\t:\tLREAL;\n\tlH\t:\tLREAL;\nEND_VAR\nVAR_OUTPUT\n\tlF\t:\tLREAL;\nEND_VAR\nVAR\nEND_VAR\n\nIF lH<>0 THEN\n\tlF:=9.8*lM/(2*COS(ATAN(lL/lH)));\nEND_IF", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\CheckF.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 15, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_F_CalculateRadius.st_0-13", "title": "开放式双轴卷绕机编程开发实训-FUN\\F_CalculateRadius.st", "text": "FUNCTION F_CalculateRadius : LREAL\nVAR_INPUT\n\tlD\t\t\t\t:\tLREAL;\t\t//两轴中心距离\n\tlHold\t\t\t:\tLREAL;\t\t//测量开始时的AxisV位置\n\tlHnew\t\t\t:\tLREAL;\t\t//测量结束时的AxisV位置\n\tlTk\t\t\t\t:\tLREAL;\t\t//材料厚度\n\tlOffset\t\t\t:\tLREAL;\t\t//高度偏移量\nEND_VAR\n\n// 半径计算公式：\n// R = |√(D²+(Hnew+offset)²) - √(D²+(Hold+offset)²)| / π + Tk\nF_CalculateRadius := ABS(SQRT(EXPT(lD,2)+EXPT(lHnew+lOffset,2)) - SQRT(EXPT(lD,2)+EXPT(lHold+lOffset,2))) / SMC_PI + lTk;\n\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\F_CalculateRadius.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 13, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_F_CompensateVelocity.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\F_CompensateVelocity.st", "text": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//当前速度\n\tlOldPos\t\t\t:\tLREAL;\t\t//上一次位置\n\tlNewPos\t\t\t:\tLREAL;\t\t//当前位置\n\tlRadius\t\t\t:\tLREAL;\t\t//当前半径\n\tlTk\t\t\t\t:\tLREAL;\t\t//材料厚度\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=放卷（半径减小），FALSE=收卷（半径增加）\nEND_VAR\n\n// 检查轴是否在运动（位置是否变化）\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// 放卷：半径减小，速度需要增加\n\t\t// 公式：V_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // 避免除零\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// 收卷：半径增加，速度需要降低\n\t\t// 公式：V_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\F_CompensateVelocity.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_F_CompensateVelocity.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\F_CompensateVelocity.st", "text": "FUNCTION F_CompensateVelocity : LREAL\nVAR_INPUT\n\tlCurrentVel\t\t:\tLREAL;\t\t//当前速度\n\tlOldPos\t\t\t:\tLREAL;\t\t//上一次位置\n\tlNewPos\t\t\t:\tLREAL;\t\t//当前位置\n\tlRadius\t\t\t:\tLREAL;\t\t//当前半径\n\tlTk\t\t\t\t:\tLREAL;\t\t//材料厚度\n\tbUnwinding\t\t:\tBOOL;\t\t//TRUE=放卷（半径减小），FALSE=收卷（半径增加）\nEND_VAR\n\n// 检查轴是否在运动（位置是否变化）\nIF lOldPos > lNewPos THEN\n\tIF bUnwinding THEN\n\t\t// 放卷：半径减小，速度需要增加\n\t\t// 公式：V_new = V_old + V_old * Tk / (R - Tk)\n\t\tIF (lRadius - lTk) > 0.01 THEN  // 避免除零\n\t\t\tF_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n\t\tELSE\n\t\t\tF_CompensateVelocity := lCurrentVel;\n\t\tEND_IF\n\tELSE\n\t\t// 收卷：半径增加，速度需要降低\n\t\t// 公式：V_new = V_old - V_old * Tk / (R + Tk)\n\t\tF_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n\tEND_IF\nELSE\n\t// 位置未变化，保持当前速度\n\tF_CompensateVelocity := lCurrentVel;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\F_CompensateVelocity.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_0-50", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "FUNCTION_BLOCK SeekHome\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_5-55", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_10-60", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_15-65", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_20-70", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_25-75", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_30-80", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_35-85", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\n//check left / arrive the ReferenceSwitch\n_fbRtrig(CLK := _xReferenceSwitch);\n_fbFtrig(CLK := _xReferenceSwitch);\nfbRtrig(CLK := _xHome);\n\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_40-90", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\nIF NOT _xHome THEN\n\t_fbMoveVel(Axis := _Axis,Execute := FALSE);\n\t_fbMoveAbs(Axis := _Axis,Execute := FALSE);\n\t_fbHalt(Axis := _Axis,Execute := FALSE);\n\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_45-95", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t_fbSetPos(Axis := _Axis,Execute := FALSE);\n\t_xDone := FALSE;\n\t_xErr := FALSE;\nEND_IF\n\nCASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_50-100", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "CASE _nState OF\n\t0:\n\t\tIF fbRtrig.Q THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 50, "start_line_no": 50, "end_line_no": 100, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_55-105", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\n\t\t\tCASE _nDirection OF //cal which is the invert direction\n\t\t\t\tMC_DIRECTION.positive:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 55, "start_line_no": 55, "end_line_no": 105, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_60-110", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t\t\t\t\t_nBDirection := MC_DIRECTION.negative;\n\t\t\t\tMC_DIRECTION.negative:\n\t\t\t\t\t_nBDirection := MC_DIRECTION.positive;\n\t\t\t\tELSE\n\t\t\t\t\t_xErr := TRUE;\n\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n\t\t_xBusy := FALSE;\n\t\t_nState := 0;\nEND_CASE\n\nFAST_ZERO();\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 60, "start_line_no": 60, "end_line_no": 110, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome.st_65-114", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome.st", "text": "\t\t\tEND_CASE\n\t\t\t\n\t\t\tCASE _nHomeMode OF\n\t\t\t\tHomeMode.FAST_ZERO:\n\t\t\t\t\t_fTempPos := 0;\n\t\t\t\t\t_nState := 21;\n\t\t\t\tHomeMode.FAST_BSLOW_STOP_S:\n\t\t\t\t\t_nState := 1;\n\t\t\t\tHomeMode.FAST_SLOW_STOP_S:\n\t\t\t\t\t_nState := 11;\n\t\t\t\tHomeMode.FAST_BSLOW_I_STOP_S:\n\t\t\t\t\t_nState := 31;\n\t\t\t\tHomeMode.FAST_SLOW_I_STOP_S:\n\t\t\t\t\t_nState := 41;\n\t\t\tEND_CASE\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n\t\t_xBusy := FALSE;\n\t\t_nState := 0;\nEND_CASE\n\nFAST_ZERO();\nFAST_BSLOW_STOP_S();\nFAST_SLOW_STOP_S();\nFAST_BSLOW_I_STOP_S();\nFAST_SLOW_I_STOP_S();", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 65, "start_line_no": 65, "end_line_no": 114, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "METHOD FAST_BSLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "METHOD FAST_BSLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "METHOD FAST_BSLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "METHOD FAST_BSLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "METHOD FAST_BSLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_0-50", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "METHOD FAST_BSLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_5-55", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_10-60", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_15-65", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 32;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_20-70", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 32;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t34:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_25-75", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 32;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t34:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _xIndexPulse THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_30-80", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 32;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t34:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _xIndexPulse THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_I_STOP_S.st_35-81", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st", "text": "\nCASE _nState OF\n\t31:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 33;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=32;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t32://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 34;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t33://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 32;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t34:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _xIndexPulse THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\nEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 35, "start_line_no": 35, "end_line_no": 81, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_0-50", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "METHOD FAST_BSLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_5-55", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_10-60", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_15-65", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n\t3://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 2;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_20-70", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n\t3://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 2;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_BSLOW_STOP_S.st_25-72", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_BSLOW_STOP_S.st", "text": "\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t1:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 2;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=3;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t2://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nBDirection);\n\t\tIF _fbFtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\n\t3://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 2;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\nEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_BSLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 25, "end_line_no": 72, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "METHOD FAST_SLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "METHOD FAST_SLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "METHOD FAST_SLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "METHOD FAST_SLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "METHOD FAST_SLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_0-50", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "METHOD FAST_SLOW_I_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_5-55", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_10-60", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t43://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_15-65", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t43://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 42;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_20-70", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t43://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 42;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t44:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_25-75", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t43://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 42;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t44:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _xIndexPulse THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_30-80", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t43://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 42;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t44:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _xIndexPulse THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_I_STOP_S.st_35-81", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_I_STOP_S.st", "text": "\nCASE _nState OF\n\t41:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 43;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState := 42;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t42://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_nState := 44;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t43://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 42;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t44:\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _xIndexPulse THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\nEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_I_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 35, "start_line_no": 35, "end_line_no": 81, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "METHOD FAST_SLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "METHOD FAST_SLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "METHOD FAST_SLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "METHOD FAST_SLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "METHOD FAST_SLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_0-50", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "METHOD FAST_SLOW_STOP_S\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_5-55", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_10-60", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_15-65", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_20-70", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_25-75", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_30-80", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_35-85", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\n\nCASE _nState OF\n\t11:\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_40-90", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t\t\t_nState := 13;//out of ReferenceSwitch\n\t\tELSE\n\t\t\t_nState :=12;//in the ReferenceSwitch\n\t\tEND_IF\n\t\t\n\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_45-95", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t12://move out of the ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_SLOW_STOP_S.st_50-98", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_SLOW_STOP_S.st", "text": "\t\tIF _fbRtrig.Q THEN//left the ReferenceSwitch\n\t\t\t_fTempPos := _Axis.fActPosition;//save the position\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 50;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t13://move to ReferenceSwitch\n\t\t_fbMoveVel(Execute := TRUE,Axis := _Axis,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec,Direction := _nDirection);\n\t\tIF _fbFtrig.Q THEN//arrive the ReferenceSwitch\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 12;\n\t\tEND_IF\n\t\tIF _fbMoveVel.Error THEN//meet error\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_fbMoveVel(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t50:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fSlowHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\n\t100:\n\t\t_fbSetPos(Execute := TRUE,Axis := _Axis,Position := _fHomePos,Mode := FALSE);//set absolute position\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos(Execute := FALSE,Axis := _Axis);\n\t\t\t_xDone := TRUE;\n\t\t\t_xBusy := FALSE;\n\t\t\t_nState := 0;\n\t\tEND_IF\n\t\tIF _fbSetPos.Error THEN//meet error\n\t\t\t_iErrId := _fbSetPos.ErrorID;\n\t\t\t_nState := 200;\n\t\tEND_IF\n\t200:\n\t\t_xErr := TRUE;\n\t\t_xBusy := FALSE;\n\t\t_nState := 0;\nEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_SLOW_STOP_S.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 50, "start_line_no": 50, "end_line_no": 98, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_ZERO.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_ZERO.st", "text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_ZERO.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_ZERO.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_ZERO.st", "text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_ZERO.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_ZERO.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_ZERO.st", "text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_ZERO.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_ZERO.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_ZERO.st", "text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t21:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_ZERO.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_ZERO.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_ZERO.st", "text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t21:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_ZERO.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_SeekHome_FAST_ZERO.st_0-49", "title": "开放式双轴卷绕机编程开发实训-FUN\\SeekHome_FAST_ZERO.st", "text": "METHOD FAST_ZERO\nVAR_IN_OUT \n\t_Axis\t:\tAXIS_REF_SM3;\nEND_VAR\nVAR_INPUT\n\t_xHome\t:\tBOOL;\n\t_xAbort\t:\tBOOL;\n\t_nHomeMode\t:\tHomeMode;\n\t_fFastHomeVel\t:\tLREAL;\n\t_fSlowHomeVel\t:\tLREAL;\n\t_fHomeAcc\t\t:\tLREAL;\n\t_fHomeDec\t\t:\tLREAL;\n\t_fHomePos\t\t:\tLREAL;\n\t_xReferenceSwitch\t:\tBOOL;//typically is true\n\t_nDirection\t:\tMC_DIRECTION;\n\t_xIndexPulse\t:\tBOOL;\nEND_VAR\nVAR_OUTPUT\n\t_xBusy\t:\tBOOL;\n\t_xDone\t:\tBOOL;\n\t_xErr\t:\tBOOL;\n\t_iErrId\t:\tDINT;\nEND_VAR\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t\t:\tR_TRIG;\n\t_fbFtrig\t\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\tfbRtrig\t:\tR_TRIG;\nEND_VAR\n\n\nCASE _nState OF\n\t21:\n\t\t_fbMoveAbs(Execute := TRUE,Axis := _Axis,Position := _fTempPos,Velocity := _fFastHomeVel,Acceleration := _fHomeAcc,Deceleration := _fHomeDec);\n\t\tIF _fbMoveAbs.Done THEN\n\t\t\t_fbMoveAbs(Execute := FALSE,Axis := _Axis);\n\t\t\t_nState := 100;\n\t\tEND_IF\n\t\tIF _fbMoveAbs.Error THEN//meet error\n\t\t\t_nState := 200;\n\t\t\t_iErrId := _fbMoveAbs.ErrorID;\n\t\tEND_IF\nEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\SeekHome_FAST_ZERO.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 49, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_StaDisplay.st_0-25", "title": "开放式双轴卷绕机编程开发实训-FUN\\StaDisplay.st", "text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\StaDisplay.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_StaDisplay.st_0-30", "title": "开放式双轴卷绕机编程开发实训-FUN\\StaDisplay.st", "text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\StaDisplay.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_StaDisplay.st_0-35", "title": "开放式双轴卷绕机编程开发实训-FUN\\StaDisplay.st", "text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\StaDisplay.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_StaDisplay.st_0-40", "title": "开放式双轴卷绕机编程开发实训-FUN\\StaDisplay.st", "text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\StaDisplay.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_StaDisplay.st_0-45", "title": "开放式双轴卷绕机编程开发实训-FUN\\StaDisplay.st", "text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\StaDisplay.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_FUN_StaDisplay.st_0-47", "title": "开放式双轴卷绕机编程开发实训-FUN\\StaDisplay.st", "text": "FUNCTION_BLOCK StaDisplay\nVAR_INPUT\n\tiStatus :\tINT;\nEND_VAR\nVAR_OUTPUT\n\tY1,Y2,Y3,Y4,Y5,Y6\t:\tBOOL;\nEND_VAR\nVAR\nEND_VAR\n\nCASE iStatus OF\n\t2,3,4,5,6,7,8,9,10,221,222:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=TRUE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t11,12:\n\tY5:=FALSE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=TRUE;\n\tY3:=FALSE;\n\tY4:=FALSE;\n\t13,14,15,16,17,18,19,20,21,22:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=TRUE;\n\tY4:=FALSE;\n\t23,24:\n\tY5:=TRUE;\n\tY6:=FALSE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=TRUE;\n\tELSE \n\tY5:=TRUE;\n\tY6:=TRUE;\n\tY1:=FALSE;\n\tY2:=FALSE;\n\tY3:=FALSE;\n\tY4:=FALSE;\nEND_CASE", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "FUN\\StaDisplay.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 47, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_global_GVL.st_0-25", "title": "开放式双轴卷绕机编程开发实训-global\\GVL.st", "text": "VAR_GLOBAL\n\tIOri\t:\tBOOL;\t//原点开关\n\tLFlage:BOOL;\t//左限位开关\n\tRFlage:BOOL;\t//右限位开关\n\tIReset\t:\tBOOL;\t//复位\n\tIStop\t:\tBOOL;\t//停止\n\tIEStop\t:\tBOOL;\t//急停\n\tIRun\t:\tBOOL;\t//启动\n\t\n\tQLedY\t:\tBOOL:=TRUE;\n\tQLedR\t:\tBOOL;\n\tQLedG\t:\tBOOL;\n\t\n\tMHmiInHomeVel\t:\tLREAL:=20;\t//回零速度\n\tMHmiInJogVel\t:\tLREAL:=25;\t//点动速度\n\tMHmiInVel\t:\tLREAL:=20;\t//初始速度\n\tMHmiInG\t:\tLREAL:=0.7;\t//浮棍重量\n\tMHmiOutF\t\t:\tLREAL;\t//实时拉力\n\tMHmiAxisVPos\t:\tREAL;\n\tMHmiOutModeNo\t\t:\tUSINT;//工作模式ID\n\t\n\tMHmiJogMP\t:\tBOOL;\t//M轴正向点动\n\tMHmiJogMN\t:\tBOOL;\t//M轴负向点动\n\tMHmiJogSP\t:\tBOOL;\t//S轴正向点动\n\tMHmiJogSN\t:\tBOOL;\t//S轴负向点动\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "global\\GVL.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_global_GVL.st_0-30", "title": "开放式双轴卷绕机编程开发实训-global\\GVL.st", "text": "VAR_GLOBAL\n\tIOri\t:\tBOOL;\t//原点开关\n\tLFlage:BOOL;\t//左限位开关\n\tRFlage:BOOL;\t//右限位开关\n\tIReset\t:\tBOOL;\t//复位\n\tIStop\t:\tBOOL;\t//停止\n\tIEStop\t:\tBOOL;\t//急停\n\tIRun\t:\tBOOL;\t//启动\n\t\n\tQLedY\t:\tBOOL:=TRUE;\n\tQLedR\t:\tBOOL;\n\tQLedG\t:\tBOOL;\n\t\n\tMHmiInHomeVel\t:\tLREAL:=20;\t//回零速度\n\tMHmiInJogVel\t:\tLREAL:=25;\t//点动速度\n\tMHmiInVel\t:\tLREAL:=20;\t//初始速度\n\tMHmiInG\t:\tLREAL:=0.7;\t//浮棍重量\n\tMHmiOutF\t\t:\tLREAL;\t//实时拉力\n\tMHmiAxisVPos\t:\tREAL;\n\tMHmiOutModeNo\t\t:\tUSINT;//工作模式ID\n\t\n\tMHmiJogMP\t:\tBOOL;\t//M轴正向点动\n\tMHmiJogMN\t:\tBOOL;\t//M轴负向点动\n\tMHmiJogSP\t:\tBOOL;\t//S轴正向点动\n\tMHmiJogSN\t:\tBOOL;\t//S轴负向点动\n\tMHmiModeChange\t:\tBOOL;\t//自动手动模式切换按钮\n\t\n\tMHmiLed1,MHmiLed2,MHmiLed3,MHmiLed4\t:\tBOOL;\n\tMHmiLGo,MHmiRGo\t:\tBOOL;\n\t\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "global\\GVL.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_global_GVL.st_0-34", "title": "开放式双轴卷绕机编程开发实训-global\\GVL.st", "text": "VAR_GLOBAL\n\tIOri\t:\tBOOL;\t//原点开关\n\tLFlage:BOOL;\t//左限位开关\n\tRFlage:BOOL;\t//右限位开关\n\tIReset\t:\tBOOL;\t//复位\n\tIStop\t:\tBOOL;\t//停止\n\tIEStop\t:\tBOOL;\t//急停\n\tIRun\t:\tBOOL;\t//启动\n\t\n\tQLedY\t:\tBOOL:=TRUE;\n\tQLedR\t:\tBOOL;\n\tQLedG\t:\tBOOL;\n\t\n\tMHmiInHomeVel\t:\tLREAL:=20;\t//回零速度\n\tMHmiInJogVel\t:\tLREAL:=25;\t//点动速度\n\tMHmiInVel\t:\tLREAL:=20;\t//初始速度\n\tMHmiInG\t:\tLREAL:=0.7;\t//浮棍重量\n\tMHmiOutF\t\t:\tLREAL;\t//实时拉力\n\tMHmiAxisVPos\t:\tREAL;\n\tMHmiOutModeNo\t\t:\tUSINT;//工作模式ID\n\t\n\tMHmiJogMP\t:\tBOOL;\t//M轴正向点动\n\tMHmiJogMN\t:\tBOOL;\t//M轴负向点动\n\tMHmiJogSP\t:\tBOOL;\t//S轴正向点动\n\tMHmiJogSN\t:\tBOOL;\t//S轴负向点动\n\tMHmiModeChange\t:\tBOOL;\t//自动手动模式切换按钮\n\t\n\tMHmiLed1,MHmiLed2,MHmiLed3,MHmiLed4\t:\tBOOL;\n\tMHmiLGo,MHmiRGo\t:\tBOOL;\n\t\n\tAxisMSta\t:\tAxisStatus;\n\tAxisSSta\t:\tAxisStatus;\n\tMHmiOutMessage\t:\tSTRING;\nEND_VAR", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "global\\GVL.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 34, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_JOG.st_0-8", "title": "开放式双轴卷绕机编程开发实训-PRG\\JOG.st", "text": "PROGRAM JOG\nVAR\n\tfbJogM\t:\tSM3_Basic.MC_Jog;\n\tfbJogS\t:\tSM3_Basic.MC_Jog;\nEND_VAR\n\nfbJogM(Axis:=AxisM,JogForward:=MHmiJogMP,JogBackward:=MHmiJogMN,Velocity:=MHmiInJogVel,Acceleration:=3600,Deceleration:=3600);\nfbJogS(Axis:=AxisS,JogForward:=MHmiJogSN,JogBackward:=MHmiJogSP,Velocity:=MHmiInJogVel,Acceleration:=3600,Deceleration:=3600);", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\JOG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 8, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_0-25", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbSeekHome\t:\tSeekHome;\n\tfbPowerAxisM\t:\tSM3_Basic.MC_Power;\n\tfbPowerAxisS\t:\tSM3_Basic.MC_Power;\n\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_0-30", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbSeekHome\t:\tSeekHome;\n\tfbPowerAxisM\t:\tSM3_Basic.MC_Power;\n\tfbPowerAxisS\t:\tSM3_Basic.MC_Power;\n\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_0-35", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbSeekHome\t:\tSeekHome;\n\tfbPowerAxisM\t:\tSM3_Basic.MC_Power;\n\tfbPowerAxisS\t:\tSM3_Basic.MC_Power;\n\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_0-40", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbSeekHome\t:\tSeekHome;\n\tfbPowerAxisM\t:\tSM3_Basic.MC_Power;\n\tfbPowerAxisS\t:\tSM3_Basic.MC_Power;\n\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_0-45", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbSeekHome\t:\tSeekHome;\n\tfbPowerAxisM\t:\tSM3_Basic.MC_Power;\n\tfbPowerAxisS\t:\tSM3_Basic.MC_Power;\n\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_0-50", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n\tfbSeekHome\t:\tSeekHome;\n\tfbPowerAxisM\t:\tSM3_Basic.MC_Power;\n\tfbPowerAxisS\t:\tSM3_Basic.MC_Power;\n\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_5-55", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tfbAxisMMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbAxisSMoveRel\t:\tSM3_Basic.MC_MoveRelative;\n\tfbSetPosAxisV\t:\tSM3_Basic.MC_SetPosition;\n\tfbAxisMMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisSMoveVelocity: SM3_Basic.MC_MoveVelocity;\n\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_10-60", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tfbAxisMFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tfbAxisSFollowVelocity:SM3_Basic.SMC_FollowVelocity;\n\tAxisMVel:LREAL;\n\tAxisSVel:LREAL;\n\tAxisMOldPoint,AxisMNewPoint:LREAL;\n\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_15-65", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tAxisSOldPoint,AxisSNewPoint:LREAL;\n\tAxisVOldPoint,AxisVNewPoint:LREAL;\n\tfbHaltAxisM\t\t:\tMC_Halt;\n\tfbHaltAxisS\t\t:\tMC_Halt;\n\tfbStartRtrig\t:\tR_TRIG;\n\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_20-70", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tfbStopRtrig\t\t:\tR_TRIG;\n\tfbLIORtrig\t\t:\tF_TRIG;\n\tfbRIORtrig\t\t:\tF_TRIG;\n\tfbChaneModeFtrig:\tStandard.F_TRIG;\n\tfbDisplay\t:\tStaDisplay;\n\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 20, "start_line_no": 20, "end_line_no": 70, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_25-75", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tfbCheckF\t:\tCheckF;\n\tbPowerOn\t:\tBOOL;\n\tbOKPowerOn\t:\tBOOL;\n\tbGoHome\t:\tBOOL;\n\tbGoHomeDone\t:\tBOOL;\n\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 25, "start_line_no": 25, "end_line_no": 75, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_30-80", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tbModeChang\t:\tBOOL;\n\tiStatus :\tINT;\n\tbErr\t:\tBOOL;\n\tHold,Hnew:LREAL;\n\tLold,Lnew:LREAL;\n\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 30, "start_line_no": 30, "end_line_no": 80, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_35-85", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tD:LREAL:=122.5;\n\tMr,Sr:LREAL;//半径\n\tTk:LREAL:=0.6;//厚度\n\tAxisPID1,AxisPID2:Util.PID_FIXCYCLE;\n\tPIDOut: REAL;\nEND_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 35, "start_line_no": 35, "end_line_no": 85, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_40-90", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "END_VAR\n\nfbPowerAxisM(Axis:=AxisM,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nfbPowerAxisS(Axis:=AxisS,Enable:=TRUE,bRegulatorOn:=bPowerOn,bDriveStart:=bPowerOn);\nbOKPowerOn:=fbPowerAxisM.Status AND fbPowerAxisS.Status;\n\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 40, "start_line_no": 40, "end_line_no": 90, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_45-95", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\nfbStopRtrig(CLK := IStop);\nIF fbStopRtrig.Q OR IEStop OR AxisMSta.bErr OR AxisSSta.bErr THEN//判断是否按下停止按钮\n\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 45, "start_line_no": 45, "end_line_no": 95, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_50-100", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\tiStatus := 100;\nEND_IF\n\nIF bOKPowerOn THEN\n\tIF MHmiModeChange THEN //自动\n\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 50, "start_line_no": 50, "end_line_no": 100, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_55-105", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\tQLedG:=TRUE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=FALSE;\n\t\tCASE iStatus OF\n\t\t0://回零初始化\n\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 55, "start_line_no": 55, "end_line_no": 105, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_60-110", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tIF bGoHome THEN\n\t\t\t\tiStatus:=1;\n\t\t\t\tbGoHome:=FALSE;\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=FALSE,Position:=61);\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort := FALSE,_nHomeMode := 1,_fFastHomeVel := MHmiInHomeVel,_fSlowHomeVel := 5,_fHomeAcc := 3600,\n\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 60, "start_line_no": 60, "end_line_no": 110, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_65-115", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\t\t   _fHomeDec := 3600,_fHomePos := 0,_xReferenceSwitch :=IOri,_Axis := AxisM,_nDirection := MC_DIRECTION.positive);\n\t\t\tEND_IF\n\t\t1://回零\n\t\t\tfbSeekHome(_xHome := TRUE,_xReferenceSwitch := IOri,_Axis := AxisM);\n\t\t\tIF fbSeekHome._xDone THEN\n\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 65, "start_line_no": 65, "end_line_no": 115, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_70-120", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tfbSetPosAxisV(Axis:=AxisV,Execute:=TRUE,Position:=61);\n\t\t\t\tIF fbSetPosAxisV.Done THEN\n\t\t\t\t\tbGoHomeDone:=TRUE;\n\t\t\t\t\tiStatus := 111;\n\t\t\t\tEND_IF\n\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 70, "start_line_no": 70, "end_line_no": 120, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_75-125", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tEND_IF\n\t\t\tbErr:=bErr OR fbSeekHome._xErr OR fbSetPosAxisV.Error;\n\t\t\tIF bErr THEN\n\t\t\t\tfbSeekHome(_xHome := FALSE,_xAbort:=TRUE,_Axis := AxisM);\n\t\t\t\tiStatus := 100;\t\n\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 75, "start_line_no": 75, "end_line_no": 125, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_80-130", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tEND_IF\n\t\t111://开始执行\n\t\t\tfbStartRtrig(CLK:=IRun);\n\t\t\tIF fbStartRtrig.Q THEN\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 80, "start_line_no": 80, "end_line_no": 130, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_85-135", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tEND_IF\n\t\t2://向60度位置运动\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=221;\n\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 85, "start_line_no": 85, "end_line_no": 135, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_90-140", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tELSE\n\t\t\t\tiStatus:=222;\n\t\t\tEND_IF\n\t\t221:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 90, "start_line_no": 90, "end_line_no": 140, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_95-145", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 95, "start_line_no": 95, "end_line_no": 145, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_100-150", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t222:\n\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisMMoveVelocity(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 100, "start_line_no": 100, "end_line_no": 150, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_105-155", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tiStatus:=3;\n\t\t\tEND_IF\n\t\t3://到达60度位置后停止\n\t\t\tfbHaltAxisM(Axis:=AxisM,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisM.Done THEN\n\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 105, "start_line_no": 105, "end_line_no": 155, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_110-160", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tiStatus:=4;\n\t\t\tEND_IF\n\t\t4://半径测量初始化\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 110, "start_line_no": 110, "end_line_no": 160, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_115-165", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=5;\n\t\t5://半径测量\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=6;\n\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 115, "start_line_no": 115, "end_line_no": 165, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_120-170", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t6:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 120, "start_line_no": 120, "end_line_no": 170, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_125-175", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tiStatus:=7;\n\t\t\tEND_IF\n\t\t7:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 125, "start_line_no": 125, "end_line_no": 175, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_130-180", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=8;\n\t\t8:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 130, "start_line_no": 130, "end_line_no": 180, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_135-185", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tiStatus:=9;\n\t\t\tEND_IF\n\t\t9:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 135, "start_line_no": 135, "end_line_no": 185, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_140-190", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=10;\n\t\t10://初始速度\n\t\t\tAxisMVel:=MHmiInVel;\n\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 140, "start_line_no": 140, "end_line_no": 190, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_145-195", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tAxisSVel:=-1*AxisMVel*Mr/Sr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID1(RESET:=TRUE);\n\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 145, "start_line_no": 145, "end_line_no": 195, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_150-200", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tiStatus:=11;\t\t\n\t\t11://同步控制\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 150, "start_line_no": 150, "end_line_no": 200, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_155-205", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID1(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,RESET:=FALSE,TN:=3,TV:=0,CYCLE:=0.004,Y=>PIDOut);\n\t\t//\tAxisMVel:=AxisMVel+PIDOut;\n\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 155, "start_line_no": 155, "end_line_no": 205, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_160-210", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tAxisSVel:=AxisSVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbLIORtrig(CLK:=LFlage);\n\t\t\tIF fbLIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 160, "start_line_no": 160, "end_line_no": 210, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_165-215", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=12;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 165, "start_line_no": 165, "end_line_no": 215, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_170-220", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t12://右限位\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 170, "start_line_no": 170, "end_line_no": 220, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_175-225", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tiStatus:=13;\n\t\t\tEND_IF\n\t\t13://开始反向卷绕\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 175, "start_line_no": 175, "end_line_no": 225, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_180-230", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tIF AxisV.fActPosition>211 THEN\n\t\t\t\tiStatus:=14;\n\t\t\tELSE\n\t\t\t\tiStatus:=15;\n\t\t\tEND_IF\n\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 180, "start_line_no": 180, "end_line_no": 230, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_185-235", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t14:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=1);\n\t\t\tIF AxisV.fActPosition<=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 185, "start_line_no": 185, "end_line_no": 235, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_190-240", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t15:\n\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=TRUE,Velocity:=25,Acceleration:=3600,Deceleration:=3600,Direction:=-1);\n\t\t\tIF AxisV.fActPosition>=211 THEN\n\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 190, "start_line_no": 190, "end_line_no": 240, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_195-245", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tfbAxisSMoveVelocity(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=16;\n\t\t\tEND_IF\n\t\t16:\n\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 195, "start_line_no": 195, "end_line_no": 245, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_200-250", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tfbHaltAxisS(Axis:=AxisS,Deceleration:=3600,Execute:=TRUE);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE,Deceleration:=3600);\n\t\t\t\tiStatus:=17;\n\t\t\tEND_IF\n\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 200, "start_line_no": 200, "end_line_no": 250, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_205-255", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t17:\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\tiStatus:=18;\n\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 205, "start_line_no": 205, "end_line_no": 255, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_210-260", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t18:\n\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=TRUE,Distance:=360,Velocity:=25,Deceleration:=3600,Acceleration:=3600);\n\t\t\tIF fbAxisMMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 210, "start_line_no": 210, "end_line_no": 260, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_215-265", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tiStatus:=19;\n\t\t\tEND_IF\n\t\t19:\n\t\t\t// 使用F_CalculateRadius函数计算主轴半径\n\t\t\tMr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 215, "start_line_no": 215, "end_line_no": 265, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_220-270", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tHold:=AxisV.fActPosition;\n\t\t\tiStatus:=20;\n\t\t20:\n\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=TRUE,Distance:=-360,Velocity:=25,Acceleration:=3600,Deceleration:=3600);\n\t\t\tIF fbAxisSMoveRel.Done THEN\n\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 220, "start_line_no": 220, "end_line_no": 270, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_225-275", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tHnew:=AxisV.fActPosition;\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=21;\n\t\t\tEND_IF\n\t\t21:\n\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 225, "start_line_no": 225, "end_line_no": 275, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_230-280", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t// 使用F_CalculateRadius函数计算从轴半径\n\t\t\tSr := F_CalculateRadius(lD:=D, lHold:=Hold, lHnew:=Hnew, lTk:=Tk, lOffset:=31);\n\t\t\tiStatus:=22;\n\t\t22:\n\t\t\tAxisSVel:=MHmiInVel;\n\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 230, "start_line_no": 230, "end_line_no": 280, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_235-285", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tAxisMVel:=-1*AxisSVel*Sr/Mr;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tAxisVOldPoint:=AxisV.fActPosition;\n\t\t\tAxisPID2(RESET:=TRUE);\n\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 235, "start_line_no": 235, "end_line_no": 285, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_240-290", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tiStatus:=23;\n\t\t23:\n\t\t\t// 使用F_CompensateVelocity函数进行速度补偿（反向）\n\t\t\tAxisSVel := F_CompensateVelocity(lCurrentVel:=AxisSVel, lOldPos:=AxisSOldPoint, lNewPos:=AxisS.fActPosition, lRadius:=Sr, lTk:=Tk, bUnwinding:=TRUE);\n\t\t\tAxisMVel := F_CompensateVelocity(lCurrentVel:=AxisMVel, lOldPos:=AxisMOldPoint, lNewPos:=AxisM.fActPosition, lRadius:=Mr, lTk:=Tk, bUnwinding:=FALSE);\n\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n\tEND_IF\nEND_IF\n\nIF MHmiModeChange THEN\n\tMHmiOutModeNo:=1;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 240, "start_line_no": 240, "end_line_no": 290, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_245-295", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\n\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=TRUE,fSetVelocity:=AxisMVel);\n\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=TRUE,fSetVelocity:=AxisSVel);\n\t\t\tAxisPID2(ACTUAL:=AxisV.fActPosition,SET_POINT:=AxisVOldPoint,KP:=0.1,TN:=3,TV:=0,RESET:=FALSE,CYCLE:=0.004,Y=>PIDOut);\n\t\t\t//AxisSVel:=AxisSVel+PIDOut;\n\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n\tEND_IF\nEND_IF\n\nIF MHmiModeChange THEN\n\tMHmiOutModeNo:=1;\nELSE\n\tMHmiOutModeNo:=0;\nEND_IF\n\nfbChaneModeFtrig(CLK:=MHmiModeChange);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 245, "start_line_no": 245, "end_line_no": 295, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_250-300", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tAxisMVel:=AxisMVel-PIDOut;\n\t\t\tAxisMOldPoint:=AxisM.fActPosition;\n\t\t\tAxisSOldPoint:=AxisS.fActPosition;\n\t\t\tfbRIORtrig(CLK:=RFlage);\n\t\t\tIF fbRIORtrig.Q THEN\n\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n\tEND_IF\nEND_IF\n\nIF MHmiModeChange THEN\n\tMHmiOutModeNo:=1;\nELSE\n\tMHmiOutModeNo:=0;\nEND_IF\n\nfbChaneModeFtrig(CLK:=MHmiModeChange);\nIF fbChaneModeFtrig.Q THEN\n\tbModeChang:=TRUE;\nEND_IF\n\nIF bModeChang THEN\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 250, "start_line_no": 250, "end_line_no": 300, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_255-305", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\t\tfbAxisMFollowVelocity(Axis:=AxisM,bExecute:=FALSE);\n\t\t\t\tfbAxisSFollowVelocity(Axis:=AxisS,bExecute:=FALSE);\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=24;\n\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n\tEND_IF\nEND_IF\n\nIF MHmiModeChange THEN\n\tMHmiOutModeNo:=1;\nELSE\n\tMHmiOutModeNo:=0;\nEND_IF\n\nfbChaneModeFtrig(CLK:=MHmiModeChange);\nIF fbChaneModeFtrig.Q THEN\n\tbModeChang:=TRUE;\nEND_IF\n\nIF bModeChang THEN\n\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\tIF fbHaltAxisS.Done THEN\n\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 255, "start_line_no": 255, "end_line_no": 305, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_260-310", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tEND_IF\n\t\t\tfbCheckF(lM:=MHmiInG,lL:=122.5,lH:=AxisV.fActPosition,lF=>MHmiOutF);\n\t\t24:\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n\tEND_IF\nEND_IF\n\nIF MHmiModeChange THEN\n\tMHmiOutModeNo:=1;\nELSE\n\tMHmiOutModeNo:=0;\nEND_IF\n\nfbChaneModeFtrig(CLK:=MHmiModeChange);\nIF fbChaneModeFtrig.Q THEN\n\tbModeChang:=TRUE;\nEND_IF\n\nIF bModeChang THEN\n\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\tIF fbHaltAxisS.Done THEN\n\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\tbModeChang:=FALSE;\n\t\tbGoHomeDone:=FALSE;\n\t\tiStatus:=0;\n\tEND_IF\nEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 260, "start_line_no": 260, "end_line_no": 310, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_PLC_PRG.st_265-314", "title": "开放式双轴卷绕机编程开发实训-PRG\\PLC_PRG.st", "text": "\t\t\tIF fbHaltAxisM.Done AND fbHaltAxisS.Done THEN\n\t\t\t\tfbAxisMMoveRel(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbAxisSMoveRel(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tiStatus:=2;\n\t\t\tEND_IF\n\t\t100://错误处理\n\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\t\t\tIF fbHaltAxisS.Done THEN\n\t\t\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\t\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\t\t\tbGoHomeDone:=FALSE;\n\t\t\t\tiStatus:=0;\n\t\t\tEND_IF\n\t\tEND_CASE\n\tELSE //手动\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tJOG();\n\tEND_IF\nEND_IF\n\nIF MHmiModeChange THEN\n\tMHmiOutModeNo:=1;\nELSE\n\tMHmiOutModeNo:=0;\nEND_IF\n\nfbChaneModeFtrig(CLK:=MHmiModeChange);\nIF fbChaneModeFtrig.Q THEN\n\tbModeChang:=TRUE;\nEND_IF\n\nIF bModeChang THEN\n\tfbHaltAxisM(Axis:=AxisM,Execute:=TRUE,Deceleration:=36000);\n\tfbHaltAxisS(Axis:=AxisS,Execute:=TRUE,Deceleration:=36000);\n\tIF fbHaltAxisS.Done THEN\n\t\tfbHaltAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\tfbHaltAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\tbModeChang:=FALSE;\n\t\tbGoHomeDone:=FALSE;\n\t\tiStatus:=0;\n\tEND_IF\nEND_IF\n\nReadStatus();\nReset();\nfbDisplay(iStatus:=iStatus,Y1=>MHmiLed1,Y2=>MHmiLed2,Y3=>MHmiLed3,Y4=>MHmiLed4,Y5=>MHmiRGo,Y6=>MHmiLGo);", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\PLC_PRG.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 265, "start_line_no": 265, "end_line_no": 314, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_ReadStatus.st_0-25", "title": "开放式双轴卷绕机编程开发实训-PRG\\ReadStatus.st", "text": "PROGRAM ReadStatus\nVAR\n\tfbReadStaM\t:\tSM3_Basic.MC_ReadStatus;\n\tfbReadStaS\t:\tSM3_Basic.MC_ReadStatus;\nEND_VAR\n\nfbReadStaM(Axis:=AxisM,Enable:=TRUE);\nfbReadStaS(Axis:=AxisS,Enable:=TRUE);\n\nIF fbReadStaM.Valid THEN\n\tAxisMSta.bErr := fbReadStaM.Errorstop;\n\tAxisMSta.bStandStill := fbReadStaM.StandStill;\n\tAxisMSta.bIsMoving := (NOT fbReadStaM.StandStill) AND (NOT fbReadStaM.Errorstop) AND (fbReadStaM.ConstantVelocity OR fbReadStaM.ContinuousMotion OR fbReadStaM.DiscreteMotion OR fbReadStaM.SynchronizedMotion);\nEND_IF\n\nIF fbReadStaS.Valid THEN\n\tAxisSSta.bErr := fbReadStaS.Errorstop;\n\tAxisSSta.bStandStill := fbReadStaS.StandStill;\n\tAxisSSta.bIsMoving := (NOT fbReadStaS.StandStill) AND (NOT fbReadStaS.Errorstop) AND (fbReadStaS.ConstantVelocity OR fbReadStaS.ContinuousMotion OR fbReadStaS.DiscreteMotion OR fbReadStaS.SynchronizedMotion);\nEND_IF\n\nIF IEStop THEN\n\tMHmiOutMessage := 'Emergency stop';\n\tQLedG:=FALSE;\n\tQLedR:=TRUE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\ReadStatus.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_ReadStatus.st_0-30", "title": "开放式双轴卷绕机编程开发实训-PRG\\ReadStatus.st", "text": "PROGRAM ReadStatus\nVAR\n\tfbReadStaM\t:\tSM3_Basic.MC_ReadStatus;\n\tfbReadStaS\t:\tSM3_Basic.MC_ReadStatus;\nEND_VAR\n\nfbReadStaM(Axis:=AxisM,Enable:=TRUE);\nfbReadStaS(Axis:=AxisS,Enable:=TRUE);\n\nIF fbReadStaM.Valid THEN\n\tAxisMSta.bErr := fbReadStaM.Errorstop;\n\tAxisMSta.bStandStill := fbReadStaM.StandStill;\n\tAxisMSta.bIsMoving := (NOT fbReadStaM.StandStill) AND (NOT fbReadStaM.Errorstop) AND (fbReadStaM.ConstantVelocity OR fbReadStaM.ContinuousMotion OR fbReadStaM.DiscreteMotion OR fbReadStaM.SynchronizedMotion);\nEND_IF\n\nIF fbReadStaS.Valid THEN\n\tAxisSSta.bErr := fbReadStaS.Errorstop;\n\tAxisSSta.bStandStill := fbReadStaS.StandStill;\n\tAxisSSta.bIsMoving := (NOT fbReadStaS.StandStill) AND (NOT fbReadStaS.Errorstop) AND (fbReadStaS.ConstantVelocity OR fbReadStaS.ContinuousMotion OR fbReadStaS.DiscreteMotion OR fbReadStaS.SynchronizedMotion);\nEND_IF\n\nIF IEStop THEN\n\tMHmiOutMessage := 'Emergency stop';\n\tQLedG:=FALSE;\n\tQLedR:=TRUE;\n\tQLedY:=FALSE;\nELSE\n\tIF AxisMSta.bErr OR AxisSSta.bErr THEN\n\t\tMHmiOutMessage := 'Axis Errors';\n\t\tQLedG:=FALSE;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\ReadStatus.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_ReadStatus.st_0-35", "title": "开放式双轴卷绕机编程开发实训-PRG\\ReadStatus.st", "text": "PROGRAM ReadStatus\nVAR\n\tfbReadStaM\t:\tSM3_Basic.MC_ReadStatus;\n\tfbReadStaS\t:\tSM3_Basic.MC_ReadStatus;\nEND_VAR\n\nfbReadStaM(Axis:=AxisM,Enable:=TRUE);\nfbReadStaS(Axis:=AxisS,Enable:=TRUE);\n\nIF fbReadStaM.Valid THEN\n\tAxisMSta.bErr := fbReadStaM.Errorstop;\n\tAxisMSta.bStandStill := fbReadStaM.StandStill;\n\tAxisMSta.bIsMoving := (NOT fbReadStaM.StandStill) AND (NOT fbReadStaM.Errorstop) AND (fbReadStaM.ConstantVelocity OR fbReadStaM.ContinuousMotion OR fbReadStaM.DiscreteMotion OR fbReadStaM.SynchronizedMotion);\nEND_IF\n\nIF fbReadStaS.Valid THEN\n\tAxisSSta.bErr := fbReadStaS.Errorstop;\n\tAxisSSta.bStandStill := fbReadStaS.StandStill;\n\tAxisSSta.bIsMoving := (NOT fbReadStaS.StandStill) AND (NOT fbReadStaS.Errorstop) AND (fbReadStaS.ConstantVelocity OR fbReadStaS.ContinuousMotion OR fbReadStaS.DiscreteMotion OR fbReadStaS.SynchronizedMotion);\nEND_IF\n\nIF IEStop THEN\n\tMHmiOutMessage := 'Emergency stop';\n\tQLedG:=FALSE;\n\tQLedR:=TRUE;\n\tQLedY:=FALSE;\nELSE\n\tIF AxisMSta.bErr OR AxisSSta.bErr THEN\n\t\tMHmiOutMessage := 'Axis Errors';\n\t\tQLedG:=FALSE;\n\t\tQLedR:=TRUE;\n\t\tQLedY:=FALSE;\n\tELSE\n\t\tMHmiOutMessage := 'System Normal';\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\ReadStatus.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_ReadStatus.st_0-39", "title": "开放式双轴卷绕机编程开发实训-PRG\\ReadStatus.st", "text": "PROGRAM ReadStatus\nVAR\n\tfbReadStaM\t:\tSM3_Basic.MC_ReadStatus;\n\tfbReadStaS\t:\tSM3_Basic.MC_ReadStatus;\nEND_VAR\n\nfbReadStaM(Axis:=AxisM,Enable:=TRUE);\nfbReadStaS(Axis:=AxisS,Enable:=TRUE);\n\nIF fbReadStaM.Valid THEN\n\tAxisMSta.bErr := fbReadStaM.Errorstop;\n\tAxisMSta.bStandStill := fbReadStaM.StandStill;\n\tAxisMSta.bIsMoving := (NOT fbReadStaM.StandStill) AND (NOT fbReadStaM.Errorstop) AND (fbReadStaM.ConstantVelocity OR fbReadStaM.ContinuousMotion OR fbReadStaM.DiscreteMotion OR fbReadStaM.SynchronizedMotion);\nEND_IF\n\nIF fbReadStaS.Valid THEN\n\tAxisSSta.bErr := fbReadStaS.Errorstop;\n\tAxisSSta.bStandStill := fbReadStaS.StandStill;\n\tAxisSSta.bIsMoving := (NOT fbReadStaS.StandStill) AND (NOT fbReadStaS.Errorstop) AND (fbReadStaS.ConstantVelocity OR fbReadStaS.ContinuousMotion OR fbReadStaS.DiscreteMotion OR fbReadStaS.SynchronizedMotion);\nEND_IF\n\nIF IEStop THEN\n\tMHmiOutMessage := 'Emergency stop';\n\tQLedG:=FALSE;\n\tQLedR:=TRUE;\n\tQLedY:=FALSE;\nELSE\n\tIF AxisMSta.bErr OR AxisSSta.bErr THEN\n\t\tMHmiOutMessage := 'Axis Errors';\n\t\tQLedG:=FALSE;\n\t\tQLedR:=TRUE;\n\t\tQLedY:=FALSE;\n\tELSE\n\t\tMHmiOutMessage := 'System Normal';\n\tEND_IF\nEND_IF\n\n\nMHmiAxisVPos:=DINT_TO_REAL(TRUNC(AxisV.fActPosition * 1000)) / 1000.0;\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\ReadStatus.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 15, "start_line_no": 0, "end_line_no": 39, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_Reset.st_0-25", "title": "开放式双轴卷绕机编程开发实训-PRG\\Reset.st", "text": "PROGRAM Reset\nVAR\n\tfbResetAxisM\t:\tSM3_Basic.MC_Reset;\n\tfbResetAxisS\t:\tSM3_Basic.MC_Reset;\n\tfbTrigR\t:\tStandard.R_TRIG;\n\tbReset\t:\tBOOL;\nEND_VAR\n\nfbTrigR(CLK:=IReset);\n\nIF fbTrigR.Q THEN\n\tbReset:=TRUE;\nEND_IF\n\nIF bReset THEN\n\tfbResetAxisM(Axis:=AxisM,Execute:=AxisMSta.bErr);\n\tfbResetAxisS(Axis:=AxisS,Execute:=AxisSSta.bErr);\n\tIF (NOT AxisMSta.bErr) AND (NOT AxisSSta.bErr)THEN\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tfbResetAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\tfbResetAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\tbReset:=FALSE;\n\tEND_IF\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\Reset.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_PRG_Reset.st_0-26", "title": "开放式双轴卷绕机编程开发实训-PRG\\Reset.st", "text": "PROGRAM Reset\nVAR\n\tfbResetAxisM\t:\tSM3_Basic.MC_Reset;\n\tfbResetAxisS\t:\tSM3_Basic.MC_Reset;\n\tfbTrigR\t:\tStandard.R_TRIG;\n\tbReset\t:\tBOOL;\nEND_VAR\n\nfbTrigR(CLK:=IReset);\n\nIF fbTrigR.Q THEN\n\tbReset:=TRUE;\nEND_IF\n\nIF bReset THEN\n\tfbResetAxisM(Axis:=AxisM,Execute:=AxisMSta.bErr);\n\tfbResetAxisS(Axis:=AxisS,Execute:=AxisSSta.bErr);\n\tIF (NOT AxisMSta.bErr) AND (NOT AxisSSta.bErr)THEN\n\t\tQLedG:=FALSE;\n\t\tQLedR:=FALSE;\n\t\tQLedY:=TRUE;\n\t\tfbResetAxisM(Axis:=AxisM,Execute:=FALSE);\n\t\tfbResetAxisS(Axis:=AxisS,Execute:=FALSE);\n\t\tbReset:=FALSE;\n\tEND_IF\nEND_IF", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "PRG\\Reset.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 5, "start_line_no": 0, "end_line_no": 26, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_struct_AxisStatus.st_0-7", "title": "开放式双轴卷绕机编程开发实训-struct\\AxisStatus.st", "text": "TYPE AxisStatus :\nSTRUCT\n\tbErr\t:\tBOOL;\n\tbStandStill\t:\tBOOL;\n\tbIsMoving\t:\tBOOL;\nEND_STRUCT\nEND_TYPE\n", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "struct\\AxisStatus.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 7, "window_size": 50, "slice_size": 5}]}
{"_id": "开放式双轴卷绕机编程开发实训_struct_HomeMode.st_0-9", "title": "开放式双轴卷绕机编程开发实训-struct\\HomeMode.st", "text": "TYPE HomeMode :\n(\n\tFAST_ZERO := 0,//Move with fast velocity onto the zero position\n\tFAST_BSLOW_STOP_S := 1,//Move with fast velocity onto the reference switch; invert and move with slow velocity out of the reference switch; stop;execute “set position” \n\tFAST_SLOW_STOP_S := 2,//Move with fast velocity onto the reference switch; move with slow velocity out of the reference switch; stop;execute “set position” \n\tFAST_BSLOW_I_STOP_S := 3,//Move with fast velocity onto the reference switch; invert and move with slow velocity out of the reference switch; wait for the index pulse; stop;execute “set position”  \n\tFAST_SLOW_I_STOP_S := 4//Move with fast velocity onto the reference switch; move with slow velocity out of the reference switch; wait for the index pulse; stop;execute “set position” \n);\nEND_TYPE", "metadata": [{"fpath_tuple": ["开放式双轴卷绕机编程开发实训", "struct\\HomeMode.st"], "repo": "开放式双轴卷绕机编程开发实训", "line_no": 0, "start_line_no": 0, "end_line_no": 9, "window_size": 50, "slice_size": 5}]}
