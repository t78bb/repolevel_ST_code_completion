{"_id": "PT1Filter_FB_PT1Filter.st_0-25", "title": "PT1Filter-FB_PT1Filter.st", "text": "FUNCTION_BLOCK FB_PT1Filter\nVAR_INPUT\n\trInput: REAL:= 0.0; \t\t\t\t\t\t\t\t//输入数据\n\trK: REAL:= 1.0; \t\t\t\t\t\t\t\t\t//增益\n\ttT: TIME; \t\t\t\t\t\t\t\t\t\t\t//时间参数\nEND_VAR\nVAR_OUTPUT\n\trOutput: REAL:= 0.0;  \t\t\t\t\t\t\t\t//输出数据\nEND_VAR\nVAR\n\t_rT: LREAL;\n\t_rY: LREAL;\nEND_VAR\n\nIF _rT = 0.0 THEN\n\trOutput:= rInput; \t\t\t\t\t\t\t\t\t//输出数据初始化\nEND_IF\n\n_rT:= TIME_TO_REAL(tT) /10;\t\t\t\t\t\t\t\t//10为PLC的采样周期，单位为ms\n\nIF ABS(rOutput - rInput) < 1E-6 THEN\n\trOutput:= rInput; \t\t\t\t\t\t\t\t\t//防止除零\nELSIF _rT > 0.0 THEN\n\trOutput:= (rK / _rT) * rInput + (1.0 - (1.0 / _rT)) * _rY;\nELSE\n", "metadata": [{"fpath_tuple": ["PT1Filter", "FB_PT1Filter.st"], "repo": "PT1Filter", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "PT1Filter_FB_PT1Filter.st_0-28", "title": "PT1Filter-FB_PT1Filter.st", "text": "FUNCTION_BLOCK FB_PT1Filter\nVAR_INPUT\n\trInput: REAL:= 0.0; \t\t\t\t\t\t\t\t//输入数据\n\trK: REAL:= 1.0; \t\t\t\t\t\t\t\t\t//增益\n\ttT: TIME; \t\t\t\t\t\t\t\t\t\t\t//时间参数\nEND_VAR\nVAR_OUTPUT\n\trOutput: REAL:= 0.0;  \t\t\t\t\t\t\t\t//输出数据\nEND_VAR\nVAR\n\t_rT: LREAL;\n\t_rY: LREAL;\nEND_VAR\n\nIF _rT = 0.0 THEN\n\trOutput:= rInput; \t\t\t\t\t\t\t\t\t//输出数据初始化\nEND_IF\n\n_rT:= TIME_TO_REAL(tT) /10;\t\t\t\t\t\t\t\t//10为PLC的采样周期，单位为ms\n\nIF ABS(rOutput - rInput) < 1E-6 THEN\n\trOutput:= rInput; \t\t\t\t\t\t\t\t\t//防止除零\nELSIF _rT > 0.0 THEN\n\trOutput:= (rK / _rT) * rInput + (1.0 - (1.0 / _rT)) * _rY;\nELSE\n\trOutput:= rInput;  \t\t\t\t\t\t\t\t\t//如果时间常数小于等于零请输出等于输入\nEND_IF\n_rY:= rOutput;", "metadata": [{"fpath_tuple": ["PT1Filter", "FB_PT1Filter.st"], "repo": "PT1Filter", "line_no": 5, "start_line_no": 0, "end_line_no": 28, "window_size": 50, "slice_size": 5}]}
{"_id": "PT1Filter_PLC_PRG.st_0-21", "title": "PT1Filter-PLC_PRG.st", "text": "PROGRAM PLC_PRG\nVAR\n    rInputValue : REAL;\n    nKp : BYTE := 1;\n    tTn : TIME := t#1s;\n    rOutValue : REAL;\n    FB_PT1Filter_0 : FB_PT1Filter;\nEND_VAR\n\n(* 执行加法运算 *)\nrInputValue := rInputValue + 0.5;\n\n(* 调用 PT1 滤波功能块 *)\nFB_PT1Filter_0(\n    rInput := rInputValue,\n    rK := nKp,\n    rT := tTn\n);\n\n(* 取滤波输出 *)\nrOutValue := FB_PT1Filter_0.rOutput;", "metadata": [{"fpath_tuple": ["PT1Filter", "PLC_PRG.st"], "repo": "PT1Filter", "line_no": 0, "start_line_no": 0, "end_line_no": 21, "window_size": 50, "slice_size": 5}]}
