{"_id": "Robotics_DynamicModel/0", "text": "METHOD CheckScrewAxis : BOOL", "metadata": {"task_id": "Robotics_DynamicModel/0", "ground_truth": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [°]\n\t\t\taxisPos.a1 := 0;\t/// [°]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [°]\n\t\t\taxisPos.a1 := 90;\t/// [°]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [°]\n\t\t\taxisPos.a1 := -50;\t/// [°]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n\t\t\tdone := TRUE;\n\tEND_CASE\nEND_WHILE\n\nCheckScrewAxis := done AND NOT error;", "fpath_tuple": ["Help_functions", "Test_DynModel_Scara2_Z_CheckScrewAxis.st"], "context_start_lineno": 0, "lineno": 2, "function_name": "CheckScrewAxis", "line_no": 2}}
{"_id": "Robotics_DynamicModel/1", "text": "METHOD CheckStandstillTorque : BOOL", "metadata": {"task_id": "Robotics_DynamicModel/1", "ground_truth": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s²]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\nEND_FOR", "fpath_tuple": ["Help_functions", "Test_DynModel_Scara2_Z_CheckStandstillTorque.st"], "context_start_lineno": 0, "lineno": 2, "function_name": "CheckStandstillTorque", "line_no": 2}}
