{"_id": "读写文件_FUN_ReadFile.st_0-25", "title": "读写文件-FUN\\ReadFile.st", "text": "FUNCTION_BLOCK ReadFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_0-30", "title": "读写文件-FUN\\ReadFile.st", "text": "FUNCTION_BLOCK ReadFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_0-35", "title": "读写文件-FUN\\ReadFile.st", "text": "FUNCTION_BLOCK ReadFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_0-40", "title": "读写文件-FUN\\ReadFile.st", "text": "FUNCTION_BLOCK ReadFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_0-45", "title": "读写文件-FUN\\ReadFile.st", "text": "FUNCTION_BLOCK ReadFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_0-50", "title": "读写文件-FUN\\ReadFile.st", "text": "FUNCTION_BLOCK ReadFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumRead := SysFileRead(hFile := fileHandle,pbyBuffer := ADR(ReadBuffer),ulSize := SIZEOF(ReadBuffer),pResult := ADR(nErrId));\n\t\tIF (nNumRead <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_5-55", "title": "读写文件-FUN\\ReadFile.st", "text": "VAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\ti\t:\tBYTE;//定义循环变量\n\t\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumRead := SysFileRead(hFile := fileHandle,pbyBuffer := ADR(ReadBuffer),ulSize := SIZEOF(ReadBuffer),pResult := ADR(nErrId));\n\t\tIF (nNumRead <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_10-60", "title": "读写文件-FUN\\ReadFile.st", "text": "\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tReadBuffer\t:\tARRAY[0..255] OF BYTE;//读数缓冲区\n\tnNumRead\t:\tUDINT;//读取文件的字节数\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumRead := SysFileRead(hFile := fileHandle,pbyBuffer := ADR(ReadBuffer),ulSize := SIZEOF(ReadBuffer),pResult := ADR(nErrId));\n\t\tIF (nNumRead <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n\t\tnErrId := SysFileClose(hFile := fileHandle);\n\t\tIF nErrId = 0 THEN\n\t\t\tfileHandle := 0;\n\t\t\tnState := 0;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_15-65", "title": "读写文件-FUN\\ReadFile.st", "text": "\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumRead := SysFileRead(hFile := fileHandle,pbyBuffer := ADR(ReadBuffer),ulSize := SIZEOF(ReadBuffer),pResult := ADR(nErrId));\n\t\tIF (nNumRead <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n\t\tnErrId := SysFileClose(hFile := fileHandle);\n\t\tIF nErrId = 0 THEN\n\t\t\tfileHandle := 0;\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbDone := TRUE;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_ReadFile.st_20-69", "title": "读写文件-FUN\\ReadFile.st", "text": "\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tnNumRead := 0;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_READ,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumRead := SysFileRead(hFile := fileHandle,pbyBuffer := ADR(ReadBuffer),ulSize := SIZEOF(ReadBuffer),pResult := ADR(nErrId));\n\t\tIF (nNumRead <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n\t\tnErrId := SysFileClose(hFile := fileHandle);\n\t\tIF nErrId = 0 THEN\n\t\t\tfileHandle := 0;\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbDone := TRUE;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\nEND_CASE", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\ReadFile.st"], "repo": "读写文件", "line_no": 20, "start_line_no": 20, "end_line_no": 69, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_0-25", "title": "读写文件-FUN\\WriteFile.st", "text": "FUNCTION_BLOCK WriteFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\twriteBuffer\t:\tARRAY[0..255] OF BYTE;//写数缓冲区\n\twriteNum\t:\tUDINT;//写入数据的字节数\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 0, "start_line_no": 0, "end_line_no": 25, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_0-30", "title": "读写文件-FUN\\WriteFile.st", "text": "FUNCTION_BLOCK WriteFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\twriteBuffer\t:\tARRAY[0..255] OF BYTE;//写数缓冲区\n\twriteNum\t:\tUDINT;//写入数据的字节数\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 5, "start_line_no": 0, "end_line_no": 30, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_0-35", "title": "读写文件-FUN\\WriteFile.st", "text": "FUNCTION_BLOCK WriteFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\twriteBuffer\t:\tARRAY[0..255] OF BYTE;//写数缓冲区\n\twriteNum\t:\tUDINT;//写入数据的字节数\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 10, "start_line_no": 0, "end_line_no": 35, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_0-40", "title": "读写文件-FUN\\WriteFile.st", "text": "FUNCTION_BLOCK WriteFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\twriteBuffer\t:\tARRAY[0..255] OF BYTE;//写数缓冲区\n\twriteNum\t:\tUDINT;//写入数据的字节数\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 15, "start_line_no": 0, "end_line_no": 40, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_0-45", "title": "读写文件-FUN\\WriteFile.st", "text": "FUNCTION_BLOCK WriteFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\twriteBuffer\t:\tARRAY[0..255] OF BYTE;//写数缓冲区\n\twriteNum\t:\tUDINT;//写入数据的字节数\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumWrite := SysFileWrite(hFile := fileHandle,pbyBuffer := ADR(writeBuffer),ulSize := writeNum,pResult := ADR(nErrId));\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 20, "start_line_no": 0, "end_line_no": 45, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_0-50", "title": "读写文件-FUN\\WriteFile.st", "text": "FUNCTION_BLOCK WriteFile\nVAR_INPUT\n\tbExec\t:\tBOOL;//功能块触发变量\n\twriteBuffer\t:\tARRAY[0..255] OF BYTE;//写数缓冲区\n\twriteNum\t:\tUDINT;//写入数据的字节数\n\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumWrite := SysFileWrite(hFile := fileHandle,pbyBuffer := ADR(writeBuffer),ulSize := writeNum,pResult := ADR(nErrId));\n\t\tIF (nNumWrite <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 25, "start_line_no": 0, "end_line_no": 50, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_5-55", "title": "读写文件-FUN\\WriteFile.st", "text": "\tfileName\t:\tSTRING;//文件的路径\nEND_VAR\nVAR\n\tnState\t:\tBYTE;\n\tfileHandle\t:\tUDINT;//文件句柄\n\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumWrite := SysFileWrite(hFile := fileHandle,pbyBuffer := ADR(writeBuffer),ulSize := writeNum,pResult := ADR(nErrId));\n\t\tIF (nNumWrite <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 5, "start_line_no": 5, "end_line_no": 55, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_10-60", "title": "读写文件-FUN\\WriteFile.st", "text": "\tnNumWrite\t:\tUDINT;//写入文件的字节数\n\ti\t:\tBYTE;//定义循环变量\n\tfbRtrig\t:\tR_TRIG;//实例化上升沿触发功能块\nEND_VAR\nVAR_OUTPUT\n\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumWrite := SysFileWrite(hFile := fileHandle,pbyBuffer := ADR(writeBuffer),ulSize := writeNum,pResult := ADR(nErrId));\n\t\tIF (nNumWrite <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n\t\tnErrId := SysFileClose(hFile := fileHandle);\n\t\tIF nErrId = 0 THEN\n\t\t\tfileHandle := 0;\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 10, "start_line_no": 10, "end_line_no": 60, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_15-65", "title": "读写文件-FUN\\WriteFile.st", "text": "\tbDone\t:\tBOOL;//写入成功\n\tbBusy\t:\tBOOL;//写入忙\n\tbErr\t:\tBOOL;//写入出错\n\tnErrId\t:\tUDINT;//错误代码\nEND_VAR\n\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumWrite := SysFileWrite(hFile := fileHandle,pbyBuffer := ADR(writeBuffer),ulSize := writeNum,pResult := ADR(nErrId));\n\t\tIF (nNumWrite <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n\t\tnErrId := SysFileClose(hFile := fileHandle);\n\t\tIF nErrId = 0 THEN\n\t\t\tfileHandle := 0;\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbDone := TRUE;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 15, "start_line_no": 15, "end_line_no": 65, "window_size": 50, "slice_size": 5}]}
{"_id": "读写文件_FUN_WriteFile.st_20-68", "title": "读写文件-FUN\\WriteFile.st", "text": "\nCASE nState OF\n\t0:\n\t\tfbRtrig(CLK := bExec);//等待用户触发调用\n\t\tIF fbRtrig.Q THEN\n\t\t\tnState := 1;\n\t\t\tbBusy := TRUE;\n\t\t\tbErr := FALSE;\n\t\t\tnErrId := 0;\n\t\t\tbDone := FALSE;\n\t\tEND_IF\n\t1:\n\t\t//打开文件\n\t\tfileHandle := SysFileOpen(szFile := fileName,am := AM_WRITE,pResult := ADR(nErrId));\n\t\tIF (fileHandle <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t2:\n\t\t//写数据到文件\n\t\tnNumWrite := SysFileWrite(hFile := fileHandle,pbyBuffer := ADR(writeBuffer),ulSize := writeNum,pResult := ADR(nErrId));\n\t\tIF (nNumWrite <> 0) AND (nErrId = 0) THEN\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\n\t3:\n\t\t//关闭文件\n\t\tnErrId := SysFileClose(hFile := fileHandle);\n\t\tIF nErrId = 0 THEN\n\t\t\tfileHandle := 0;\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbDone := TRUE;\n\t\tEND_IF\n\t\tIF nErrId <> 0 THEN\n\t\t\tnState := 0;\n\t\t\tbBusy := FALSE;\n\t\t\tbErr := TRUE; \n\t\tEND_IF\nEND_CASE", "metadata": [{"fpath_tuple": ["读写文件", "FUN\\WriteFile.st"], "repo": "读写文件", "line_no": 20, "start_line_no": 20, "end_line_no": 68, "window_size": 50, "slice_size": 5}]}
