[["```\nVAR\n\trTerMin: REAL;\n\trTerMax: REAL;\n\trPhyRange: REAL;\n\trTerRange: REAL;\n\trTerOutput: REAL;\n\tiScaledOutput: INT;\nEND_VAR\n\n(* Step 1: Clamp rOutput to the range [rPhyMin, rPhyMax] *)\nIF rOutput < rPhyMin THEN\n\trOutput := rPhyMin;\nELSIF rOutput > rPhyMax THEN\n\trOutput := rPhyMax;\nEND_IF;\n\n(* Step 2: Determine terminal-specific range *)\nrTerMax := 32768.0;\nCASE eTerminal OF\n\teTerminal_0mA_20mA: rTerMin := 0.0;\n\teTerminal_4mA_20mA: rTerMin := 0.0;\n\teTerminal_0V_10V: rTerMin := 0.0;\n\teTerminal_m10V_10V: rTerMin := -32768.0;\nELSE\n\trTerMin := -32768.0;\nEND_CASE;\n\n(* Step 3: Calculate physical and terminal ranges *)\nrPhyRange := rPhyMax - rPhyMin;\nrTerRange := rTerMax - rTerMin;\n\n(* Step 4: Perform scaling calculation if ranges are valid *)\nIF rPhyRange > 0.0 AND rTerRange > 0.0 THEN\n\trTerOutput := rTerMin + (rTerRange * (rOutput - rPhyMin) / rPhyRange);\nELSE\n\trTerOutput := 0.0;\nEND_IF;\n\n(* Step 5: Round the result and return as integer *)\niScaledOutput := ROUND(rTerOutput);\nRETURN iScaledOutput;\n```"]]