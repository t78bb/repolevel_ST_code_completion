This is the known requirement information for the function to be completed:
This code is intended to implement an elevator door control system that manages door opening and closing processes based on arrival at the target floor and door sensor states.
This provides you with a plan of implementation steps for the function to be completed. Subsequent ST code must strictly follow this plan and must not deviate from the core logic. The following is the plan of implementation steps:
功能规划:
1. 检查 `bArrivedAtTarget`，如果为 TRUE，触发开门逻辑并置 `bOpenDoor` 为 TRUE，同时置 `bCloseDoor` 为 FALSE。
2. 检查 `bDoorClosed`，如果为 FALSE，确认门正在打开状态，置 `bDoorOpen` 为 TRUE。
3. 当 `bDoorOpen` 为 TRUE 且 `bArrivedAtTarget` 为 FALSE，触发关门逻辑，置 `bCloseDoor` 为 TRUE，同时置 `bOpenDoor` 为 FALSE。
4. 检查门状态是否完全关闭（通过 `bDoorClosed` 的状态），如果为 TRUE，置 `bDoorReady` 为 TRUE，表示门已关闭并准备好下一层操作。
5. 如果发生异常（如紧急停止），重置所有输出变量 `bOpenDoor`, `bCloseDoor`, `bDoorOpen`, `bDoorReady` 为 FALSE，确保安全状态。
Continue writing the following code:

```
# Here are some relevant code fragments from other files of the repo:
# --------------------------------------------------
# the below code fragment can be found in:
# elevator-FUN\FB_ElevatorDoorController.st
# --------------------------------------------------
# FUNCTION_BLOCK FB_ElevatorDoorController
# VAR_INPUT
# 	bArrivedAtTarget	:	BOOL;		// 到达目标楼层
# 	bDoorClosed			:	BOOL;		// 门已关闭传感器
# END_VAR
# VAR_OUTPUT
# 	bOpenDoor			:	BOOL;		// 开门命令
# 	bCloseDoor			:	BOOL;		// 关门命令
# 	bDoorOpen			:	BOOL;		// 门打开状态
# 	bDoorReady			:	BOOL;		// 门准备好（可以移动）
# END_VAR
# VAR
# 	fbDoorTimer			:	TON;		// 开门延时定时器
# 	fbCloseDoorTimer	:	TON;		// 关门延时定时器
# 	nState				:	INT;		// 状态机
# END_VAR
# 
# CASE nState OF
# 	0: // 空闲状态
# 		bOpenDoor := FALSE;
# 		bCloseDoor := FALSE;
# 		bDoorReady := TRUE;
# 		
# 		IF bArrivedAtTarget THEN
# 			nState := 1; // 开始开门流程
# 		END_IF
# 		
# 	1: // 开门延时
# 		bCloseDoor := FALSE;
# 		bDoorReady := FALSE;
# 
# --------------------------------------------------
# the below code fragment can be found in:
# elevator-FUN\FB_ElevatorDoorController.st
# --------------------------------------------------
# FUNCTION_BLOCK FB_ElevatorDoorController
# VAR_INPUT
# 	bArrivedAtTarget	:	BOOL;		// 到达目标楼层
# 	bDoorClosed			:	BOOL;		// 门已关闭传感器
# END_VAR
# VAR_OUTPUT
# 	bOpenDoor			:	BOOL;		// 开门命令
# 	bCloseDoor			:	BOOL;		// 关门命令
# 	bDoorOpen			:	BOOL;		// 门打开状态
# 	bDoorReady			:	BOOL;		// 门准备好（可以移动）
# END_VAR
# VAR
# 	fbDoorTimer			:	TON;		// 开门延时定时器
# 	fbCloseDoorTimer	:	TON;		// 关门延时定时器
# 	nState				:	INT;		// 状态机
# END_VAR
# 
# CASE nState OF
# 	0: // 空闲状态
# 		bOpenDoor := FALSE;
# 		bCloseDoor := FALSE;
# 		bDoorReady := TRUE;
# 		
# 		IF bArrivedAtTarget THEN
# 			nState := 1; // 开始开门流程
# 		END_IF
# 		
# 	1: // 开门延时
# 		bCloseDoor := FALSE;
# 		bDoorReady := FALSE;
# 		fbDoorTimer(IN := TRUE, PT := T#2S);
# 		
# 		IF fbDoorTimer.Q THEN
# 			fbDoorTimer(IN := FALSE);
# 			nState := 2;
# 
# --------------------------------------------------
# the below code fragment can be found in:
# elevator-FUN\FB_ElevatorDoorController.st
# --------------------------------------------------
# FUNCTION_BLOCK FB_ElevatorDoorController
# VAR_INPUT
# 	bArrivedAtTarget	:	BOOL;		// 到达目标楼层
# 	bDoorClosed			:	BOOL;		// 门已关闭传感器
# END_VAR
# VAR_OUTPUT
# 	bOpenDoor			:	BOOL;		// 开门命令
# 	bCloseDoor			:	BOOL;		// 关门命令
# 	bDoorOpen			:	BOOL;		// 门打开状态
# 	bDoorReady			:	BOOL;		// 门准备好（可以移动）
# END_VAR
# VAR
# 	fbDoorTimer			:	TON;		// 开门延时定时器
# 	fbCloseDoorTimer	:	TON;		// 关门延时定时器
# 	nState				:

FUNCTION_BLOCK FB_ElevatorDoorController
VAR_INPUT
	bArrivedAtTarget	:	BOOL;		// 到达目标楼层
	bDoorClosed			:	BOOL;		// 门已关闭传感器
END_VAR
VAR_OUTPUT
	bOpenDoor			:	BOOL;		// 开门命令
	bCloseDoor			:	BOOL;		// 关门命令
	bDoorOpen			:	BOOL;		// 门打开状态
	bDoorReady			:	BOOL;		// 门准备好（可以移动）
END_VAR
```