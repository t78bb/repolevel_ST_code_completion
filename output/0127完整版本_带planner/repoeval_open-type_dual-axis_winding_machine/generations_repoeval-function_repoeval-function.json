[["```\nVAR\nEND_VAR\n\nIF lH <> 0 THEN\n    lF := 9.8 * lM / (2 * COS(ATAN(lL / lH)));\nELSE\n    lF := 0;\nEND_IF;\n```"], ["```\nVAR\n    lDeltaH : LREAL;          // \u8f74\u4f4d\u7f6e\u53d8\u5316\u91cf\n    lEffectiveHeight : LREAL; // \u603b\u7684\u6709\u6548\u9ad8\u5ea6\n    lRadius : LREAL;          // \u8ba1\u7b97\u5f97\u5230\u7684\u534a\u5f84\u503c\nEND_VAR\n\n// \u8ba1\u7b97\u8f74\u4f4d\u7f6e\u53d8\u5316\u91cf\nlDeltaH := ABS(lHnew - lHold);\n\n// \u8ba1\u7b97\u603b\u7684\u6709\u6548\u9ad8\u5ea6\nlEffectiveHeight := lDeltaH + lTk + lOffset;\n\n// \u6839\u636e\u4e24\u8f74\u4e2d\u5fc3\u8ddd\u79bb\u548c\u6709\u6548\u9ad8\u5ea6\u8ba1\u7b97\u534a\u5f84\nlRadius := SQRT(EXPT(lD / 2, 2) + EXPT(lEffectiveHeight, 2));\n\n// \u8fd4\u56de\u8ba1\u7b97\u5f97\u5230\u7684\u534a\u5f84\u503c\nF_CalculateRadius := lRadius;\nRETURN;\n```"], ["```\nVAR\n    lDeltaPos       : LREAL;    // \u4f4d\u7f6e\u53d8\u5316\u91cf\n    lDeltaRadius    : LREAL;    // \u534a\u5f84\u53d8\u5316\u91cf\n    lCompFactor     : LREAL;    // \u901f\u5ea6\u8865\u507f\u7cfb\u6570\n    lAdjustedRadius : LREAL;    // \u8c03\u6574\u540e\u7684\u534a\u5f84\nEND_VAR\n\n// 1. \u8ba1\u7b97\u4f4d\u7f6e\u53d8\u5316\u91cf\nlDeltaPos := lNewPos - lOldPos;\n\n// 2. \u5224\u65ad\u8fd0\u52a8\u65b9\u5411\u5e76\u6821\u6b63\u4f4d\u7f6e\u53d8\u5316\u91cf\nIF lDeltaPos = 0 THEN\n    lDeltaPos := 0; // \u4fdd\u6301\u4e0d\u53d8\nELSIF lDeltaPos < 0 THEN\n    lDeltaPos := -ABS(lDeltaPos); // \u786e\u4fdd\u65b9\u5411\u6b63\u786e\nELSE\n    lDeltaPos := ABS(lDeltaPos);\nEND_IF\n\n// 3. \u8ba1\u7b97\u534a\u5f84\u53d8\u5316\u91cf\nlDeltaRadius := lDeltaPos * lTk;\n\n// 4. \u6839\u636e\u653e\u5377\u6216\u6536\u5377\u903b\u8f91\u8c03\u6574\u534a\u5f84\nIF bUnwinding THEN\n    lAdjustedRadius := lRadius - lDeltaRadius; // \u653e\u5377\uff1a\u534a\u5f84\u51cf\u5c0f\nELSE\n    lAdjustedRadius := lRadius + lDeltaRadius; // \u6536\u5377\uff1a\u534a\u5f84\u589e\u52a0\nEND_IF\n\n// \u907f\u514d\u534a\u5f84\u8fc7\u5c0f\u5bfc\u81f4\u9664\u96f6\u9519\u8bef\nIF lAdjustedRadius < 0.01 THEN\n    lAdjustedRadius := 0.01;\nEND_IF\n\n// 5. \u8ba1\u7b97\u901f\u5ea6\u8865\u507f\u7cfb\u6570\nlCompFactor := lRadius / lAdjustedRadius;\n\n// 6. \u4f7f\u7528\u8865\u507f\u7cfb\u6570\u8c03\u6574\u901f\u5ea6\nF_CompensateVelocity := lCurrentVel * lCompFactor;\nRETURN;\n```"], ["```\nVAR\n\t_nState\t\t:\tUSINT;\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t:\tR_TRIG;\n\t_fbFtrig\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_xHomeActive\t:\tBOOL;\n\t_xAbortActive\t:\tBOOL;\nEND_VAR\n\nIF _xHome THEN\n\t_xHomeActive := TRUE;\n\t_xAbortActive := FALSE;\n\t_xBusy := TRUE;\n\t_xDone := FALSE;\n\t_xErr := FALSE;\n\t_iErrId := 0;\n\t_nState := 1;\nELSIF _xAbort THEN\n\t_xAbortActive := TRUE;\n\t_xHomeActive := FALSE;\n\t_xBusy := FALSE;\n\t_xDone := FALSE;\n\t_xErr := FALSE;\n\t_iErrId := 0;\n\t_nState := 0;\nEND_IF\n\nCASE _nState OF\n\t0: // Idle state\n\t\tIF _xAbortActive THEN\n\t\t\t_fbHalt.Execute := TRUE;\n\t\t\t_fbHalt.Axis := _Axis;\n\t\t\t_fbHalt.Deceleration := _fHomeDec;\n\t\t\t_fbHalt.Execute := FALSE;\n\t\t\t_xAbortActive := FALSE;\n\t\tEND_IF\n\n\t1: // Start homing\n\t\tIF _xHomeActive THEN\n\t\t\t_fbMoveVel.Execute := TRUE;\n\t\t\t_fbMoveVel.Axis := _Axis;\n\t\t\t_fbMoveVel.Velocity := _fFastHomeVel;\n\t\t\t_fbMoveVel.Acceleration := _fHomeAcc;\n\t\t\t_fbMoveVel.Deceleration := _fHomeDec;\n\t\t\t_fbMoveVel.Direction := _nDirection;\n\t\t\tIF _fbMoveVel.Done THEN\n\t\t\t\t_fbMoveVel.Execute := FALSE;\n\t\t\t\t_nState := 2;\n\t\t\tEND_IF\n\t\tEND_IF\n\n\t2: // Monitor reference switch\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_fbMoveVel.Execute := FALSE;\n\t\t\t_fbMoveAbs.Execute := TRUE;\n\t\t\t_fbMoveAbs.Axis := _Axis;\n\t\t\t_fbMoveAbs.Position := _fHomePos;\n\t\t\t_fbMoveAbs.Velocity := _fSlowHomeVel;\n\t\t\t_fbMoveAbs.Acceleration := _fHomeAcc;\n\t\t\t_fbMoveAbs.Deceleration := _fHomeDec;\n\t\t\tIF _fbMoveAbs.Done THEN\n\t\t\t\t_fbMoveAbs.Execute := FALSE;\n\t\t\t\t_nState := 3;\n\t\t\tEND_IF\n\t\tEND_IF\n\n\t3: // Monitor index pulse\n\t\tIF _xIndexPulse THEN\n\t\t\t_fbSetPos.Execute := TRUE;\n\t\t\t_fbSetPos.Axis := _Axis;\n\t\t\t_fbSetPos.Position := 0.0;\n\t\t\tIF _fbSetPos.Done THEN\n\t\t\t\t_fbSetPos.Execute := FALSE;\n\t\t\t\t_xDone := TRUE;\n\t\t\t\t_xBusy := FALSE;\n\t\t\t\t_nState := 0;\n\t\t\tEND_IF\n\t\tEND_IF\n\n\tELSE\n\t\t_xErr := TRUE;\n\t\t_iErrId := 1; // Unknown state error\n\t\t_xBusy := FALSE;\n\t\t_nState := 0;\nEND_CASE\n```"], ["```\nVAR\nEND_VAR\n\nCASE iStatus OF\n    0:\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n        Y5 := FALSE;\n        Y6 := FALSE;\n    1:\n        Y1 := TRUE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n        Y5 := FALSE;\n        Y6 := FALSE;\n    2:\n        Y1 := FALSE;\n        Y2 := TRUE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n        Y5 := FALSE;\n        Y6 := FALSE;\n    3:\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := TRUE;\n        Y4 := FALSE;\n        Y5 := FALSE;\n        Y6 := FALSE;\n    4:\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := TRUE;\n        Y5 := FALSE;\n        Y6 := FALSE;\n    5:\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n        Y5 := TRUE;\n        Y6 := FALSE;\n    6:\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n        Y5 := FALSE;\n        Y6 := TRUE;\n    ELSE\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n        Y5 := FALSE;\n        Y6 := FALSE;\nEND_CASE;\n```"]]