[["```\nVAR\n    InternalState: INT;\n    GroundFloorState: INT;\n    TopFloorState: INT;\n    MQTTMessage: STRING;\nEND_VAR\n\nGroundFloor();\nTopFloor();\n\nIF InternalState = 0 THEN\n    GroundFloorState := GroundFloor.LivingRoom.Lamp1Out + GroundFloor.LivingRoom.Lamp2Out + GroundFloor.LivingRoom.Lamp3Out;\n    TopFloorState := TopFloor.MainBath.Lamp1Out + TopFloor.SleepingRoom.Lamp1Out;\n    InternalState := 1;\nEND_IF\n\nIF InternalState = 1 THEN\n    IF GroundFloorState > 0 THEN\n        MQTTMessage := 'Ground Floor Active';\n    ELSIF TopFloorState > 0 THEN\n        MQTTMessage := 'Top Floor Active';\n    ELSE\n        MQTTMessage := 'No Activity';\n    END_IF\n    InternalState := 2;\nEND_IF\n\nIF InternalState = 2 THEN\n    // Simulate sending MQTT message\n    MQTT.CallbackCollector(MQTTMessage);\n    InternalState := 3;\nEND_IF\n\nIF InternalState = 3 THEN\n    // Reset states for next operation\n    GroundFloorState := 0;\n    TopFloorState := 0;\n    InternalState := 0;\nEND_IF\n```"], ["```\nVAR\n    connectionStatus: BOOL;\n    reconnectTimer: TON;\n    messageReceived: BOOL;\n    receivedMessage: STRING(255);\nEND_VAR\n\nIF NOT init THEN\n    init := TRUE;\n    Subscriber.SetMqttInOut(MQTT_IN_OUT := GVL_MQTT.MQTT_IN_OUT);\n    SubscribeTopic := InstanceName.GetInstanceTopic();\n    birthTopic := SubscribeTopic;\n    found := CommonTypesAndFunctions.find(str1 := ADR(SubscribeTopic), str2 := ADR('/'));\n    found := found + 1 + CommonTypesAndFunctions.find(str1 := ADR(SubscribeTopic[found + 1]), str2 := ADR('/'));\n    pt := ADR(SubscribeTopic[found + 1]);\n    pt^ := 'Receive/#';\n    GVL_MQTT.MQTT_IN_OUT.ClientID := CONCAT('CodesysMqtt', TO_STRING(TICKS.GetTick(xDummy := TRUE)));\nEND_IF\n\nGVL_MQTT.MQTT_IN_OUT.clientFB(\n    MQTT_IN_OUT := GVL_MQTT.MQTT_IN_OUT,\n    xConnect := TRUE,\n    xDisconnect := FALSE,\n    xPublish := FALSE,\n    xSubscribe := TRUE,\n    xUnsubscribe := FALSE\n);\n\nconnectionStatus := GVL_MQTT.MQTT_IN_OUT.clientFB.xConnected;\n\nconnectRising(CLK := connectionStatus);\n\nIF connectRising.Q THEN\n    birthMessage.SetMqttInOut(MQTT_IN_OUT := GVL_MQTT.MQTT_IN_OUT);\n    birthMessage.SetTopic(Topic := birthTopic);\n    birthMessage.SetPayload(Payload := 'Device Online');\n    birthMessage.Publish();\nEND_IF\n\nSubscriber.Subscribe(Topic := SubscribeTopic);\n\nmessageReceived := Subscriber.GetMessage(Topic := SubscribeTopic, Payload := receivedMessage);\n\nIF messageReceived THEN\n    // Handle received message (e.g., pass to Collector callback mechanism)\n    xxx := ADR(receivedMessage);\nEND_IF\n\nreconnectTimer(IN := NOT connectionStatus, PT := T#10S);\n\nIF reconnectTimer.Q THEN\n    GVL_MQTT.MQTT_IN_OUT.clientFB.xConnect := TRUE;\nEND_IF\n```"]]