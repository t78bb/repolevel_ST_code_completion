[["```\nVAR\n\tfbPower1\t\t:\tMC_Power;\t\t//\u8f741\u7535\u6e90\u63a7\u5236\n\tfbPower2\t\t:\tMC_Power;\t\t//\u8f742\u7535\u6e90\u63a7\u5236\nEND_VAR\n\nIF NOT bEnable THEN\n\tbAxis1Ready := FALSE;\n\tbAxis2Ready := FALSE;\n\tbBothReady := FALSE;\n\tbError := FALSE;\n\tRETURN;\nEND_IF\n\n// \u6267\u884c\u8f741\u7535\u6e90\u63a7\u5236\nfbPower1(\n\tAxis := Axis1,\n\tEnable := bEnable,\n\tbDriveStart := TRUE,\n\tbRegulatorOn := TRUE\n);\n\n// \u6267\u884c\u8f742\u7535\u6e90\u63a7\u5236\nfbPower2(\n\tAxis := Axis2,\n\tEnable := bEnable,\n\tbDriveStart := TRUE,\n\tbRegulatorOn := TRUE\n);\n\n// \u68c0\u67e5\u8f741\u72b6\u6001\nIF NOT fbPower1.Status OR fbPower1.Error THEN\n\tbAxis1Ready := FALSE;\n\tbError := TRUE;\n\tRETURN;\nELSE\n\tbAxis1Ready := TRUE;\nEND_IF\n\n// \u68c0\u67e5\u8f742\u72b6\u6001\nIF NOT fbPower2.Status OR fbPower2.Error THEN\n\tbAxis2Ready := FALSE;\n\tbError := TRUE;\n\tRETURN;\nELSE\n\tbAxis2Ready := TRUE;\nEND_IF\n\n// \u66f4\u65b0\u4e24\u8f74\u51c6\u5907\u72b6\u6001\nbBothReady := bAxis1Ready AND bAxis2Ready;\n\n// \u68c0\u67e5\u6700\u7ec8\u72b6\u6001\nIF bBothReady AND NOT bError THEN\n\tRETURN;\nEND_IF\n```"], ["```\nVAR\n\tfbGearIn\t\t\t:\tMC_GearIn;\t\t//\u9f7f\u8f6e\u8026\u5408\u529f\u80fd\u5757\n\tfbGearOut\t\t\t:\tMC_GearOut;\t\t//\u9f7f\u8f6e\u89e3\u8026\u529f\u80fd\u5757\n\tbLastCouple\t\t\t:\tBOOL;\t\t\t//\u4e0a\u6b21\u8026\u5408\u72b6\u6001\n\tbCoupleRising\t\t:\tBOOL;\t\t\t//\u8026\u5408\u4e0a\u5347\u6cbf\n\tbCoupleFalling\t\t:\tBOOL;\t\t\t//\u8026\u5408\u4e0b\u964d\u6cbf\nEND_VAR\n\n// \u68c0\u6d4b\u8026\u5408\u4fe1\u53f7\u7684\u8fb9\u6cbf\nbCoupleRising := bCouple AND NOT bLastCouple;\nbCoupleFalling := NOT bCouple AND bLastCouple;\nbLastCouple := bCouple;\n\n// \u8026\u5408\u903b\u8f91\nIF bCouple THEN\n\tIF bCoupleRising THEN\n\t\t// \u914d\u7f6e\u9f7f\u8f6e\u8026\u5408\u529f\u80fd\u5757\n\t\tfbGearIn.Master := Master;\n\t\tfbGearIn.Slave := Slave;\n\t\tfbGearIn.RatioNumerator := nRatioNumerator;\n\t\tfbGearIn.RatioDenominator := nRatioDenominator;\n\t\tfbGearIn.Acceleration := rAcceleration;\n\t\tfbGearIn.Deceleration := rDeceleration;\n\t\tfbGearIn.Execute := TRUE;\n\tEND_IF\n\t\n\t// \u68c0\u67e5\u8026\u5408\u72b6\u6001\n\tIF fbGearIn.Done THEN\n\t\tbInGear := TRUE;\n\t\tbCouplingDone := TRUE;\n\t\tbError := FALSE;\n\t\tnErrorID := 0;\n\tELSIF fbGearIn.Error THEN\n\t\tbError := TRUE;\n\t\tnErrorID := fbGearIn.ErrorID;\n\tEND_IF\nELSE\n\t// \u89e3\u8026\u903b\u8f91\n\tIF bCoupleFalling THEN\n\t\t// \u914d\u7f6e\u9f7f\u8f6e\u89e3\u8026\u529f\u80fd\u5757\n\t\tfbGearOut.Master := Master;\n\t\tfbGearOut.Slave := Slave;\n\t\tfbGearOut.Execute := TRUE;\n\tEND_IF\n\t\n\t// \u68c0\u67e5\u89e3\u8026\u72b6\u6001\n\tIF fbGearOut.Done THEN\n\t\tbInGear := FALSE;\n\t\tbDecouplingDone := TRUE;\n\t\tbError := FALSE;\n\t\tnErrorID := 0;\n\tELSIF fbGearOut.Error THEN\n\t\tbError := TRUE;\n\t\tnErrorID := fbGearOut.ErrorID;\n\tEND_IF\nEND_IF\n```"], ["```\nVAR\n\tfbPowerMgr\t\t\t:\tFB_DualAxisPower;\t//\u53cc\u8f74\u7535\u6e90\u7ba1\u7406\n\tfbGearCtrl\t\t\t:\tFB_GearCoupling;\t//\u9f7f\u8f6e\u8026\u5408\u63a7\u5236\n\tfbMoveVel\t\t\t:\tMC_MoveVelocity;\t//\u901f\u5ea6\u8fd0\u52a8\n\tfbHaltMaster\t\t:\tMC_Halt;\t\t\t//\u4e3b\u8f74\u505c\u6b62\n\tfbHaltSlave\t\t\t:\tMC_Halt;\t\t\t//\u4ece\u8f74\u505c\u6b62\n\tfbStartRtrig\t\t:\tR_TRIG;\t\t\t\t//\u542f\u52a8\u4e0a\u5347\u6cbf\n\tfbStopRtrig\t\t\t:\tR_TRIG;\t\t\t\t//\u505c\u6b62\u4e0a\u5347\u6cbf\n\tnState\t\t\t\t:\tBYTE;\t\t\t\t//\u5185\u90e8\u72b6\u6001\u673a\n\trSlaveVelocity\t\t:\tREAL;\t\t\t\t//\u4ece\u8f74\u901f\u5ea6\nEND_VAR\n\nfbStartRtrig(CLK := bStart);\nfbStopRtrig(CLK := bStop);\n\nIF fbStopRtrig.Q THEN\n\t// \u505c\u6b62\u4fe1\u53f7\u4f18\u5148\u5904\u7406\n\tfbHaltMaster(Execute := TRUE, Axis := MasterAxis, Deceleration := rDeceleration);\n\tfbHaltSlave(Execute := TRUE, Axis := SlaveAxis, Deceleration := rDeceleration);\n\tbRunning := FALSE;\n\tbReady := FALSE;\n\tnState := 0;\n\tRETURN;\nEND_IF\n\nIF fbStartRtrig.Q THEN\n\t// \u68c0\u67e5\u8f93\u5165\u53c2\u6570\u5408\u6cd5\u6027\n\tIF nRatioNumerator = 0 OR nRatioDenominator = 0 OR (nDirection <> 1 AND nDirection <> -1) THEN\n\t\tbError := TRUE;\n\t\tRETURN;\n\tEND_IF;\n\n\t// \u8ba1\u7b97\u4ece\u8f74\u901f\u5ea6\n\trSlaveVelocity := rVelocity * nRatioNumerator / nRatioDenominator * nDirection;\n\n\t// \u8bbe\u7f6e\u4e3b\u8f74\u548c\u4ece\u8f74\u8fd0\u52a8\u53c2\u6570\n\tfbMoveVel(Execute := TRUE, Axis := MasterAxis, Velocity := rVelocity, Acceleration := rAcceleration, Deceleration := rDeceleration);\n\tfbGearCtrl(Execute := TRUE, Master := MasterAxis, Slave := SlaveAxis, RatioNumerator := nRatioNumerator, RatioDenominator := nRatioDenominator);\n\n\t// \u66f4\u65b0\u72b6\u6001\n\tbRunning := TRUE;\n\tbReady := FALSE;\n\tnState := 1;\n\tRETURN;\nEND_IF;\n\nCASE nState OF\n\t0: // \u7b49\u5f85\u8f74\u51c6\u5907\u5c31\u7eea\n\t\tIF fbPowerMgr.Axis1Ready AND fbPowerMgr.Axis2Ready THEN\n\t\t\tbReady := TRUE;\n\t\tEND_IF;\n\n\t1: // \u8fd0\u884c\u4e2d\n\t\tIF NOT fbMoveVel.Busy THEN\n\t\t\tbRunning := FALSE;\n\t\t\tbReady := TRUE;\n\t\t\tnState := 0;\n\t\tEND_IF;\n\n\t\tIF fbMoveVel.Error OR fbGearCtrl.Error THEN\n\t\t\tbError := TRUE;\n\t\t\tfbHaltMaster(Execute := TRUE, Axis := MasterAxis, Deceleration := rDeceleration);\n\t\t\tfbHaltSlave(Execute := TRUE, Axis := SlaveAxis, Deceleration := rDeceleration);\n\t\t\tnState := 0;\n\t\tEND_IF;\nEND_CASE;\n```"]]