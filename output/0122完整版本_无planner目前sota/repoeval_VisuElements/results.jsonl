{"requirement": "This code is intended to implement a mouse event handler that detects and processes single clicks, double clicks, right clicks, middle clicks, and mouse movement events, providing the event type and position.", "provide_code": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR", "docs": [{"text": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR\n\nVAR\n    LeftClickTimer : TON;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR\n\nVAR\n    LeftClickTimer : TON;\n    xLeftClickOld : BOOL;\n    iClickCount : INT := 0;\n    xEventProcessed : BOOL := FALSE;\nEND_VAR\n\n(* Reset event state *)\neMouseEvent := 0;\nxEventActive := FALSE;\n\n(* Handle left click events (single/double click) *)\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    xLeftClickOld : BOOL;\n    iClickCount : INT := 0;\n    xEventProcessed : BOOL := FALSE;\nEND_VAR\n\n(* Reset event state *)\neMouseEvent := 0;\nxEventActive := FALSE;\n\n(* Handle left click events (single/double click) *)\nIF xLeftClick AND NOT xLeftClickOld THEN\n    (* First click detected *)\n    IF iClickCount = 0 THEN\n        LeftClickTimer(IN:=TRUE, PT:=tDblClickTime);\n        iClickCount := 1;\n    ELSE\n        (* Second click within time window *)\n        LeftClickTimer(IN:=FALSE);\n        eMouseEvent := 2; (* Double click *)\n        rEventX := rMouseX;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "        rEventY := rMouseY;\n        xEventActive := TRUE;\n        iClickCount := 0;\n        xEventProcessed := TRUE;\n    END_IF\nELSIF NOT xLeftClick AND xLeftClickOld THEN\n    (* Left button released *)\n    IF iClickCount = 1 AND NOT xEventProcessed THEN\n        LeftClickTimer();\n        IF NOT LeftClickTimer.Q THEN\n            (* Still waiting for potential double click *)\n            (* Will be handled by timer logic below *)\n        END_IF\n    END_IF\nEND_IF\n\n(* Check for double click timeout *)\nIF LeftClickTimer.Q AND iClickCount = 1 AND NOT xEventProcessed THEN\n    (* Timeout - single click confirmed *)\n    LeftClickTimer(IN:=FALSE);\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    rEventX : REAL;\n    rEventY : REAL;\n    xEventActive : BOOL;\nEND_VAR\n\n(* Handle various mouse events using function block *)\nfbMouseHandler(\n    xLeftClick := xLeftClick,\n    xRightClick := xRightClick,\n    xMiddleClick := xMiddleClick,\n    xMouseMove := xMouseMove,\n    rMouseX := rMouseX,\n    rMouseY := rMouseY,\n    tDblClickTime := T#300MS\n);\n\neMouseEvent := fbMouseHandler.eMouseEvent;\nrEventX := fbMouseHandler.rEventX;\nrEventY := fbMouseHandler.rEventY;\nxEventActive := fbMouseHandler.xEventActive;\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "IF xLeftClick AND NOT xLeftClickOld THEN\n    (* First click detected *)\n    IF iClickCount = 0 THEN\n        LeftClickTimer(IN:=TRUE, PT:=tDblClickTime);\n        iClickCount := 1;\n    ELSE\n        (* Second click within time window *)\n        LeftClickTimer(IN:=FALSE);\n        eMouseEvent := 2; (* Double click *)\n        rEventX := rMouseX;\n        rEventY := rMouseY;\n        xEventActive := TRUE;\n        iClickCount := 0;\n        xEventProcessed := TRUE;\n    END_IF\nELSIF NOT xLeftClick AND xLeftClickOld THEN\n    (* Left button released *)\n    IF iClickCount = 1 AND NOT xEventProcessed THEN\n        LeftClickTimer();\n        IF NOT LeftClickTimer.Q THEN\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Handle middle click *)\nIF xMiddleClick AND NOT xEventProcessed THEN\n    eMouseEvent := 4; (* Middle click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Update old states *)\nxLeftClickOld := xLeftClick;\n\n(* Reset processed flag for next cycle *)\nxEventProcessed := FALSE;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "PROGRAM MouseEvents\nVAR\n    fbMouseHandler : MouseEventHandler;\n    xLeftClick : BOOL;\n    xRightClick : BOOL;\n    xMiddleClick : BOOL;\n    xMouseMove : BOOL;\n    rMouseX : REAL;\n    rMouseY : REAL;\n    eMouseEvent : INT;\n    rEventX : REAL;\n    rEventY : REAL;\n    xEventActive : BOOL;\nEND_VAR\n\n(* Handle various mouse events using function block *)\nfbMouseHandler(\n    xLeftClick := xLeftClick,\n    xRightClick := xRightClick,\n    xMiddleClick := xMiddleClick,\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "    eMouseEvent := 1; (* Single click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    iClickCount := 0;\nEND_IF\n\n(* Handle right click *)\nIF xRightClick AND NOT xEventProcessed THEN\n    eMouseEvent := 3; (* Right click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Handle middle click *)\nIF xMiddleClick AND NOT xEventProcessed THEN\n    eMouseEvent := 4; (* Middle click *)\n    rEventX := rMouseX;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "            (* Still waiting for potential double click *)\n            (* Will be handled by timer logic below *)\n        END_IF\n    END_IF\nEND_IF\n\n(* Check for double click timeout *)\nIF LeftClickTimer.Q AND iClickCount = 1 AND NOT xEventProcessed THEN\n    (* Timeout - single click confirmed *)\n    LeftClickTimer(IN:=FALSE);\n    eMouseEvent := 1; (* Single click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    iClickCount := 0;\nEND_IF\n\n(* Handle right click *)\nIF xRightClick AND NOT xEventProcessed THEN\n    eMouseEvent := 3; (* Right click *)\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    xMouseMove := xMouseMove,\n    rMouseX := rMouseX,\n    rMouseY := rMouseY,\n    tDblClickTime := T#300MS\n);\n\neMouseEvent := fbMouseHandler.eMouseEvent;\nrEventX := fbMouseHandler.rEventX;\nrEventY := fbMouseHandler.rEventY;\nxEventActive := fbMouseHandler.xEventActive;\n\n(* Process mouse events based on type *)\nCASE eMouseEvent OF\n    1: (* Single click *)\n        (* Handle single click logic here *)\n        ;\n\n    2: (* Double click *)\n        (* Handle double click logic here *)\n        ;\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "PROGRAM MouseEvents\nVAR\n    fbMouseHandler : MouseEventHandler;\n    xLeftClick : BOOL;\n    xRightClick : BOOL;\n    xMiddleClick : BOOL;\n    xMouseMove : BOOL;\n    rMouseX : REAL;\n    rMouseY : REAL;\n    eMouseEvent : INT;\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR\n\nVAR\n    NodeDblClick : TON;\n    xNodeClickOld : BOOL;\n    iNodeState : INT := 1;\nEND_VAR\n\n(* This function block handles double-click expansion/collapse of a node *)\n\nCASE iNodeState OF\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "\nVAR\n    NodeDblClick : TON;\n    xNodeClickOld : BOOL;\n    iNodeState : INT := 1;\nEND_VAR\n\n(* This function block handles double-click expansion/collapse of a node *)\n\nCASE iNodeState OF\n\n    1: (* Wait for first click *)\n        IF xNodeClick AND NOT xNodeClickOld THEN\n            NodeDblClick(IN:=TRUE, PT:=tDblClickTime);\n            iNodeState := 2;\n            xNodeSelected := TRUE;\n        END_IF\n\n    2: (* Wait for second click or timeout *)\n        NodeDblClick();\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "\n(* Process mouse events based on type *)\nCASE eMouseEvent OF\n    1: (* Single click *)\n        (* Handle single click logic here *)\n        ;\n\n    2: (* Double click *)\n        (* Handle double click logic here *)\n        ;\n\n    3: (* Right click *)\n        (* Handle right click logic here *)\n        ;\n\n    4: (* Middle click *)\n        (* Handle middle click logic here *)\n        ;\nEND_CASE", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "PROGRAM Node\nVAR\n    fbNodeControl : NodeExpandCollapse;\n    xNodeClick : BOOL;\n    xNodeExpand : BOOL;\n    xNodeSelected : BOOL;\nEND_VAR\n\n(* Handle node expansion/collapse using function block *)\nfbNodeControl(\n    xNodeClick := xNodeClick,\n    tDblClickTime := T#500MS\n);\n\nxNodeExpand := fbNodeControl.xNodeExpand;\nxNodeSelected := fbNodeControl.xNodeSelected;", "title": "VisuElements-PRG\\Node.st"}, {"text": "\n    1: (* Wait for first click *)\n        IF xNodeClick AND NOT xNodeClickOld THEN\n            NodeDblClick(IN:=TRUE, PT:=tDblClickTime);\n            iNodeState := 2;\n            xNodeSelected := TRUE;\n        END_IF\n\n    2: (* Wait for second click or timeout *)\n        NodeDblClick();\n        IF NodeDblClick.Q THEN\n            (* Timeout - single click, reset *)\n            NodeDblClick(IN:=FALSE);\n            xNodeClickOld := FALSE;\n            iNodeState := 1;\n            xNodeSelected := FALSE;\n        ELSIF NOT xNodeClick AND xNodeClickOld THEN\n            (* Second click detected - toggle expansion *)\n            NodeDblClick(IN:=FALSE);\n            xNodeExpand := NOT xNodeExpand;\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "        IF NodeDblClick.Q THEN\n            (* Timeout - single click, reset *)\n            NodeDblClick(IN:=FALSE);\n            xNodeClickOld := FALSE;\n            iNodeState := 1;\n            xNodeSelected := FALSE;\n        ELSIF NOT xNodeClick AND xNodeClickOld THEN\n            (* Second click detected - toggle expansion *)\n            NodeDblClick(IN:=FALSE);\n            xNodeExpand := NOT xNodeExpand;\n            iNodeState := 1;\n            xNodeSelected := FALSE;\n        END_IF\nEND_CASE\n\nxNodeClickOld := xNodeClick;\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}], "task_id": "MouseEventHandler"}
{"requirement": "This code is intended to implement a double-click mechanism for expanding or collapsing a node and single-click functionality for selecting a node.", "provide_code": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR", "docs": [{"text": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR\n\nVAR\n    NodeDblClick : TON;\n    xNodeClickOld : BOOL;\n    iNodeState : INT := 1;\nEND_VAR\n\n(* This function block handles double-click expansion/collapse of a node *)\n\nCASE iNodeState OF\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "\nVAR\n    NodeDblClick : TON;\n    xNodeClickOld : BOOL;\n    iNodeState : INT := 1;\nEND_VAR\n\n(* This function block handles double-click expansion/collapse of a node *)\n\nCASE iNodeState OF\n\n    1: (* Wait for first click *)\n        IF xNodeClick AND NOT xNodeClickOld THEN\n            NodeDblClick(IN:=TRUE, PT:=tDblClickTime);\n            iNodeState := 2;\n            xNodeSelected := TRUE;\n        END_IF\n\n    2: (* Wait for second click or timeout *)\n        NodeDblClick();\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "\n    1: (* Wait for first click *)\n        IF xNodeClick AND NOT xNodeClickOld THEN\n            NodeDblClick(IN:=TRUE, PT:=tDblClickTime);\n            iNodeState := 2;\n            xNodeSelected := TRUE;\n        END_IF\n\n    2: (* Wait for second click or timeout *)\n        NodeDblClick();\n        IF NodeDblClick.Q THEN\n            (* Timeout - single click, reset *)\n            NodeDblClick(IN:=FALSE);\n            xNodeClickOld := FALSE;\n            iNodeState := 1;\n            xNodeSelected := FALSE;\n        ELSIF NOT xNodeClick AND xNodeClickOld THEN\n            (* Second click detected - toggle expansion *)\n            NodeDblClick(IN:=FALSE);\n            xNodeExpand := NOT xNodeExpand;\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "        IF NodeDblClick.Q THEN\n            (* Timeout - single click, reset *)\n            NodeDblClick(IN:=FALSE);\n            xNodeClickOld := FALSE;\n            iNodeState := 1;\n            xNodeSelected := FALSE;\n        ELSIF NOT xNodeClick AND xNodeClickOld THEN\n            (* Second click detected - toggle expansion *)\n            NodeDblClick(IN:=FALSE);\n            xNodeExpand := NOT xNodeExpand;\n            iNodeState := 1;\n            xNodeSelected := FALSE;\n        END_IF\nEND_CASE\n\nxNodeClickOld := xNodeClick;\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "PROGRAM Node\nVAR\n    fbNodeControl : NodeExpandCollapse;\n    xNodeClick : BOOL;\n    xNodeExpand : BOOL;\n    xNodeSelected : BOOL;\nEND_VAR\n\n(* Handle node expansion/collapse using function block *)\nfbNodeControl(\n    xNodeClick := xNodeClick,\n    tDblClickTime := T#500MS\n);\n\nxNodeExpand := fbNodeControl.xNodeExpand;\nxNodeSelected := fbNodeControl.xNodeSelected;", "title": "VisuElements-PRG\\Node.st"}, {"text": "PROGRAM Node\nVAR\n    fbNodeControl : NodeExpandCollapse;\n    xNodeClick : BOOL;\n    xNodeExpand : BOOL;\n    xNodeSelected : BOOL;\nEND_VAR\n\n(* Handle node expansion/collapse using function block *)\nfbNodeControl(\n", "title": "VisuElements-PRG\\Node.st"}, {"text": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR\n\nVAR\n    LeftClickTimer : TON;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    xLeftClickOld : BOOL;\n    iClickCount : INT := 0;\n    xEventProcessed : BOOL := FALSE;\nEND_VAR\n\n(* Reset event state *)\neMouseEvent := 0;\nxEventActive := FALSE;\n\n(* Handle left click events (single/double click) *)\nIF xLeftClick AND NOT xLeftClickOld THEN\n    (* First click detected *)\n    IF iClickCount = 0 THEN\n        LeftClickTimer(IN:=TRUE, PT:=tDblClickTime);\n        iClickCount := 1;\n    ELSE\n        (* Second click within time window *)\n        LeftClickTimer(IN:=FALSE);\n        eMouseEvent := 2; (* Double click *)\n        rEventX := rMouseX;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "        rEventY := rMouseY;\n        xEventActive := TRUE;\n        iClickCount := 0;\n        xEventProcessed := TRUE;\n    END_IF\nELSIF NOT xLeftClick AND xLeftClickOld THEN\n    (* Left button released *)\n    IF iClickCount = 1 AND NOT xEventProcessed THEN\n        LeftClickTimer();\n        IF NOT LeftClickTimer.Q THEN\n            (* Still waiting for potential double click *)\n            (* Will be handled by timer logic below *)\n        END_IF\n    END_IF\nEND_IF\n\n(* Check for double click timeout *)\nIF LeftClickTimer.Q AND iClickCount = 1 AND NOT xEventProcessed THEN\n    (* Timeout - single click confirmed *)\n    LeftClickTimer(IN:=FALSE);\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR\n\nVAR\n    LeftClickTimer : TON;\n    xLeftClickOld : BOOL;\n    iClickCount : INT := 0;\n    xEventProcessed : BOOL := FALSE;\nEND_VAR\n\n(* Reset event state *)\neMouseEvent := 0;\nxEventActive := FALSE;\n\n(* Handle left click events (single/double click) *)\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "            (* Still waiting for potential double click *)\n            (* Will be handled by timer logic below *)\n        END_IF\n    END_IF\nEND_IF\n\n(* Check for double click timeout *)\nIF LeftClickTimer.Q AND iClickCount = 1 AND NOT xEventProcessed THEN\n    (* Timeout - single click confirmed *)\n    LeftClickTimer(IN:=FALSE);\n    eMouseEvent := 1; (* Single click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    iClickCount := 0;\nEND_IF\n\n(* Handle right click *)\nIF xRightClick AND NOT xEventProcessed THEN\n    eMouseEvent := 3; (* Right click *)\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "IF xLeftClick AND NOT xLeftClickOld THEN\n    (* First click detected *)\n    IF iClickCount = 0 THEN\n        LeftClickTimer(IN:=TRUE, PT:=tDblClickTime);\n        iClickCount := 1;\n    ELSE\n        (* Second click within time window *)\n        LeftClickTimer(IN:=FALSE);\n        eMouseEvent := 2; (* Double click *)\n        rEventX := rMouseX;\n        rEventY := rMouseY;\n        xEventActive := TRUE;\n        iClickCount := 0;\n        xEventProcessed := TRUE;\n    END_IF\nELSIF NOT xLeftClick AND xLeftClickOld THEN\n    (* Left button released *)\n    IF iClickCount = 1 AND NOT xEventProcessed THEN\n        LeftClickTimer();\n        IF NOT LeftClickTimer.Q THEN\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    rEventX : REAL;\n    rEventY : REAL;\n    xEventActive : BOOL;\nEND_VAR\n\n(* Handle various mouse events using function block *)\nfbMouseHandler(\n    xLeftClick := xLeftClick,\n    xRightClick := xRightClick,\n    xMiddleClick := xMiddleClick,\n    xMouseMove := xMouseMove,\n    rMouseX := rMouseX,\n    rMouseY := rMouseY,\n    tDblClickTime := T#300MS\n);\n\neMouseEvent := fbMouseHandler.eMouseEvent;\nrEventX := fbMouseHandler.rEventX;\nrEventY := fbMouseHandler.rEventY;\nxEventActive := fbMouseHandler.xEventActive;\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "PROGRAM MouseEvents\nVAR\n    fbMouseHandler : MouseEventHandler;\n    xLeftClick : BOOL;\n    xRightClick : BOOL;\n    xMiddleClick : BOOL;\n    xMouseMove : BOOL;\n    rMouseX : REAL;\n    rMouseY : REAL;\n    eMouseEvent : INT;\n    rEventX : REAL;\n    rEventY : REAL;\n    xEventActive : BOOL;\nEND_VAR\n\n(* Handle various mouse events using function block *)\nfbMouseHandler(\n    xLeftClick := xLeftClick,\n    xRightClick := xRightClick,\n    xMiddleClick := xMiddleClick,\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Handle middle click *)\nIF xMiddleClick AND NOT xEventProcessed THEN\n    eMouseEvent := 4; (* Middle click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Update old states *)\nxLeftClickOld := xLeftClick;\n\n(* Reset processed flag for next cycle *)\nxEventProcessed := FALSE;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    eMouseEvent := 1; (* Single click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    iClickCount := 0;\nEND_IF\n\n(* Handle right click *)\nIF xRightClick AND NOT xEventProcessed THEN\n    eMouseEvent := 3; (* Right click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Handle middle click *)\nIF xMiddleClick AND NOT xEventProcessed THEN\n    eMouseEvent := 4; (* Middle click *)\n    rEventX := rMouseX;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "PROGRAM MAIN\nVAR\n    (* No local variables needed - programs handle their own state *)\nEND_VAR\n\n(* Expand and collapse a node using dedicated program *)\nNode();\n\n(* Handle several mouse events (legacy implementation) *)\nMouseEvents();\n", "title": "VisuElements-PRG\\MAIN.st"}, {"text": "    xMouseMove := xMouseMove,\n    rMouseX := rMouseX,\n    rMouseY := rMouseY,\n    tDblClickTime := T#300MS\n);\n\neMouseEvent := fbMouseHandler.eMouseEvent;\nrEventX := fbMouseHandler.rEventX;\nrEventY := fbMouseHandler.rEventY;\nxEventActive := fbMouseHandler.xEventActive;\n\n(* Process mouse events based on type *)\nCASE eMouseEvent OF\n    1: (* Single click *)\n        (* Handle single click logic here *)\n        ;\n\n    2: (* Double click *)\n        (* Handle double click logic here *)\n        ;\n", "title": "VisuElements-PRG\\MouseEvents.st"}], "task_id": "NodeExpandCollapse"}
{"requirement": "This code is intended to implement the calculation of the new coordinates of a point after rotating it around a specified center by a given angle.", "provide_code": "FUNCTION RotationCalculation : BOOL\nVAR_INPUT\n    rCenterX : REAL;    (* X coordinate of rotation center *)\n    rCenterY : REAL;    (* Y coordinate of rotation center *)\n    rAngle : REAL;      (* Rotation angle in degrees *)\n    rPointX : REAL;     (* X coordinate of point to rotate *)\n    rPointY : REAL;     (* Y coordinate of point to rotate *)\nEND_VAR\n\nVAR_OUTPUT\n    rRotatedX : REAL;   (* X coordinate after rotation *)\n    rRotatedY : REAL;   (* Y coordinate after rotation *)\nEND_VAR", "docs": [{"text": "FUNCTION RotationCalculation : BOOL\nVAR_INPUT\n    rCenterX : REAL;    (* X coordinate of rotation center *)\n    rCenterY : REAL;    (* Y coordinate of rotation center *)\n    rAngle : REAL;      (* Rotation angle in degrees *)\n    rPointX : REAL;     (* X coordinate of point to rotate *)\n    rPointY : REAL;     (* Y coordinate of point to rotate *)\nEND_VAR\n\nVAR_OUTPUT\n", "title": "VisuElements-FUN\\RotationCalculation.st"}, {"text": "FUNCTION RotationCalculation : BOOL\nVAR_INPUT\n    rCenterX : REAL;    (* X coordinate of rotation center *)\n    rCenterY : REAL;    (* Y coordinate of rotation center *)\n    rAngle : REAL;      (* Rotation angle in degrees *)\n    rPointX : REAL;     (* X coordinate of point to rotate *)\n    rPointY : REAL;     (* Y coordinate of point to rotate *)\nEND_VAR\n\nVAR_OUTPUT\n    rRotatedX : REAL;   (* X coordinate after rotation *)\n    rRotatedY : REAL;   (* Y coordinate after rotation *)\nEND_VAR\n\nVAR\n    rRadians : REAL;\n    rCos : REAL;\n    rSin : REAL;\n    rTranslatedX : REAL;\n    rTranslatedY : REAL;\n", "title": "VisuElements-FUN\\RotationCalculation.st"}, {"text": "PROGRAM Rotation\nVAR\n    rCenterX : REAL := 100.0;    (* Center X coordinate *)\n    rCenterY : REAL := 100.0;    (* Center Y coordinate *)\n    rAngle : REAL := 45.0;       (* Rotation angle in degrees *)\n    rPointX : REAL := 150.0;     (* Point X coordinate *)\n    rPointY : REAL := 100.0;     (* Point Y coordinate *)\n    rRotatedX : REAL;            (* Result X after rotation *)\n    rRotatedY : REAL;            (* Result Y after rotation *)\n    xSuccess : BOOL;             (* Success flag *)\nEND_VAR\n\n(* Calculate rotation points for an object *)\nxSuccess := RotationCalculation(\n    rCenterX := rCenterX,\n    rCenterY := rCenterY,\n    rAngle := rAngle,\n    rPointX := rPointX,\n    rPointY := rPointY,\n    rRotatedX => rRotatedX,\n", "title": "VisuElements-PRG\\Rotation.st"}, {"text": "PROGRAM Rotation\nVAR\n    rCenterX : REAL := 100.0;    (* Center X coordinate *)\n    rCenterY : REAL := 100.0;    (* Center Y coordinate *)\n    rAngle : REAL := 45.0;       (* Rotation angle in degrees *)\n    rPointX : REAL := 150.0;     (* Point X coordinate *)\n    rPointY : REAL := 100.0;     (* Point Y coordinate *)\n    rRotatedX : REAL;            (* Result X after rotation *)\n    rRotatedY : REAL;            (* Result Y after rotation *)\n    xSuccess : BOOL;             (* Success flag *)\n", "title": "VisuElements-PRG\\Rotation.st"}, {"text": "END_VAR\n\n(* Calculate rotation points for an object *)\nxSuccess := RotationCalculation(\n    rCenterX := rCenterX,\n    rCenterY := rCenterY,\n    rAngle := rAngle,\n    rPointX := rPointX,\n    rPointY := rPointY,\n    rRotatedX => rRotatedX,\n    rRotatedY => rRotatedY\n);", "title": "VisuElements-PRG\\Rotation.st"}, {"text": "    rRotatedX : REAL;   (* X coordinate after rotation *)\n    rRotatedY : REAL;   (* Y coordinate after rotation *)\nEND_VAR\n\nVAR\n    rRadians : REAL;\n    rCos : REAL;\n    rSin : REAL;\n    rTranslatedX : REAL;\n    rTranslatedY : REAL;\nEND_VAR\n\n(* Convert angle from degrees to radians *)\nrRadians := rAngle * 3.14159 / 180.0;\n\n(* Calculate sine and cosine *)\nrCos := COS(rRadians);\nrSin := SIN(rRadians);\n\n(* Translate point to origin (relative to center) *)\n", "title": "VisuElements-FUN\\RotationCalculation.st"}, {"text": "END_VAR\n\n(* Convert angle from degrees to radians *)\nrRadians := rAngle * 3.14159 / 180.0;\n\n(* Calculate sine and cosine *)\nrCos := COS(rRadians);\nrSin := SIN(rRadians);\n\n(* Translate point to origin (relative to center) *)\nrTranslatedX := rPointX - rCenterX;\nrTranslatedY := rPointY - rCenterY;\n\n(* Apply rotation matrix *)\nrRotatedX := rTranslatedX * rCos - rTranslatedY * rSin;\nrRotatedY := rTranslatedX * rSin + rTranslatedY * rCos;\n\n(* Translate back to original position *)\nrRotatedX := rRotatedX + rCenterX;\nrRotatedY := rRotatedY + rCenterY;\n", "title": "VisuElements-FUN\\RotationCalculation.st"}, {"text": "rTranslatedX := rPointX - rCenterX;\nrTranslatedY := rPointY - rCenterY;\n\n(* Apply rotation matrix *)\nrRotatedX := rTranslatedX * rCos - rTranslatedY * rSin;\nrRotatedY := rTranslatedX * rSin + rTranslatedY * rCos;\n\n(* Translate back to original position *)\nrRotatedX := rRotatedX + rCenterX;\nrRotatedY := rRotatedY + rCenterY;\n\nRotationCalculation := TRUE;  (* Return success *)\n", "title": "VisuElements-FUN\\RotationCalculation.st"}, {"text": "PROGRAM MAIN\nVAR\n    (* No local variables needed - programs handle their own state *)\nEND_VAR\n\n(* Expand and collapse a node using dedicated program *)\nNode();\n\n(* Handle several mouse events (legacy implementation) *)\nMouseEvents();\n\n(* Calculate the rotation points for an object using dedicated program *)\nRotation();", "title": "VisuElements-PRG\\MAIN.st"}, {"text": "\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR\n\nVAR\n    LeftClickTimer : TON;\n    xLeftClickOld : BOOL;\n    iClickCount : INT := 0;\n    xEventProcessed : BOOL := FALSE;\nEND_VAR\n\n(* Reset event state *)\neMouseEvent := 0;\nxEventActive := FALSE;\n\n(* Handle left click events (single/double click) *)\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n\nVAR_OUTPUT\n    eMouseEvent : INT;      (* Event type: 0=None, 1=SingleClick, 2=DoubleClick, 3=RightClick, 4=MiddleClick *)\n    rEventX : REAL;         (* X position where event occurred *)\n    rEventY : REAL;         (* Y position where event occurred *)\n    xEventActive : BOOL;    (* TRUE when an event is active *)\nEND_VAR\n\nVAR\n    LeftClickTimer : TON;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR\n\nVAR\n    NodeDblClick : TON;\n    xNodeClickOld : BOOL;\n    iNodeState : INT := 1;\nEND_VAR\n\n(* This function block handles double-click expansion/collapse of a node *)\n\nCASE iNodeState OF\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "FUNCTION_BLOCK MouseEventHandler\nVAR_INPUT\n    xLeftClick : BOOL;      (* Left mouse button click *)\n    xRightClick : BOOL;     (* Right mouse button click *)\n    xMiddleClick : BOOL;    (* Middle mouse button click *)\n    xMouseMove : BOOL;      (* Mouse movement detected *)\n    rMouseX : REAL;         (* Current mouse X position *)\n    rMouseY : REAL;         (* Current mouse Y position *)\n    tDblClickTime : TIME := T#300MS;  (* Double click timeout *)\nEND_VAR\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "    eMouseEvent := 1; (* Single click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    iClickCount := 0;\nEND_IF\n\n(* Handle right click *)\nIF xRightClick AND NOT xEventProcessed THEN\n    eMouseEvent := 3; (* Right click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Handle middle click *)\nIF xMiddleClick AND NOT xEventProcessed THEN\n    eMouseEvent := 4; (* Middle click *)\n    rEventX := rMouseX;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "FUNCTION_BLOCK NodeExpandCollapse\nVAR_INPUT\n    xNodeClick : BOOL;  (* Input signal for node click *)\n    tDblClickTime : TIME := T#500MS;  (* Time to wait for double click *)\nEND_VAR\n\nVAR_OUTPUT\n    xNodeExpand : BOOL;  (* Output: TRUE when node is expanded *)\n    xNodeSelected : BOOL; (* Output: TRUE when node is selected *)\nEND_VAR\n", "title": "VisuElements-FUN\\NodeExpandCollapse.st"}, {"text": "    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Handle middle click *)\nIF xMiddleClick AND NOT xEventProcessed THEN\n    eMouseEvent := 4; (* Middle click *)\n    rEventX := rMouseX;\n    rEventY := rMouseY;\n    xEventActive := TRUE;\n    xEventProcessed := TRUE;\nEND_IF\n\n(* Update old states *)\nxLeftClickOld := xLeftClick;\n\n(* Reset processed flag for next cycle *)\nxEventProcessed := FALSE;\n", "title": "VisuElements-FUN\\MouseEventHandler.st"}, {"text": "PROGRAM MAIN\nVAR\n    (* No local variables needed - programs handle their own state *)\nEND_VAR\n\n(* Expand and collapse a node using dedicated program *)\nNode();\n\n(* Handle several mouse events (legacy implementation) *)\nMouseEvents();\n", "title": "VisuElements-PRG\\MAIN.st"}, {"text": "    rEventX : REAL;\n    rEventY : REAL;\n    xEventActive : BOOL;\nEND_VAR\n\n(* Handle various mouse events using function block *)\nfbMouseHandler(\n    xLeftClick := xLeftClick,\n    xRightClick := xRightClick,\n    xMiddleClick := xMiddleClick,\n    xMouseMove := xMouseMove,\n    rMouseX := rMouseX,\n    rMouseY := rMouseY,\n    tDblClickTime := T#300MS\n);\n\neMouseEvent := fbMouseHandler.eMouseEvent;\nrEventX := fbMouseHandler.rEventX;\nrEventY := fbMouseHandler.rEventY;\nxEventActive := fbMouseHandler.xEventActive;\n", "title": "VisuElements-PRG\\MouseEvents.st"}, {"text": "PROGRAM Node\nVAR\n    fbNodeControl : NodeExpandCollapse;\n    xNodeClick : BOOL;\n    xNodeExpand : BOOL;\n    xNodeSelected : BOOL;\nEND_VAR\n\n(* Handle node expansion/collapse using function block *)\nfbNodeControl(\n", "title": "VisuElements-PRG\\Node.st"}, {"text": "PROGRAM Node\nVAR\n    fbNodeControl : NodeExpandCollapse;\n    xNodeClick : BOOL;\n    xNodeExpand : BOOL;\n    xNodeSelected : BOOL;\nEND_VAR\n\n(* Handle node expansion/collapse using function block *)\nfbNodeControl(\n    xNodeClick := xNodeClick,\n    tDblClickTime := T#500MS\n);\n\nxNodeExpand := fbNodeControl.xNodeExpand;\nxNodeSelected := fbNodeControl.xNodeSelected;", "title": "VisuElements-PRG\\Node.st"}], "task_id": "RotationCalculation"}
