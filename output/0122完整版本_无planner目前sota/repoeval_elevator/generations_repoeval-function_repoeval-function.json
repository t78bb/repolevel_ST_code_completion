[["```\nVAR\n\tfbDoorTimer\t\t\t:\tTON;\t\t// \u5f00\u95e8\u5ef6\u65f6\u5b9a\u65f6\u5668\n\tfbCloseDoorTimer\t:\tTON;\t\t// \u5173\u95e8\u5ef6\u65f6\u5b9a\u65f6\u5668\n\tnState\t\t\t\t:\tINT;\t\t// \u72b6\u6001\u673a\nEND_VAR\n\nCASE nState OF\n\t0: // \u7a7a\u95f2\u72b6\u6001\n\t\tbOpenDoor := FALSE;\n\t\tbCloseDoor := FALSE;\n\t\tbDoorReady := TRUE;\n\t\t\n\t\tIF bArrivedAtTarget THEN\n\t\t\tnState := 1; // \u5f00\u59cb\u5f00\u95e8\u6d41\u7a0b\n\t\tEND_IF\n\t\t\n\t1: // \u5f00\u95e8\u5ef6\u65f6\n\t\tbCloseDoor := FALSE;\n\t\tbDoorReady := FALSE;\n\t\tfbDoorTimer(IN := TRUE, PT := T#2S);\n\t\t\n\t\tIF fbDoorTimer.Q THEN\n\t\t\tfbDoorTimer(IN := FALSE);\n\t\t\tnState := 2; // \u5f00\u95e8\u547d\u4ee4\n\t\tEND_IF\n\t\t\n\t2: // \u5f00\u95e8\u72b6\u6001\n\t\tbOpenDoor := TRUE;\n\t\tbDoorOpen := TRUE;\n\t\tbDoorReady := FALSE;\n\t\t\n\t\tIF NOT bArrivedAtTarget THEN\n\t\t\tnState := 3; // \u5f00\u59cb\u5173\u95e8\u6d41\u7a0b\n\t\tEND_IF\n\t\t\n\t3: // \u5173\u95e8\u5ef6\u65f6\n\t\tbOpenDoor := FALSE;\n\t\tbDoorOpen := FALSE;\n\t\tbDoorReady := FALSE;\n\t\tfbCloseDoorTimer(IN := TRUE, PT := T#2S);\n\t\t\n\t\tIF fbCloseDoorTimer.Q THEN\n\t\t\tfbCloseDoorTimer(IN := FALSE);\n\t\t\tnState := 4; // \u5173\u95e8\u547d\u4ee4\n\t\tEND_IF\n\t\t\n\t4: // \u5173\u95e8\u72b6\u6001\n\t\tbCloseDoor := TRUE;\n\t\tbDoorReady := FALSE;\n\t\t\n\t\tIF bDoorClosed THEN\n\t\t\tbCloseDoor := FALSE;\n\t\t\tbDoorReady := TRUE;\n\t\t\tnState := 0; // \u8fd4\u56de\u7a7a\u95f2\u72b6\u6001\n\t\tEND_IF\n\t\t\nEND_CASE\n```"], ["```\nVAR\n\tfbMoveDelayTimer\t:\tTON;\t\t\t\t// \u79fb\u52a8\u5ef6\u65f6\u5b9a\u65f6\u5668\n\ti\t\t\t\t\t:\tINT;\t\t\t\t// \u5faa\u73af\u53d8\u91cf\n\tbHasUpperRequest\t:\tBOOL;\t\t\t\t// \u6709\u66f4\u9ad8\u697c\u5c42\u8bf7\u6c42\n\tbHasLowerRequest\t:\tBOOL;\t\t\t\t// \u6709\u66f4\u4f4e\u697c\u5c42\u8bf7\u6c42\nEND_VAR\n\n// \u68c0\u67e5\u662f\u5426\u5230\u8fbe\u76ee\u6807\u697c\u5c42\nIF TargetFloors[CurrentFloor] THEN\n\tbArrivedAtTarget := TRUE;\n\tTargetFloors[CurrentFloor] := FALSE; // \u6e05\u9664\u8bf7\u6c42\n\tbMovingUp := FALSE;\n\tbMovingDown := FALSE;\n\tRETURN;\nELSE\n\tbArrivedAtTarget := FALSE;\nEND_IF\n\n// \u68c0\u67e5\u662f\u5426\u6709\u66f4\u9ad8\u697c\u5c42\u8bf7\u6c42\nbHasUpperRequest := FALSE;\nFOR i := CurrentFloor + 1 TO UPPER_BOUND(TargetFloors, 1) DO\n\tIF TargetFloors[i] THEN\n\t\tbHasUpperRequest := TRUE;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\n// \u68c0\u67e5\u662f\u5426\u6709\u66f4\u4f4e\u697c\u5c42\u8bf7\u6c42\nbHasLowerRequest := FALSE;\nFOR i := CurrentFloor - 1 TO LOWER_BOUND(TargetFloors, 1) BY -1 DO\n\tIF TargetFloors[i] THEN\n\t\tbHasLowerRequest := TRUE;\n\t\tEXIT;\n\tEND_IF\nEND_FOR\n\n// \u63a7\u5236\u7535\u68af\u79fb\u52a8\u903b\u8f91\nIF bDoorReady THEN\n\tIF bHasUpperRequest THEN\n\t\tbMovingUp := TRUE;\n\t\tbMovingDown := FALSE;\n\tELSIF bHasLowerRequest THEN\n\t\tbMovingUp := FALSE;\n\t\tbMovingDown := TRUE;\n\tELSE\n\t\tbMovingUp := FALSE;\n\t\tbMovingDown := FALSE;\n\tEND_IF\nEND_IF\n```"], ["```\nIF FloorSensor0 THEN \n\tF_DetectCurrentFloor := 0;\nELSIF FloorSensor1 THEN \n\tF_DetectCurrentFloor := 1;\nELSIF FloorSensor2 THEN \n\tF_DetectCurrentFloor := 2;\nELSIF FloorSensor3 THEN \n\tF_DetectCurrentFloor := 3;\nELSE\n\tF_DetectCurrentFloor := CurrentFloor;\nEND_IF;\nRETURN;\n```"], ["```\nIF CallGround THEN \n\tTargetFloors[0] := TRUE; \nEND_IF\n\nIF CallFloor1 THEN \n\tTargetFloors[1] := TRUE; \nEND_IF\n\nIF CallFloor2 THEN \n\tTargetFloors[2] := TRUE; \nEND_IF\n\nIF CallFloor3 THEN \n\tTargetFloors[3] := TRUE; \nEND_IF\n\nRETURN;\n```"], ["```\nVAR\n\tnNewAni\t\t\t:\tDINT;\t\t// \u65b0\u7684\u52a8\u753b\u503c\nEND_VAR\n\nnNewAni := nCurrentAni;\n\n// \u5f00\u95e8\u52a8\u753b\uff08\u589e\u52a0\u52a8\u753b\u503c\uff09\nIF bOpenDoor AND nNewAni < nMaxAni AND bCallFloor THEN\n\tnNewAni := nNewAni + 1;\nEND_IF\n\n// \u5173\u95e8\u52a8\u753b\uff08\u51cf\u5c11\u52a8\u753b\u503c\uff09\nIF bCloseDoor AND nNewAni > 0 THEN\n\tnNewAni := nNewAni - 1;\nEND_IF\n\nF_UpdateDoorAnimation := nNewAni;\nRETURN;\n```"]]