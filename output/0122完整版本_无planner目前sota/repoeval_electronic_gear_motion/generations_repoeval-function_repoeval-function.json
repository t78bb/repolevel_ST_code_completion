[["```\nVAR\n\tfbPower1\t\t:\tMC_Power;\t\t//\u8f741\u7535\u6e90\u63a7\u5236\n\tfbPower2\t\t:\tMC_Power;\t\t//\u8f742\u7535\u6e90\u63a7\u5236\n\tbAxis1Error\t\t:\tBOOL;\t\t\t//\u8f741\u9519\u8bef\u6807\u5fd7\n\tbAxis2Error\t\t:\tBOOL;\t\t\t//\u8f742\u9519\u8bef\u6807\u5fd7\nEND_VAR\n\nfbPower1(\n\tAxis := Axis1,\n\tEnable := bEnable,\n\tbDriveStart := TRUE,\n\tbRegulatorOn := TRUE\n);\n\nfbPower2(\n\tAxis := Axis2,\n\tEnable := bEnable,\n\tbDriveStart := TRUE,\n\tbRegulatorOn := TRUE\n);\n\nbAxis1Ready := fbPower1.Status = MC_POWER_STATUS_READY;\nbAxis2Ready := fbPower2.Status = MC_POWER_STATUS_READY;\n\nbAxis1Error := fbPower1.Error;\nbAxis2Error := fbPower2.Error;\n\nbError := bAxis1Error OR bAxis2Error;\n\nbBothReady := bAxis1Ready AND bAxis2Ready;\n```"], ["```\nVAR\n\tfbGearIn\t\t\t:\tMC_GearIn;\t\t//\u9f7f\u8f6e\u8026\u5408\u529f\u80fd\u5757\n\tfbGearOut\t\t\t:\tMC_GearOut;\t\t//\u9f7f\u8f6e\u89e3\u8026\u529f\u80fd\u5757\n\tbLastCouple\t\t\t:\tBOOL;\t\t\t//\u4e0a\u6b21\u8026\u5408\u72b6\u6001\n\tbCoupleRising\t\t:\tBOOL;\t\t\t//\u8026\u5408\u4e0a\u5347\u6cbf\n\tbCoupleFalling\t\t:\tBOOL;\t\t\t//\u8026\u5408\u4e0b\u964d\u6cbf\n\tbInternalError\t\t:\tBOOL;\t\t\t//\u5185\u90e8\u9519\u8bef\u6807\u5fd7\nEND_VAR\n\n// \u68c0\u6d4b\u8026\u5408\u4fe1\u53f7\u7684\u8fb9\u6cbf\nbCoupleRising := bCouple AND NOT bLastCouple;\nbCoupleFalling := NOT bCouple AND bLastCouple;\nbLastCouple := bCouple;\n\n// \u8026\u5408\u903b\u8f91\u63a7\u5236\nIF bCoupleRising THEN\n\tfbGearIn.Axis := Slave;\n\tfbGearIn.Master := Master;\n\tfbGearIn.RatioNumerator := nRatioNumerator;\n\tfbGearIn.RatioDenominator := nRatioDenominator;\n\tfbGearIn.Acceleration := rAcceleration;\n\tfbGearIn.Deceleration := rDeceleration;\n\tfbGearIn.Execute := TRUE;\nEND_IF\n\nIF NOT fbGearIn.Execute THEN\n\tbCouplingDone := fbGearIn.Done;\n\tbError := fbGearIn.Error;\n\tnErrorID := fbGearIn.ErrorID;\nEND_IF\n\n// \u89e3\u8026\u903b\u8f91\u63a7\u5236\nIF bCoupleFalling THEN\n\tfbGearOut.Axis := Slave;\n\tfbGearOut.Execute := TRUE;\nEND_IF\n\nIF NOT fbGearOut.Execute THEN\n\tbDecouplingDone := fbGearOut.Done;\n\tbError := fbGearOut.Error;\n\tnErrorID := fbGearOut.ErrorID;\nEND_IF\n\n// \u66f4\u65b0\u8026\u5408\u72b6\u6001\nbInGear := fbGearIn.InGear;\n```"], ["```\nVAR\n\tfbPowerMgr\t\t\t:\tFB_DualAxisPower;\t//\u53cc\u8f74\u7535\u6e90\u7ba1\u7406\n\tfbGearCtrl\t\t\t:\tFB_GearCoupling;\t//\u9f7f\u8f6e\u8026\u5408\u63a7\u5236\n\tfbMoveVel\t\t\t:\tMC_MoveVelocity;\t//\u901f\u5ea6\u8fd0\u52a8\n\tfbHaltMaster\t\t:\tMC_Halt;\t\t\t//\u4e3b\u8f74\u505c\u6b62\n\tfbHaltSlave\t\t\t:\tMC_Halt;\t\t\t//\u4ece\u8f74\u505c\u6b62\n\tfbStartRtrig\t\t:\tR_TRIG;\t\t\t\t//\u542f\u52a8\u4e0a\u5347\u6cbf\n\tfbStopRtrig\t\t\t:\tR_TRIG;\t\t\t\t//\u505c\u6b62\u4e0a\u5347\u6cbf\n\tnState\t\t\t\t:\tBYTE;\t\t\t\t//\u5185\u90e8\u72b6\u6001\u673a\nEND_VAR\n\nfbStartRtrig(CLK := bStart);\nfbStopRtrig(CLK := bStop);\n\nCASE nState OF\n\t0: // \u7b49\u5f85\u8f74\u51c6\u5907\u5c31\u7eea\n\t\tfbPowerMgr(Axis1 := MasterAxis, Axis2 := SlaveAxis, bEnable := TRUE);\n\t\tbReady := fbPowerMgr.bReady;\n\t\tIF bReady THEN\n\t\t\tnState := 1;\n\t\tEND_IF;\n\n\t1: // \u542f\u52a8\u8fd0\u52a8\n\t\tIF fbStartRtrig.Q THEN\n\t\t\tfbMoveVel(Axis := MasterAxis, Velocity := rVelocity, Acceleration := rAcceleration, Deceleration := rDeceleration, Direction := nDirection, Execute := TRUE);\n\t\t\tIF fbMoveVel.Done THEN\n\t\t\t\tfbGearCtrl(Master := MasterAxis, Slave := SlaveAxis, RatioNumerator := nRatioNumerator, RatioDenominator := nRatioDenominator, Execute := TRUE);\n\t\t\t\tIF fbGearCtrl.Done THEN\n\t\t\t\t\tbRunning := TRUE;\n\t\t\t\t\tnState := 2;\n\t\t\t\tEND_IF;\n\t\t\tEND_IF;\n\t\tEND_IF;\n\n\t2: // \u8fd0\u884c\u4e2d\n\t\tIF fbStopRtrig.Q THEN\n\t\t\tfbHaltMaster(Axis := MasterAxis, Execute := TRUE);\n\t\t\tfbHaltSlave(Axis := SlaveAxis, Execute := TRUE);\n\t\t\tIF fbHaltMaster.Done AND fbHaltSlave.Done THEN\n\t\t\t\tbRunning := FALSE;\n\t\t\t\tnState := 0;\n\t\t\tEND_IF;\n\t\tEND_IF;\n\n\tELSE\n\t\tbError := TRUE;\nEND_CASE;\n\nnCurrentState := nState;\n```"]]