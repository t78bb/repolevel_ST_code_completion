[["```st\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n\tuiMonth \t: UINT; \n\tuiDay \t\t: UINT; \n\tuiHour \t\t: UINT; \n\tuiMinute \t: UINT; \n\tuiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n// Initialize file handle and line count\nfileHandle := 0;\nlineCount := 0;\n\n// Create or open the file\nfileName := concat(filePath, '/data.txt');\nfileHandle := SysFileOpen(fileName, 'w+');\n\n// Check if the file was opened successfully\nIF fileHandle <> 0 THEN\n\t// Write header to the file\n\tdata := 'LineCount$T$TTime$T$TPosition$T$TSpeed$T$TState';\n\tSysFileWrite(fileHandle, ADR(data), LEN(data), F_err);\n\t\n\t// Initialize datetime\n\tdatetime := SysTimeGet();\n\tUdIntms := SysTimeGetMs();\n\t\n\t// Main loop to write data\n\tWHILE TRUE DO\n\t\t// Increment line count and calculate time\n\t\tlineCount := lineCount + 1;\n\t\ttempInt := lineCount * intervalt;\n\t\t\n\t\t// Format data string\n\t\tdata := INT_TO_STRING(lineCount);\n\t\tdata := concat(data, '$T$T');\n\t\tdata := concat(data, INT_TO_STRING(tempInt));\n\t\tdata := concat(data, '$T$T');\n\t\tdata := concat(data, INT_TO_STRING(positionInt));\n\t\tdata := concat(data, '$T$T');\n\t\tdata := concat(data, INT_TO_STRING(speedInt));\n\t\tdata := concat(data, '$T$T');\n\t\tdata := concat(data, INT_TO_STRING(stateInt));\n\t\t\n\t\t// Write data to file\n\t\tSysFileWrite(fileHandle, ADR(data), LEN(data), F_err);\n\t\t\n\t\t// Delay for the specified interval\n\t\tSysDelay(intervalt);\n\tEND_WHILE;\n\t\n\t// Close the file when done\n\tSysFileClose(fileHandle);\n\tfileHandle := 0;\nEND_IF\n```"], ["```\n\tuiMinute \t: UINT; \n\tuiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tS_Time64\t: SysTime64;\n\tSTT\t\t\t: CurTimeEx;\n\tS_Time\t\t: SystemTimeDate;\n\tTime_Str\t: STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n// Initialize the file save process\nSTT(SystemTime := S_Time64, TimeDate := S_Time);\n\n// Create the directory if it doesn't exist\nfilePath := concat(filePath, '/');\nfilePath := concat(filePath, devName);\nSysDirCreate2(filePath, TRUE);\n\n// Generate a unique filename based on the current date and time\nuiYear := S_Time.uiYear;\nuiMonth := S_Time.uiMonth;\nuiDay := S_Time.uiDay;\nuiHour := S_Time.uiHour;\nuiMinute := S_Time.uiMinute;\nuiSecond := S_Time.uiSecond;\n\nfileName := concat(INT_TO_STRING(uiYear), '_');\nfileName := concat(fileName, INT_TO_STRING(uiMonth));\nfileName := concat(fileName, '_');\nfileName := concat(fileName, INT_TO_STRING(uiDay));\nfileName := concat(fileName, '_');\nfileName := concat(fileName, INT_TO_STRING(uiHour));\nfileName := concat(fileName, '_');\nfileName := concat(fileName, INT_TO_STRING(uiMinute));\nfileName := concat(fileName, '_');\nfileName := concat(fileName, INT_TO_STRING(uiSecond));\nfileName := concat(fileName, '.txt');\n\n// Open the file for writing\nfileHandle := SysFileOpen(concat(filePath, '/', fileName), 'w', F_err);\n\n// Check if the file was successfully opened\nIF fileHandle = 0 THEN\n\t// Handle the error (e.g., log it or raise an exception)\n\tRETURN;\nEND_IF;\n\n// Initialize line count\nlineCount := 0;\n\n// File save process is now ready\n```"], ["```\n\tuiMinute \t: UINT; \n\tuiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tS_Time64\t: SysTime64;\n\tSTT\t\t\t: CurTimeEx;\n\tS_Time\t\t: SystemTimeDate;\n\tTime_Str\t: STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n// Initialize the file creation process\nSTT(SystemTime := S_Time64, TimeDate := S_Time);\ndatetime := S_Time.DateTime;\nuiYear := S_Time.Year;\nuiMonth := S_Time.Month;\nuiDay := S_Time.Day;\nuiHour := S_Time.Hour;\nuiMinute := S_Time.Minute;\nuiSecond := S_Time.Second;\nuiMsSecond := S_Time.MilliSecond;\n\n// Construct the file name using the current date and time\nfileName := concat(filePath, '/');\nfileName := concat(fileName, devName);\nfileName := concat(fileName, '_');\nfileName := concat(fileName, UINT_TO_STRING(uiYear));\nfileName := concat(fileName, '-');\nfileName := concat(fileName, UINT_TO_STRING(uiMonth));\nfileName := concat(fileName, '-');\nfileName := concat(fileName, UINT_TO_STRING(uiDay));\nfileName := concat(fileName, '_');\nfileName := concat(fileName, UINT_TO_STRING(uiHour));\nfileName := concat(fileName, '-');\nfileName := concat(fileName, UINT_TO_STRING(uiMinute));\nfileName := concat(fileName, '-');\nfileName := concat(fileName, UINT_TO_STRING(uiSecond));\nfileName := concat(fileName, '.txt');\n\n// Open or create the file\nfileHandle := SysFileOpen(FileName := fileName, Mode := 'w', Error := F_err);\nIF F_err <> 0 THEN\n\t// Handle file open error\n\tRETURN;\nEND_IF;\n\n// Reset line count\nlineCount := 0;\n```"], ["```\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle = 0 THEN\n\t(* Create a new file or open an existing one *)\n\tfileName := concat(filePath, 'dataLog.txt');\n\tfileHandle := SysFileOpen(fileName := fileName, mode := 'WRITE_APPEND', error := F_err);\n\tIF F_err <> 0 THEN\n\t\t(* Handle file open error *)\n\t\tSysLog('Error opening file: ' + fileName);\n\t\tRETURN;\n\tEND_IF;\nEND_IF;\n\n(* Write data to the file *)\nlineCount := lineCount + 1;\ntempInt := lineCount * intervalt;\ndata := INT_TO_STRING(lineCount);\ndata := concat(data, '$T$T');\ndata := concat(data, INT_TO_STRING(tempInt));\nIF tempInt < 1000 THEN\n\tdata := concat(data, '$T');\nEND_IF;\ndata := concat(data, '$T$T');\ndata := concat(data, INT_TO_STRING(positionInt));\ndata := concat(data, '$T');\ndata := concat(data, INT_TO_STRING(speedInt));\ndata := concat(data, '$T');\ndata := concat(data, INT_TO_STRING(stateInt));\ndata := concat(data, '$R');\n\nSysFileWrite(hFile := fileHandle, data := data, error := F_err);\nIF F_err <> 0 THEN\n\t(* Handle file write error *)\n\tSysLog('Error writing to file: ' + fileName);\nEND_IF;\n\n(* Close the file if necessary *)\nIF lineCount >= 100 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF;\n```"]]