[["```\nVAR\n\tlRange : LREAL;\nEND_VAR\n\nlRange := lH - lL;\n\nIF lRange <> 0 THEN\n\tlF := (lM - lL) / lRange;\nELSE\n\tlF := 0;\nEND_IF;\n```"], ["```\nVAR\n    lDeltaH : LREAL;   // \u8f74\u4f4d\u7f6e\u53d8\u5316\u91cf\n    lRadius : LREAL;   // \u8ba1\u7b97\u51fa\u7684\u534a\u5f84\nEND_VAR\n\n// \u8ba1\u7b97\u8f74\u4f4d\u7f6e\u53d8\u5316\u91cf\nlDeltaH := lHnew - lHold;\n\n// \u8ba1\u7b97\u534a\u5f84\uff0c\u8003\u8651\u6750\u6599\u539a\u5ea6\u548c\u9ad8\u5ea6\u504f\u79fb\u91cf\nIF (lD - lDeltaH - lOffset - lTk) > 0.01 THEN  // \u907f\u514d\u9664\u96f6\u6216\u8d1f\u503c\n    lRadius := (lD - lDeltaH - lOffset - lTk) / 2.0;\nELSE\n    lRadius := 0.0;  // \u5982\u679c\u8ba1\u7b97\u65e0\u6548\uff0c\u8fd4\u56de0\nEND_IF;\n\n// \u8fd4\u56de\u8ba1\u7b97\u51fa\u7684\u534a\u5f84\nF_CalculateRadius := lRadius;\nRETURN;\n```"], ["```\nVAR\n    lDeltaPos       : LREAL;    // \u4f4d\u7f6e\u53d8\u5316\u91cf\n    lDeltaRadius    : LREAL;    // \u534a\u5f84\u53d8\u5316\u91cf\n    lCompensation   : LREAL;    // \u901f\u5ea6\u8865\u507f\u91cf\nEND_VAR\n\n// \u8ba1\u7b97\u4f4d\u7f6e\u53d8\u5316\u91cf\nlDeltaPos := lNewPos - lOldPos;\n\n// \u6839\u636e\u653e\u5377\u6216\u6536\u5377\u65b9\u5411\u8ba1\u7b97\u534a\u5f84\u53d8\u5316\u91cf\nIF bUnwinding THEN\n    lDeltaRadius := -lTk; // \u653e\u5377\u65f6\uff0c\u534a\u5f84\u51cf\u5c0f\nELSE\n    lDeltaRadius := lTk;  // \u6536\u5377\u65f6\uff0c\u534a\u5f84\u589e\u52a0\nEND_IF;\n\n// \u8ba1\u7b97\u901f\u5ea6\u8865\u507f\u91cf\nlCompensation := lDeltaPos / (lRadius + lDeltaRadius);\n\n// \u8fd4\u56de\u8865\u507f\u540e\u7684\u901f\u5ea6\nF_CompensateVelocity := lCurrentVel + lCompensation;\nRETURN;\n```"], ["```\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t:\tR_TRIG;\n\t_fbFtrig\t:\tF_TRIG;\n\t_nState\t\t:\tUSINT;\n\t_fTempPos\t:\tLREAL;\nEND_VAR\n\nIF _xAbort THEN\n\t_fbHalt.Axis := _Axis;\n\t_fbHalt.Execute := TRUE;\n\t_fbHalt.Deceleration := _fHomeDec;\n\t_fbHalt.Brake := FALSE;\n\t_fbHalt();\n\t_xBusy := FALSE;\n\t_xDone := FALSE;\n\t_xErr := FALSE;\n\t_iErrId := 0;\n\tRETURN;\nEND_IF\n\n_fbRtrig(CLK := _xHome);\n\nCASE _nState OF\n\t0: // Idle state\n\t\t_xBusy := FALSE;\n\t\t_xDone := FALSE;\n\t\t_xErr := FALSE;\n\t\tIF _fbRtrig.Q THEN\n\t\t\t_nState := 1;\n\t\t\t_xBusy := TRUE;\n\t\tEND_IF;\n\n\t1: // Fast homing\n\t\t_fbMoveVel.Axis := _Axis;\n\t\t_fbMoveVel.Velocity := _fFastHomeVel;\n\t\t_fbMoveVel.Acceleration := _fHomeAcc;\n\t\t_fbMoveVel.Deceleration := _fHomeDec;\n\t\t_fbMoveVel.Direction := _nDirection;\n\t\t_fbMoveVel.Execute := TRUE;\n\t\t_fbMoveVel();\n\t\tIF _fbMoveVel.Error THEN\n\t\t\t_xErr := TRUE;\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_nState := 0;\n\t\tELSIF _xReferenceSwitch THEN\n\t\t\t_fbMoveVel.Execute := FALSE;\n\t\t\t_nState := 2;\n\t\tEND_IF;\n\n\t2: // Slow homing\n\t\t_fbMoveVel.Velocity := _fSlowHomeVel;\n\t\t_fbMoveVel.Execute := TRUE;\n\t\t_fbMoveVel();\n\t\tIF _fbMoveVel.Error THEN\n\t\t\t_xErr := TRUE;\n\t\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t\t_nState := 0;\n\t\tELSIF _xIndexPulse THEN\n\t\t\t_fbMoveVel.Execute := FALSE;\n\t\t\t_nState := 3;\n\t\tEND_IF;\n\n\t3: // Set position\n\t\t_fbSetPos.Axis := _Axis;\n\t\t_fbSetPos.Position := _fHomePos;\n\t\t_fbSetPos.Execute := TRUE;\n\t\t_fbSetPos();\n\t\tIF _fbSetPos.Done THEN\n\t\t\t_fbSetPos.Execute := FALSE;\n\t\t\t_nState := 4;\n\t\tEND_IF;\n\n\t4: // Done\n\t\t_xBusy := FALSE;\n\t\t_xDone := TRUE;\n\t\t_nState := 0;\n\n\tELSE\n\t\t_xErr := TRUE;\n\t\t_iErrId := -1; // Unknown state error\n\t\t_nState := 0;\nEND_CASE;\n```"], ["```\nVAR\n\tiTempStatus : INT;\nEND_VAR\n\nIF iStatus < 0 THEN\n\tiTempStatus := 0;\nELSE\n\tiTempStatus := iStatus;\nEND_IF\n\nCASE iTempStatus OF\n\t0: \n\t\tY1 := FALSE;\n\t\tY2 := FALSE;\n\t\tY3 := FALSE;\n\t\tY4 := FALSE;\n\t\tY5 := FALSE;\n\t\tY6 := FALSE;\n\t1: \n\t\tY1 := TRUE;\n\t\tY2 := FALSE;\n\t\tY3 := FALSE;\n\t\tY4 := FALSE;\n\t\tY5 := FALSE;\n\t\tY6 := FALSE;\n\t2: \n\t\tY1 := FALSE;\n\t\tY2 := TRUE;\n\t\tY3 := FALSE;\n\t\tY4 := FALSE;\n\t\tY5 := FALSE;\n\t\tY6 := FALSE;\n\t3: \n\t\tY1 := FALSE;\n\t\tY2 := FALSE;\n\t\tY3 := TRUE;\n\t\tY4 := FALSE;\n\t\tY5 := FALSE;\n\t\tY6 := FALSE;\n\t4: \n\t\tY1 := FALSE;\n\t\tY2 := FALSE;\n\t\tY3 := FALSE;\n\t\tY4 := TRUE;\n\t\tY5 := FALSE;\n\t\tY6 := FALSE;\n\t5: \n\t\tY1 := FALSE;\n\t\tY2 := FALSE;\n\t\tY3 := FALSE;\n\t\tY4 := FALSE;\n\t\tY5 := TRUE;\n\t\tY6 := FALSE;\n\t6: \n\t\tY1 := FALSE;\n\t\tY2 := FALSE;\n\t\tY3 := FALSE;\n\t\tY4 := FALSE;\n\t\tY5 := FALSE;\n\t\tY6 := TRUE;\n\tELSE\n\t\tY1 := FALSE;\n\t\tY2 := FALSE;\n\t\tY3 := FALSE;\n\t\tY4 := FALSE;\n\t\tY5 := FALSE;\n\t\tY6 := FALSE;\nEND_CASE\n```"]]