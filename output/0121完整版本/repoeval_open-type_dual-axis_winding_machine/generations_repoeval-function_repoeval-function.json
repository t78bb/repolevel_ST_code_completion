[["```\nVAR\nEND_VAR\n\nIF lH <> 0 THEN\n    lF := 9.8 * lM / (2 * COS(ATAN(lL / lH)));\nELSE\n    lF := 0;\nEND_IF;\n```"], ["```\nVAR\n    lRadiusStart : LREAL; // \u521d\u59cb\u534a\u5f84\u8ba1\u7b97\u503c\n    lRadiusEnd   : LREAL; // \u7ed3\u675f\u534a\u5f84\u8ba1\u7b97\u503c\n    lResult      : LREAL; // \u6700\u7ec8\u8ba1\u7b97\u7ed3\u679c\nEND_VAR\n\nlRadiusStart := SQRT(EXPT(lD, 2) + EXPT(lHold + lOffset, 2));\nlRadiusEnd := SQRT(EXPT(lD, 2) + EXPT(lHnew + lOffset, 2));\nlResult := ABS(lRadiusEnd - lRadiusStart) / SMC_PI + lTk;\n\nF_CalculateRadius := lResult;\nRETURN;\n```"], ["```\nVAR\n    lDeltaPos : LREAL; // Position change\nEND_VAR\n\n// Calculate position change\nlDeltaPos := lNewPos - lOldPos;\n\n// Check if the axis is moving (position is changing)\nIF lDeltaPos <> 0 THEN\n    IF bUnwinding THEN\n        // Unwinding: radius decreases, velocity needs to increase\n        // Formula: V_new = V_old + V_old * Tk / (R - Tk)\n        IF (lRadius - lTk) > 0.01 THEN // Avoid division by zero\n            F_CompensateVelocity := lCurrentVel + lCurrentVel * lTk / (lRadius - lTk);\n        ELSE\n            F_CompensateVelocity := lCurrentVel;\n        END_IF\n    ELSE\n        // Rewinding: radius increases, velocity needs to decrease\n        // Formula: V_new = V_old - V_old * Tk / (R + Tk)\n        IF (lRadius + lTk) > 0.01 THEN // Avoid division by zero\n            F_CompensateVelocity := lCurrentVel - lCurrentVel * lTk / (lRadius + lTk);\n        ELSE\n            F_CompensateVelocity := lCurrentVel;\n        END_IF\n    END_IF\nELSE\n    // Position unchanged, maintain current velocity\n    F_CompensateVelocity := lCurrentVel;\nEND_IF;\n\nRETURN;\n```"], ["```\nVAR\n\t_fbMoveVel\t:\tMC_MoveVelocity;\n\t_fbMoveAbs\t:\tMC_MoveAbsolute;\n\t_fbHalt\t\t:\tMC_Halt;\n\t_fbSetPos\t:\tMC_SetPosition;\n\t_fbRtrig\t:\tR_TRIG;\n\t_fbFtrig\t:\tF_TRIG;\n\t_nBDirection\t:\tMC_DIRECTION;\n\t_fTempPos\t\t:\tLREAL;\n\t_nState\t\t:\tUSINT;\n\t_xPrevHome\t:\tBOOL;\n\t_xPrevAbort\t:\tBOOL;\n\t_xErrorDetected\t:\tBOOL;\n\t_iTempErrId\t\t:\tDINT;\nEND_VAR\n\nIF _xAbort THEN\n\t_fbHalt.Execute := TRUE;\n\t_fbHalt.Axis := _Axis;\n\t_fbHalt.Deceleration := _fHomeDec;\n\t_fbHalt.Start();\n\t_xBusy := FALSE;\n\t_xDone := FALSE;\n\t_xErr := FALSE;\n\t_iErrId := 0;\n\t_nState := 0;\n\tRETURN;\nEND_IF\n\nCASE _nState OF\n\t0: // Idle state\n\t\tIF _xHome THEN\n\t\t\t_xBusy := TRUE;\n\t\t\t_xDone := FALSE;\n\t\t\t_xErr := FALSE;\n\t\t\t_iErrId := 0;\n\t\t\t_nState := 1;\n\t\tEND_IF\n\n\t1: // Start homing\n\t\t_fbMoveVel.Execute := TRUE;\n\t\t_fbMoveVel.Axis := _Axis;\n\t\t_fbMoveVel.Velocity := _fFastHomeVel;\n\t\t_fbMoveVel.Acceleration := _fHomeAcc;\n\t\t_fbMoveVel.Deceleration := _fHomeDec;\n\t\t_fbMoveVel.Direction := _nDirection;\n\t\t_fbMoveVel.Start();\n\t\t_nState := 2;\n\n\t2: // Monitor reference switch\n\t\tIF _xReferenceSwitch THEN\n\t\t\t_fbMoveVel.Execute := FALSE;\n\t\t\t_fbMoveVel.Start();\n\t\t\t_nState := 3;\n\t\tEND_IF\n\n\t3: // Slow homing\n\t\t_fbMoveVel.Execute := TRUE;\n\t\t_fbMoveVel.Axis := _Axis;\n\t\t_fbMoveVel.Velocity := _fSlowHomeVel;\n\t\t_fbMoveVel.Acceleration := _fHomeAcc;\n\t\t_fbMoveVel.Deceleration := _fHomeDec;\n\t\t_fbMoveVel.Direction := _nDirection;\n\t\t_fbMoveVel.Start();\n\t\t_nState := 4;\n\n\t4: // Monitor index pulse\n\t\tIF _xIndexPulse THEN\n\t\t\t_fbMoveVel.Execute := FALSE;\n\t\t\t_fbMoveVel.Start();\n\t\t\t_nState := 5;\n\t\tEND_IF\n\n\t5: // Set position\n\t\t_fbSetPos.Execute := TRUE;\n\t\t_fbSetPos.Axis := _Axis;\n\t\t_fbSetPos.Position := _fHomePos;\n\t\t_fbSetPos.Start();\n\t\t_nState := 6;\n\n\t6: // Complete homing\n\t\t_xBusy := FALSE;\n\t\t_xDone := TRUE;\n\t\t_xErr := FALSE;\n\t\t_iErrId := 0;\n\t\t_nState := 0;\n\n\tELSE\n\t\t_xErr := TRUE;\n\t\t_iErrId := _fbMoveVel.ErrorID;\n\t\t_xBusy := FALSE;\n\t\t_xDone := FALSE;\n\t\t_nState := 0;\n\tEND_CASE\n\nRETURN;\n```"], ["```\nVAR\nEND_VAR\n\nCASE iStatus OF\n    2, 3, 4, 5, 6, 7, 8, 9, 10, 221, 222:\n        Y5 := FALSE;\n        Y6 := TRUE;\n        Y1 := TRUE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n    11, 12:\n        Y5 := FALSE;\n        Y6 := TRUE;\n        Y1 := FALSE;\n        Y2 := TRUE;\n        Y3 := FALSE;\n        Y4 := FALSE;\n    13, 14, 15, 16, 17, 18, 19, 20, 21, 22:\n        Y5 := TRUE;\n        Y6 := FALSE;\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := TRUE;\n        Y4 := FALSE;\n    23, 24:\n        Y5 := TRUE;\n        Y6 := FALSE;\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := TRUE;\n    ELSE\n        Y5 := FALSE;\n        Y6 := FALSE;\n        Y1 := FALSE;\n        Y2 := FALSE;\n        Y3 := FALSE;\n        Y4 := FALSE;\nEND_CASE;\n```"]]