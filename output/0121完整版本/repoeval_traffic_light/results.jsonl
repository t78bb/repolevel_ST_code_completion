{"requirement": "This code is intended to implement a countdown timer that calculates the remaining seconds based on the elapsed time and total time.", "provide_code": "FUNCTION_BLOCK FB_CountdownTimer\nVAR_INPUT\n\ttElapsedTime\t:\tTIME;\t\t//\u5df2\u7ecf\u8fc7\u7684\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684ET\uff09\n\ttTotalTime\t\t:\tTIME;\t\t//\u603b\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684PT\uff09\nEND_VAR\nVAR_OUTPUT\n\tnRemainingSeconds\t:\tUINT;\t//\u5269\u4f59\u79d2\u6570\nEND_VAR", "docs": [{"text": "FUNCTION_BLOCK FB_CountdownTimer\nVAR_INPUT\n\ttElapsedTime\t:\tTIME;\t\t//\u5df2\u7ecf\u8fc7\u7684\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684ET\uff09\n\ttTotalTime\t\t:\tTIME;\t\t//\u603b\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684PT\uff09\nEND_VAR\nVAR_OUTPUT\n\tnRemainingSeconds\t:\tUINT;\t//\u5269\u4f59\u79d2\u6570\nEND_VAR\nVAR\n\tnTotalSeconds\t\t:\tUINT;\t//\u603b\u79d2\u6570\n\tnElapsedSeconds\t\t:\tUINT;\t//\u5df2\u8fc7\u79d2\u6570\nEND_VAR\n\n// \u5c06TIME\u8f6c\u6362\u4e3a\u79d2\nnTotalSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_DWORD(tTotalTime) / 1000.0));\nnElapsedSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_UINT(tElapsedTime) / 1000.0));\n\n// \u8ba1\u7b97\u5269\u4f59\u79d2\u6570\nnRemainingSeconds := nTotalSeconds - nElapsedSeconds;\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\FB_CountdownTimer.st"}, {"text": "FUNCTION F_SecondsToTime : TIME\nVAR_INPUT\n\tdwSeconds\t:\tDWORD;\t\t//\u8f93\u5165\u7684\u79d2\u6570\nEND_VAR\n\n// \u5c06\u79d2\u6570\uff08DWORD\uff09\u8f6c\u6362\u4e3aTIME\u7c7b\u578b\n// \u79d2\u6570\u4e58\u4ee51000\u5f97\u5230\u6beb\u79d2\nF_SecondsToTime := DWORD_TO_TIME(dwSeconds * 1000);\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\F_SecondsToTime.st"}, {"text": "FUNCTION F_TimeToSeconds : DWORD\nVAR_INPUT\n\ttTime\t:\tTIME;\t\t//\u8f93\u5165\u7684\u65f6\u95f4\nEND_VAR\n\n// \u5c06TIME\u7c7b\u578b\u8f6c\u6362\u4e3a\u79d2\u6570\uff08DWORD\uff09\n// TIME\u5185\u90e8\u662f\u6beb\u79d2\uff0c\u9664\u4ee51000\u5f97\u5230\u79d2\u6570\nF_TimeToSeconds := DINT_TO_DWORD(TRUNC(TIME_TO_DWORD(tTime) / 1000.0));\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\F_TimeToSeconds.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "VAR_GLOBAL\n\tMCountBackwards\t:\tUINT;//\u5269\u4f59\u65f6\u95f4\n\tMGreenTimeOn\t:\tTIME := T#30S;//\u7eff\u706f\u4eae\u7684\u65f6\u95f4\n\tMGreenTimeFlash\t:\tTIME := T#3S;//\u7eff\u706f\u95ea\u7684\u65f6\u95f4\n\tMYellowTimeOn\t:\tTIME := T#3S;//\u9ec4\u706f\u4eae\u7684\u65f6\u95f4\nEND_VAR", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-global\\GVL_Memory.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\nMCountBackwards := temp;", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM TrafficLigthHMI\nVAR\n\tgreenTimeOn\t\t:\tDWORD := F_TimeToSeconds(MGreenTimeOn);\t\t//\u7eff\u706f\u4eae\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tgreenTimeFlash\t:\tDWORD := F_TimeToSeconds(MGreenTimeFlash);\t//\u7eff\u706f\u95ea\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tyellowTimeOn\t:\tDWORD := F_TimeToSeconds(MYellowTimeOn);\t//\u9ec4\u706f\u4eae\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tbSave\t:\tBOOL;\n\tfbSaveRtrig\t:\tR_TRIG;\nEND_VAR\n\nfbSaveRtrig(CLK := bSave);\nIF fbSaveRtrig.Q THEN\n\tMGreenTimeOn := F_SecondsToTime(greenTimeOn);\n\tMGreenTimeFlash := F_SecondsToTime(greenTimeFlash);\n\tMYellowTimeOn := F_SecondsToTime(yellowTimeOn);\nEND_IF", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\TrafficLightHMI.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "VAR_GLOBAL\n\tIReset\t:\tBOOL;\nEND_VAR", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-global\\GVL_Input.st"}, {"text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}], "task_id": "FB_CountdownTimer"}
{"requirement": "This code is intended to implement the conversion of a given number of seconds (DWORD) into a TIME data type by multiplying the seconds by 1000 to obtain milliseconds.", "provide_code": "FUNCTION F_SecondsToTime : TIME\nVAR_INPUT\n\tdwSeconds\t:\tDWORD;\t\t//\u8f93\u5165\u7684\u79d2\u6570\nEND_VAR", "docs": [{"text": "FUNCTION F_SecondsToTime : TIME\nVAR_INPUT\n\tdwSeconds\t:\tDWORD;\t\t//\u8f93\u5165\u7684\u79d2\u6570\nEND_VAR\n\n// \u5c06\u79d2\u6570\uff08DWORD\uff09\u8f6c\u6362\u4e3aTIME\u7c7b\u578b\n// \u79d2\u6570\u4e58\u4ee51000\u5f97\u5230\u6beb\u79d2\nF_SecondsToTime := DWORD_TO_TIME(dwSeconds * 1000);\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\F_SecondsToTime.st"}, {"text": "FUNCTION F_TimeToSeconds : DWORD\nVAR_INPUT\n\ttTime\t:\tTIME;\t\t//\u8f93\u5165\u7684\u65f6\u95f4\nEND_VAR\n\n// \u5c06TIME\u7c7b\u578b\u8f6c\u6362\u4e3a\u79d2\u6570\uff08DWORD\uff09\n// TIME\u5185\u90e8\u662f\u6beb\u79d2\uff0c\u9664\u4ee51000\u5f97\u5230\u79d2\u6570\nF_TimeToSeconds := DINT_TO_DWORD(TRUNC(TIME_TO_DWORD(tTime) / 1000.0));\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\F_TimeToSeconds.st"}, {"text": "FUNCTION_BLOCK FB_CountdownTimer\nVAR_INPUT\n\ttElapsedTime\t:\tTIME;\t\t//\u5df2\u7ecf\u8fc7\u7684\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684ET\uff09\n\ttTotalTime\t\t:\tTIME;\t\t//\u603b\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684PT\uff09\nEND_VAR\nVAR_OUTPUT\n\tnRemainingSeconds\t:\tUINT;\t//\u5269\u4f59\u79d2\u6570\nEND_VAR\nVAR\n\tnTotalSeconds\t\t:\tUINT;\t//\u603b\u79d2\u6570\n\tnElapsedSeconds\t\t:\tUINT;\t//\u5df2\u8fc7\u79d2\u6570\nEND_VAR\n\n// \u5c06TIME\u8f6c\u6362\u4e3a\u79d2\nnTotalSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_DWORD(tTotalTime) / 1000.0));\nnElapsedSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_UINT(tElapsedTime) / 1000.0));\n\n// \u8ba1\u7b97\u5269\u4f59\u79d2\u6570\nnRemainingSeconds := nTotalSeconds - nElapsedSeconds;\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\FB_CountdownTimer.st"}, {"text": "VAR_GLOBAL\n\tMCountBackwards\t:\tUINT;//\u5269\u4f59\u65f6\u95f4\n\tMGreenTimeOn\t:\tTIME := T#30S;//\u7eff\u706f\u4eae\u7684\u65f6\u95f4\n\tMGreenTimeFlash\t:\tTIME := T#3S;//\u7eff\u706f\u95ea\u7684\u65f6\u95f4\n\tMYellowTimeOn\t:\tTIME := T#3S;//\u9ec4\u706f\u4eae\u7684\u65f6\u95f4\nEND_VAR", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-global\\GVL_Memory.st"}, {"text": "PROGRAM TrafficLigthHMI\nVAR\n\tgreenTimeOn\t\t:\tDWORD := F_TimeToSeconds(MGreenTimeOn);\t\t//\u7eff\u706f\u4eae\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tgreenTimeFlash\t:\tDWORD := F_TimeToSeconds(MGreenTimeFlash);\t//\u7eff\u706f\u95ea\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tyellowTimeOn\t:\tDWORD := F_TimeToSeconds(MYellowTimeOn);\t//\u9ec4\u706f\u4eae\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tbSave\t:\tBOOL;\n\tfbSaveRtrig\t:\tR_TRIG;\nEND_VAR\n\nfbSaveRtrig(CLK := bSave);\nIF fbSaveRtrig.Q THEN\n\tMGreenTimeOn := F_SecondsToTime(greenTimeOn);\n\tMGreenTimeFlash := F_SecondsToTime(greenTimeFlash);\n\tMYellowTimeOn := F_SecondsToTime(yellowTimeOn);\nEND_IF", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\TrafficLightHMI.st"}, {"text": "VAR_GLOBAL\n\tIReset\t:\tBOOL;\nEND_VAR", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-global\\GVL_Input.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\nMCountBackwards := temp;", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}], "task_id": "F_SecondsToTime"}
{"requirement": "This code is intended to implement the conversion of a TIME input value into its equivalent number of seconds as a DWORD.", "provide_code": "FUNCTION F_TimeToSeconds : DWORD\nVAR_INPUT\n\ttTime\t:\tTIME;\t\t//\u8f93\u5165\u7684\u65f6\u95f4\nEND_VAR", "docs": [{"text": "FUNCTION F_TimeToSeconds : DWORD\nVAR_INPUT\n\ttTime\t:\tTIME;\t\t//\u8f93\u5165\u7684\u65f6\u95f4\nEND_VAR\n\n// \u5c06TIME\u7c7b\u578b\u8f6c\u6362\u4e3a\u79d2\u6570\uff08DWORD\uff09\n// TIME\u5185\u90e8\u662f\u6beb\u79d2\uff0c\u9664\u4ee51000\u5f97\u5230\u79d2\u6570\nF_TimeToSeconds := DINT_TO_DWORD(TRUNC(TIME_TO_DWORD(tTime) / 1000.0));\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\F_TimeToSeconds.st"}, {"text": "FUNCTION F_SecondsToTime : TIME\nVAR_INPUT\n\tdwSeconds\t:\tDWORD;\t\t//\u8f93\u5165\u7684\u79d2\u6570\nEND_VAR\n\n// \u5c06\u79d2\u6570\uff08DWORD\uff09\u8f6c\u6362\u4e3aTIME\u7c7b\u578b\n// \u79d2\u6570\u4e58\u4ee51000\u5f97\u5230\u6beb\u79d2\nF_SecondsToTime := DWORD_TO_TIME(dwSeconds * 1000);\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\F_SecondsToTime.st"}, {"text": "FUNCTION_BLOCK FB_CountdownTimer\nVAR_INPUT\n\ttElapsedTime\t:\tTIME;\t\t//\u5df2\u7ecf\u8fc7\u7684\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684ET\uff09\n\ttTotalTime\t\t:\tTIME;\t\t//\u603b\u65f6\u95f4\uff08\u5b9a\u65f6\u5668\u7684PT\uff09\nEND_VAR\nVAR_OUTPUT\n\tnRemainingSeconds\t:\tUINT;\t//\u5269\u4f59\u79d2\u6570\nEND_VAR\nVAR\n\tnTotalSeconds\t\t:\tUINT;\t//\u603b\u79d2\u6570\n\tnElapsedSeconds\t\t:\tUINT;\t//\u5df2\u8fc7\u79d2\u6570\nEND_VAR\n\n// \u5c06TIME\u8f6c\u6362\u4e3a\u79d2\nnTotalSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_DWORD(tTotalTime) / 1000.0));\nnElapsedSeconds := INT_TO_USINT(TRUNC_INT(TIME_TO_UINT(tElapsedTime) / 1000.0));\n\n// \u8ba1\u7b97\u5269\u4f59\u79d2\u6570\nnRemainingSeconds := nTotalSeconds - nElapsedSeconds;\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-FUN\\FB_CountdownTimer.st"}, {"text": "PROGRAM TrafficLigthHMI\nVAR\n\tgreenTimeOn\t\t:\tDWORD := F_TimeToSeconds(MGreenTimeOn);\t\t//\u7eff\u706f\u4eae\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tgreenTimeFlash\t:\tDWORD := F_TimeToSeconds(MGreenTimeFlash);\t//\u7eff\u706f\u95ea\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tyellowTimeOn\t:\tDWORD := F_TimeToSeconds(MYellowTimeOn);\t//\u9ec4\u706f\u4eae\u7684\u65f6\u95f4\uff08\u79d2\uff09\n\tbSave\t:\tBOOL;\n\tfbSaveRtrig\t:\tR_TRIG;\nEND_VAR\n\nfbSaveRtrig(CLK := bSave);\nIF fbSaveRtrig.Q THEN\n\tMGreenTimeOn := F_SecondsToTime(greenTimeOn);\n\tMGreenTimeFlash := F_SecondsToTime(greenTimeFlash);\n\tMYellowTimeOn := F_SecondsToTime(yellowTimeOn);\nEND_IF", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\TrafficLightHMI.st"}, {"text": "VAR_GLOBAL\n\tMCountBackwards\t:\tUINT;//\u5269\u4f59\u65f6\u95f4\n\tMGreenTimeOn\t:\tTIME := T#30S;//\u7eff\u706f\u4eae\u7684\u65f6\u95f4\n\tMGreenTimeFlash\t:\tTIME := T#3S;//\u7eff\u706f\u95ea\u7684\u65f6\u95f4\n\tMYellowTimeOn\t:\tTIME := T#3S;//\u9ec4\u706f\u4eae\u7684\u65f6\u95f4\nEND_VAR", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-global\\GVL_Memory.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "VAR_GLOBAL\n\tIReset\t:\tBOOL;\nEND_VAR", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-global\\GVL_Input.st"}, {"text": "\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\nMCountBackwards := temp;", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "PROGRAM PLC_PRG\nVAR\n\tfbTon\t:\tTON;\n\tfbTon1\t:\tTON;\n\tnState\t:\tUSINT;\n\tfbResetRtrig\t:\tR_TRIG;\n\ttemp\t:\tUINT;\n\tfbCountdown\t:\tFB_CountdownTimer;\t//\u5012\u8ba1\u65f6\u8ba1\u7b97\u529f\u80fd\u5757\nEND_VAR\n\nfbResetRtrig(CLK := IReset);\nIF fbResetRtrig.Q THEN\n\tfbTon(IN := FALSE);\n\tfbTon1(IN := FALSE);\n\tQSouthNorthGreen := FALSE;\n\tQSouthNorthYellow := FALSE;\n\tQSouthNorthRed := FALSE;\n\tQEastWestGreen := FALSE;\n\tQEastWestYellow := FALSE;\n\tQEastWestRed := FALSE;\n\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t5:\n\t\tQEastWestYellow := TRUE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\t\tnState := 0;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\nEND_CASE\n\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQEastWestGreen := TRUE;////\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u4eae\n\t\tQEastWestRed := FALSE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u5f00\u59cb\u95ea\n\t\t\tnState := 4;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t4:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQEastWestGreen := NOT QEastWestGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\t\tnState := 5;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}, {"text": "\tMCountBackwards := 0;\n\tnState := 0;\nEND_IF\n\nCASE nState OF \n\t0:\n\t\tQSouthNorthGreen := TRUE;//\u5357\u5317\u7eff\u706f\u4eae\n\t\tQEastWestGreen := FALSE;//\u4e1c\u897f\u65b9\u5411\u7eff\u706f\u706d\n\t\tQEastWestRed := TRUE;//\u4e1c\u897f\u65b9\u5411\u7ea2\u706f\u4eae\n\t\tQEastWestYellow := FALSE;//\u4e1c\u897f\u65b9\u5411\u9ec4\u706f\u706d\n\t\tQSouthNorthRed := FALSE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u706d\n\t\tfbTon(IN := TRUE,PT := MGreenTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u5f00\u59cb\u95ea\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\uff0c\u51c6\u5907\u5f00\u59cb\u95ea\n\t\t//\tQEastWestRed := FALSE;\n\t\t\tnState := 1;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t1:\n\t\tfbTon(IN := TRUE,PT := MGreenTimeFlash);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u7eff\u706f\u706d\uff0c\u9ec4\u706f\u4eae\n\t\tfbTon1(IN := TRUE,PT := T#0.3S);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tIF fbTon1.Q THEN\n\t\t\tQSouthNorthGreen := NOT QSouthNorthGreen;\n\t\t\tfbTon1(IN := FALSE);//\u5b9a\u65f60.5s\uff0c\u7eff\u706f\u95ea\u70c1\n\t\tEND_IF\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\t\tnState := 2;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MGreenTimeFlash);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t2:\n\t\tQSouthNorthYellow := TRUE;//\u5357\u5317\u9ec4\u706f\u4eae\n\t\tfbTon(IN := TRUE,PT := MYellowTimeOn);//\u5b9a\u65f6\uff0c\u5b9a\u65f6\u5230\u540e\uff0c\u9ec4\u706f\u706d\n\t\tIF fbTon.Q THEN\n\t\t\tfbTon(IN := FALSE);\n\t\t\tQSouthNorthYellow := FALSE;//\u5357\u5317\u9ec4\u706f\u706d\n\t\t\tnState := 3;\n\t\tEND_IF\n\t\t//\u8ba1\u7b97\u5012\u8ba1\u65f6\n\t\tfbCountdown(tElapsedTime := fbTon.ET, tTotalTime := MYellowTimeOn);\n\t\ttemp := fbCountdown.nRemainingSeconds;\n\t3:\n\t\tQSouthNorthGreen := FALSE;//\u5357\u5317\u7eff\u706f\u706d\n\t\tQSouthNorthRed := TRUE;//\u5357\u5317\u65b9\u5411\u7ea2\u706f\u4eae\n", "title": "\u4ea4\u901a\u4fe1\u53f7\u706f\u63a7\u5236\u5b9e\u8bad-PRG\\PLC_PRG.st"}], "task_id": "F_TimeToSeconds"}
