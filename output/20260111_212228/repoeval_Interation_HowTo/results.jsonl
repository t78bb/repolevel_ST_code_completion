{"requirement": "\u8fd9\u4e2a\u4ee3\u7801\u610f\u5728\u5b9e\u73b0\u901a\u8fc7 MQTT \u534f\u8bae\u5411\u6307\u5b9a\u4e3b\u9898\u53d1\u5e03\u5b57\u7b26\u4e32\u6d88\u606f\u7684\u529f\u80fd\u3002", "provide_code": "FUNCTION_BLOCK FirstPublish\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "docs": [{"text": "FUNCTION_BLOCK FirstPublish\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tpublisher:MQTT.MQTTPublish;\n\tdoPublish: BOOL;\n\tinit: BOOL;\n\tsendPayload:STRING :='testPayload';\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tpublisher.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\nEND_IF\npublisher(\n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tPayloadString:= ADR(sendPayload), \n\tPublishAsString:= TRUE, \n\tQoSIn:= MQTT.QoS.ExactlyOnce, \n\tMRetain:= FALSE, \n\tsend:= doPublish);", "title": "Interation_HowTo-FUN\\FirstPublish.st"}, {"text": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tcollector:MQTT.CallbackCollector;\n\tSUB1:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\treceiver:MQTT.ReceiveString;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSUB1.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\n\tcollector.put(instance:= receiver);\n\treceiver.initAsFindTopic(compString:= ADR('TestTopic/FromCodesys'), returnHit:= TRUE);\nEND_IF\n\nSUB1(\n\tSubscribe:= TRUE, \n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= collector);\n", "title": "Interation_HowTo-FUN\\FirstSubscription.st"}, {"text": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tcollector:MQTT.CallbackCollector;\n\tSUB1:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\treceiver:MQTT.ReceiveString;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSUB1.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\n\tcollector.put(instance:= receiver);\n\treceiver.initAsFindTopic(compString:= ADR('TestTopic/FromCodesys'), returnHit:= TRUE);\nEND_IF\n\nSUB1(\n\tSubscribe:= TRUE, \n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= collector);\n\t", "title": "Interation_HowTo-FUN\\FirstSubscription.st"}, {"text": "PROGRAM HowTo\nVAR\n\tMQTT_IN_OUT:MQTT.MQTT_IN_OUT;\n\t//HandleMQTT:SD_MQTT.HANDLE_MQTT;\n\tFirstPublish:FirstPublish;\n\tFirstSubscription:FirstSubscription;\nEND_VAR\n\nMQTT_IN_OUT.clientFB(\n\tMQTT_IN_OUT:= MQTT_IN_OUT, \n\tENABLE:= TRUE, \n\tURL:= 'test.mosquitto.org:1883', \n\tTIMEOUT:= T#2S, \n\tTLS:= FALSE);\n\t\nFirstPublish();\nFirstSubscription();", "title": "Interation_HowTo-PRG\\HowTo.st"}], "task_id": "FirstPublish"}
{"requirement": "\u8fd9\u4e2a\u4ee3\u7801\u610f\u5728\u5b9e\u73b0\u901a\u8fc7 MQTT \u534f\u8bae\u8ba2\u9605\u7279\u5b9a\u4e3b\u9898\u5e76\u5904\u7406\u63a5\u6536\u5230\u7684\u5b57\u7b26\u4e32\u6d88\u606f\u3002", "provide_code": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "docs": [{"text": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tcollector:MQTT.CallbackCollector;\n\tSUB1:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\treceiver:MQTT.ReceiveString;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSUB1.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\n\tcollector.put(instance:= receiver);\n\treceiver.initAsFindTopic(compString:= ADR('TestTopic/FromCodesys'), returnHit:= TRUE);\nEND_IF\n\nSUB1(\n\tSubscribe:= TRUE, \n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= collector);\n", "title": "Interation_HowTo-FUN\\FirstSubscription.st"}, {"text": "FUNCTION_BLOCK FirstSubscription\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tcollector:MQTT.CallbackCollector;\n\tSUB1:MQTT.MQTTSubscribe;\n\tinit: BOOL;\n\treceiver:MQTT.ReceiveString;\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tSUB1.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\n\tcollector.put(instance:= receiver);\n\treceiver.initAsFindTopic(compString:= ADR('TestTopic/FromCodesys'), returnHit:= TRUE);\nEND_IF\n\nSUB1(\n\tSubscribe:= TRUE, \n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tQoSSubscribe:= MQTT.QoS.ExactlyOnce, \n\tExpectingString:= TRUE, \n\tCallback:= collector);\n\t", "title": "Interation_HowTo-FUN\\FirstSubscription.st"}, {"text": "FUNCTION_BLOCK FirstPublish\nVAR_INPUT\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\n\tpublisher:MQTT.MQTTPublish;\n\tdoPublish: BOOL;\n\tinit: BOOL;\n\tsendPayload:STRING :='testPayload';\nEND_VAR\n\nIF NOT init THEN\n\tinit := TRUE;\n\tpublisher.SetMqttInOut(MQTT_IN_OUT:= HowTo.MQTT_IN_OUT);\nEND_IF\npublisher(\n\tTopic:= ADR('TestTopic/FromCodesys'), \n\tPayloadString:= ADR(sendPayload), \n\tPublishAsString:= TRUE, \n\tQoSIn:= MQTT.QoS.ExactlyOnce, \n\tMRetain:= FALSE, \n\tsend:= doPublish);", "title": "Interation_HowTo-FUN\\FirstPublish.st"}, {"text": "PROGRAM HowTo\nVAR\n\tMQTT_IN_OUT:MQTT.MQTT_IN_OUT;\n\t//HandleMQTT:SD_MQTT.HANDLE_MQTT;\n\tFirstPublish:FirstPublish;\n\tFirstSubscription:FirstSubscription;\nEND_VAR\n\nMQTT_IN_OUT.clientFB(\n\tMQTT_IN_OUT:= MQTT_IN_OUT, \n\tENABLE:= TRUE, \n\tURL:= 'test.mosquitto.org:1883', \n\tTIMEOUT:= T#2S, \n\tTLS:= FALSE);\n\t\nFirstPublish();\nFirstSubscription();", "title": "Interation_HowTo-PRG\\HowTo.st"}], "task_id": "FirstSubscription"}
