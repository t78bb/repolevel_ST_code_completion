{"prompt": "METHOD CheckScrewAxis : BOOL", "reference": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n\t\t\tdone := TRUE;\n\tEND_CASE\nEND_WHILE\n\nCheckScrewAxis := done AND NOT error;", "docs": [{"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n\t\t\tdone := TRUE;\n\tEND_CASE\nEND_WHILE\n\nCheckScrewAxis := done AND NOT error;", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "PROGRAM DynModel_Tests\nVAR_OUTPUT\n\tsuccessful: BOOL;\n\terror : BOOL;\nEND_VAR\nVAR\n\tstate : INT;\n\ttester : Test_DynModel_Scara2_Z;\nEND_VAR\n\nCASE state OF\n\t0:\n\t\tIF tester.CheckScrewAxis() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t10:\n\t\tIF tester.CheckStandstillTorque() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t20:\n\t\tstate := 100;\nEND_CASE\n\nsuccessful := state = 100;\n", "title": "Robotics_DynamicModel-PRG\\DynModel_Tests.st"}, {"text": "PROGRAM DynModel_Tests\nVAR_OUTPUT\n\tsuccessful: BOOL;\n\terror : BOOL;\nEND_VAR\nVAR\n\tstate : INT;\n\ttester : Test_DynModel_Scara2_Z;\nEND_VAR\n\nCASE state OF\n\t0:\n\t\tIF tester.CheckScrewAxis() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t10:\n\t\tIF tester.CheckStandstillTorque() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n", "title": "Robotics_DynamicModel-PRG\\DynModel_Tests.st"}, {"text": "METHOD PRIVATE IsScrewAxisAndKinematicEqual : BOOL\nVAR_IN_OUT CONSTANT\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR_INPUT\n\tepsilon : LREAL;\nEND_VAR\nVAR\n\tgetKinematic : MC_ReadKinTransform;\n\tscrewAxisResult : SM3M.SMC_Frame;\n\tconvertedAxisPos : SM3M.SMC_Vec;\n\tkinematicResult : SM3M.SMC_Frame;\n\tcdNotUsed : TRAFO.CONFIGDATA;\nEND_VAR\n\nconvertedAxisPos.a[0] := axisPos.a0 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[1] := axisPos.a1 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[2] := axisPos.a2;\nconvertedAxisPos.n := 3;\n\nSMC_OpenChainKinematics_SolveForward(\n\tfTCP:= screwAxisResult,\n\taS:= m_dynModel.m_aS,\n\tvJoints:= convertedAxisPos,\n\tfTCP_init:= ZERO_TCP_FRAME);\n\ngetKinematic(\n\tAxisGroup:= AxisGroup,\n\tEnable:= TRUE);\n\nIF getKinematic.Valid AND_THEN getKinematic.KinTransform <> 0 THEN\n\tgetKinematic.KinTransform.AxesToCartesian(\n\t\tf:= kinematicResult,\n\t\tcd:= cdNotUsed,\n\t\ta:= axisPos);\n\t\n\tIsScrewAxisAndKinematicEqual :=\n\t\tABS(screwAxisResult.vT.dX - kinematicResult.vT.dX) <= epsilon\n\t\tAND_THEN ABS(screwAxisResult.vT.dY- kinematicResult.vT.dY) <= epsilon\n\t\tAND_THEN ABS(screwAxisResult.vT.dZ - kinematicResult.vT.dZ) <= epsilon;\nELSE\n\tIsScrewAxisAndKinematicEqual := FALSE;\nEND_IF", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_IsScrewAxisAndKinematicEqual.st"}, {"text": "METHOD PRIVATE IsScrewAxisAndKinematicEqual : BOOL\nVAR_IN_OUT CONSTANT\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR_INPUT\n\tepsilon : LREAL;\nEND_VAR\nVAR\n\tgetKinematic : MC_ReadKinTransform;\n\tscrewAxisResult : SM3M.SMC_Frame;\n\tconvertedAxisPos : SM3M.SMC_Vec;\n\tkinematicResult : SM3M.SMC_Frame;\n\tcdNotUsed : TRAFO.CONFIGDATA;\nEND_VAR\n\nconvertedAxisPos.a[0] := axisPos.a0 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[1] := axisPos.a1 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[2] := axisPos.a2;\nconvertedAxisPos.n := 3;\n\nSMC_OpenChainKinematics_SolveForward(\n\tfTCP:= screwAxisResult,\n\taS:= m_dynModel.m_aS,\n\tvJoints:= convertedAxisPos,\n\tfTCP_init:= ZERO_TCP_FRAME);\n\ngetKinematic(\n\tAxisGroup:= AxisGroup,\n\tEnable:= TRUE);\n\nIF getKinematic.Valid AND_THEN getKinematic.KinTransform <> 0 THEN\n\tgetKinematic.KinTransform.AxesToCartesian(\n\t\tf:= kinematicResult,\n\t\tcd:= cdNotUsed,\n\t\ta:= axisPos);\n\t\n\tIsScrewAxisAndKinematicEqual :=\n\t\tABS(screwAxisResult.vT.dX - kinematicResult.vT.dX) <= epsilon\n\t\tAND_THEN ABS(screwAxisResult.vT.dY- kinematicResult.vT.dY) <= epsilon\n\t\tAND_THEN ABS(screwAxisResult.vT.dZ - kinematicResult.vT.dZ) <= epsilon;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_IsScrewAxisAndKinematicEqual.st"}, {"text": "PROGRAM DynModel_Tests\nVAR_OUTPUT\n\tsuccessful: BOOL;\n\terror : BOOL;\nEND_VAR\nVAR\n\tstate : INT;\n\ttester : Test_DynModel_Scara2_Z;\nEND_VAR\n\nCASE state OF\n\t0:\n\t\tIF tester.CheckScrewAxis() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t10:\n\t\tIF tester.CheckStandstillTorque() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t20:\n\t\tstate := 100;\nEND_CASE\n\nsuccessful := state = 100;\nerror := state >= 1000;", "title": "Robotics_DynamicModel-PRG\\DynModel_Tests.st"}, {"text": "METHOD PRIVATE IsScrewAxisAndKinematicEqual : BOOL\nVAR_IN_OUT CONSTANT\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR_INPUT\n\tepsilon : LREAL;\nEND_VAR\nVAR\n\tgetKinematic : MC_ReadKinTransform;\n\tscrewAxisResult : SM3M.SMC_Frame;\n\tconvertedAxisPos : SM3M.SMC_Vec;\n\tkinematicResult : SM3M.SMC_Frame;\n\tcdNotUsed : TRAFO.CONFIGDATA;\nEND_VAR\n\nconvertedAxisPos.a[0] := axisPos.a0 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[1] := axisPos.a1 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[2] := axisPos.a2;\nconvertedAxisPos.n := 3;\n\nSMC_OpenChainKinematics_SolveForward(\n\tfTCP:= screwAxisResult,\n\taS:= m_dynModel.m_aS,\n\tvJoints:= convertedAxisPos,\n\tfTCP_init:= ZERO_TCP_FRAME);\n\ngetKinematic(\n\tAxisGroup:= AxisGroup,\n\tEnable:= TRUE);\n\nIF getKinematic.Valid AND_THEN getKinematic.KinTransform <> 0 THEN\n\tgetKinematic.KinTransform.AxesToCartesian(\n\t\tf:= kinematicResult,\n\t\tcd:= cdNotUsed,\n\t\ta:= axisPos);\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_IsScrewAxisAndKinematicEqual.st"}, {"text": "METHOD PRIVATE IsScrewAxisAndKinematicEqual : BOOL\nVAR_IN_OUT CONSTANT\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR_INPUT\n\tepsilon : LREAL;\nEND_VAR\nVAR\n\tgetKinematic : MC_ReadKinTransform;\n\tscrewAxisResult : SM3M.SMC_Frame;\n\tconvertedAxisPos : SM3M.SMC_Vec;\n\tkinematicResult : SM3M.SMC_Frame;\n\tcdNotUsed : TRAFO.CONFIGDATA;\nEND_VAR\n\nconvertedAxisPos.a[0] := axisPos.a0 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[1] := axisPos.a1 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[2] := axisPos.a2;\nconvertedAxisPos.n := 3;\n\nSMC_OpenChainKinematics_SolveForward(\n\tfTCP:= screwAxisResult,\n\taS:= m_dynModel.m_aS,\n\tvJoints:= convertedAxisPos,\n\tfTCP_init:= ZERO_TCP_FRAME);\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_IsScrewAxisAndKinematicEqual.st"}, {"text": "METHOD PRIVATE IsScrewAxisAndKinematicEqual : BOOL\nVAR_IN_OUT CONSTANT\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR_INPUT\n\tepsilon : LREAL;\nEND_VAR\nVAR\n\tgetKinematic : MC_ReadKinTransform;\n\tscrewAxisResult : SM3M.SMC_Frame;\n\tconvertedAxisPos : SM3M.SMC_Vec;\n\tkinematicResult : SM3M.SMC_Frame;\n\tcdNotUsed : TRAFO.CONFIGDATA;\nEND_VAR\n\nconvertedAxisPos.a[0] := axisPos.a0 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[1] := axisPos.a1 * SM3M.SMC_FACTOR_DEG_TO_RAD;\nconvertedAxisPos.a[2] := axisPos.a2;\nconvertedAxisPos.n := 3;\n\nSMC_OpenChainKinematics_SolveForward(\n\tfTCP:= screwAxisResult,\n\taS:= m_dynModel.m_aS,\n\tvJoints:= convertedAxisPos,\n\tfTCP_init:= ZERO_TCP_FRAME);\n\ngetKinematic(\n\tAxisGroup:= AxisGroup,\n\tEnable:= TRUE);\n\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_IsScrewAxisAndKinematicEqual.st"}, {"text": "\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteLimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeMovementWithLoad;\n\t\tEND_IF\n\t\n\tInitializeMovementWithLoad:\n\t\tsetLoad.Load := LOAD;\n\t\tsetLoad.Execute := TRUE;\n\t\t\n\t\tIF setLoad.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetLoad.Execute := FALSE;\n\t\t\tstate := ExecuteMovementWithLoad;\n\t\tEND_IF\n\t\n\tExecuteMovementWithLoad:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := FinalizeTestMovement;\n\t\tEND_IF\n\t\n\tFinalizeTestMovement:\n\t\tcurrentTestMovement := currentTestMovement + 1;\n\t\t\n\t\tIF currentTestMovement < TEST_MOVEMENT_COUNT THEN\n\t\t\tstate := InitializeTestMovement;\n\t\tELSE\n\t\t\tstate := DemoFinished;\n\t\tEND_IF\nEND_CASE\n\ngroupPower(AxisGroup:= AxisGroup);\nsetDynamics(AxisGroup:= AxisGroup);\nmoveDirectAbs(AxisGroup:= AxisGroup);\nsetLoad(AxisGroup:= AxisGroup);\nsetPosition(AxisGroup:= AxisGroup);\nsetAxisLimits(AxisGroup:= AxisGroup);", "title": "Robotics_DynamicModel-PRG\\PLC_PRG.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\nEND_FOR", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tInitializeLimitedTorqueMovement:\n\t\t/// Torque limit for axis 2 in [Nm]\n\t\tsetAxisLimits.AxisLimits[1].maxTorque := 2;\n\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteLimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeMovementWithLoad;\n\t\tEND_IF\n\t\n\tInitializeMovementWithLoad:\n\t\tsetLoad.Load := LOAD;\n\t\tsetLoad.Execute := TRUE;\n\t\t\n\t\tIF setLoad.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetLoad.Execute := FALSE;\n\t\t\tstate := ExecuteMovementWithLoad;\n\t\tEND_IF\n\t\n\tExecuteMovementWithLoad:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := FinalizeTestMovement;\n\t\tEND_IF\n\t\n\tFinalizeTestMovement:\n\t\tcurrentTestMovement := currentTestMovement + 1;\n\t\t\n\t\tIF currentTestMovement < TEST_MOVEMENT_COUNT THEN\n\t\t\tstate := InitializeTestMovement;\n\t\tELSE\n", "title": "Robotics_DynamicModel-PRG\\PLC_PRG.st"}], "metadata": {"task_id": "Robotics_DynamicModel/0", "ground_truth": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n\t\t\tdone := TRUE;\n\tEND_CASE\nEND_WHILE\n\nCheckScrewAxis := done AND NOT error;", "fpath_tuple": ["Help_functions", "Test_DynModel_Scara2_Z_CheckScrewAxis.st"], "context_start_lineno": 0, "lineno": 2, "function_name": "CheckScrewAxis"}}
{"prompt": "METHOD CheckStandstillTorque : BOOL", "reference": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\nEND_FOR", "docs": [{"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\nEND_FOR", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckStandstillTorque.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "PROGRAM DynModel_Tests\nVAR_OUTPUT\n\tsuccessful: BOOL;\n\terror : BOOL;\nEND_VAR\nVAR\n\tstate : INT;\n\ttester : Test_DynModel_Scara2_Z;\nEND_VAR\n\nCASE state OF\n\t0:\n\t\tIF tester.CheckScrewAxis() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t10:\n\t\tIF tester.CheckStandstillTorque() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t20:\n\t\tstate := 100;\nEND_CASE\n\nsuccessful := state = 100;\n", "title": "Robotics_DynamicModel-PRG\\DynModel_Tests.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "METHOD CheckScrewAxis : BOOL\nVAR\n\tstate : INT;\n\tdone : BOOL;\n\terror : BOOL;\n\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "PROGRAM DynModel_Tests\nVAR_OUTPUT\n\tsuccessful: BOOL;\n\terror : BOOL;\nEND_VAR\nVAR\n\tstate : INT;\n\ttester : Test_DynModel_Scara2_Z;\nEND_VAR\n\nCASE state OF\n\t0:\n\t\tIF tester.CheckScrewAxis() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t10:\n\t\tIF tester.CheckStandstillTorque() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n", "title": "Robotics_DynamicModel-PRG\\DynModel_Tests.st"}, {"text": "PROGRAM DynModel_Tests\nVAR_OUTPUT\n\tsuccessful: BOOL;\n\terror : BOOL;\nEND_VAR\nVAR\n\tstate : INT;\n\ttester : Test_DynModel_Scara2_Z;\nEND_VAR\n\nCASE state OF\n\t0:\n\t\tIF tester.CheckScrewAxis() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t10:\n\t\tIF tester.CheckStandstillTorque() THEN\n\t\t\tstate := state + 10;\n\t\tELSE\n\t\t\tstate := state + 1000;\n\t\tEND_IF\n\t\n\t20:\n\t\tstate := 100;\nEND_CASE\n\nsuccessful := state = 100;\nerror := state >= 1000;", "title": "Robotics_DynamicModel-PRG\\DynModel_Tests.st"}, {"text": "\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteLimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeMovementWithLoad;\n\t\tEND_IF\n\t\n\tInitializeMovementWithLoad:\n\t\tsetLoad.Load := LOAD;\n\t\tsetLoad.Execute := TRUE;\n\t\t\n\t\tIF setLoad.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetLoad.Execute := FALSE;\n\t\t\tstate := ExecuteMovementWithLoad;\n\t\tEND_IF\n\t\n\tExecuteMovementWithLoad:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := FinalizeTestMovement;\n\t\tEND_IF\n\t\n\tFinalizeTestMovement:\n\t\tcurrentTestMovement := currentTestMovement + 1;\n\t\t\n\t\tIF currentTestMovement < TEST_MOVEMENT_COUNT THEN\n\t\t\tstate := InitializeTestMovement;\n\t\tELSE\n\t\t\tstate := DemoFinished;\n\t\tEND_IF\nEND_CASE\n\ngroupPower(AxisGroup:= AxisGroup);\nsetDynamics(AxisGroup:= AxisGroup);\nmoveDirectAbs(AxisGroup:= AxisGroup);\nsetLoad(AxisGroup:= AxisGroup);\nsetPosition(AxisGroup:= AxisGroup);\nsetAxisLimits(AxisGroup:= AxisGroup);", "title": "Robotics_DynamicModel-PRG\\PLC_PRG.st"}, {"text": "\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tInitializeLimitedTorqueMovement:\n\t\t/// Torque limit for axis 2 in [Nm]\n\t\tsetAxisLimits.AxisLimits[1].maxTorque := 2;\n\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteLimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeMovementWithLoad;\n\t\tEND_IF\n\t\n\tInitializeMovementWithLoad:\n\t\tsetLoad.Load := LOAD;\n\t\tsetLoad.Execute := TRUE;\n\t\t\n\t\tIF setLoad.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetLoad.Execute := FALSE;\n\t\t\tstate := ExecuteMovementWithLoad;\n\t\tEND_IF\n\t\n\tExecuteMovementWithLoad:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := FinalizeTestMovement;\n\t\tEND_IF\n\t\n\tFinalizeTestMovement:\n\t\tcurrentTestMovement := currentTestMovement + 1;\n\t\t\n\t\tIF currentTestMovement < TEST_MOVEMENT_COUNT THEN\n\t\t\tstate := InitializeTestMovement;\n\t\tELSE\n", "title": "Robotics_DynamicModel-PRG\\PLC_PRG.st"}, {"text": "\t\n\taxisPos : TRAFO.AXISPOS_REF;\nEND_VAR\nVAR CONSTANT\n\tEPS : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\nWHILE NOT done AND NOT error DO\n\tCASE state OF\n\t\t0:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t10:\n\t\t\taxisPos.a0 := 0;\t/// [\u00b0]\n\t\t\taxisPos.a1 := 90;\t/// [\u00b0]\n\t\t\taxisPos.a2 := 0.03;\t/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t20:\n\t\t\taxisPos.a0 := 45;\t/// [\u00b0]\n\t\t\taxisPos.a1 := -50;\t/// [\u00b0]\n\t\t\taxisPos.a2 := -0.01;/// [m]\n\t\t\t\n\t\t\tIF IsScrewAxisAndKinematicEqual(axisPos, EPS) THEN\n\t\t\t\tstate := state + 10;\n\t\t\tELSE\n\t\t\t\terror := TRUE;\n\t\t\tEND_IF\n\t\t\n\t\t30:\n\t\t\tdone := TRUE;\n\tEND_CASE\nEND_WHILE\n\nCheckScrewAxis := done AND NOT error;", "title": "Robotics_DynamicModel-Help_functions\\Test_DynModel_Scara2_Z_CheckScrewAxis.st"}, {"text": "\t\t\n\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteUnlimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteUnlimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tInitializeLimitedTorqueMovement:\n\t\t/// Torque limit for axis 2 in [Nm]\n\t\tsetAxisLimits.AxisLimits[1].maxTorque := 2;\n\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteLimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeMovementWithLoad;\n\t\tEND_IF\n\t\n\tInitializeMovementWithLoad:\n\t\tsetLoad.Load := LOAD;\n\t\tsetLoad.Execute := TRUE;\n\t\t\n\t\tIF setLoad.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetLoad.Execute := FALSE;\n\t\t\tstate := ExecuteMovementWithLoad;\n\t\tEND_IF\n\t\n\tExecuteMovementWithLoad:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n", "title": "Robotics_DynamicModel-PRG\\PLC_PRG.st"}, {"text": "METHOD PRIVATE ResetRobotPosition : BOOL\n\nsetPosition.Position := start;\nsetPosition.CoordSystem := SMC_COORD_SYSTEM.ACS;\nsetPosition.Execute := TRUE;\n\nIF setPosition.Done THEN\n\tsetPosition.Execute := FALSE;\nEND_IF\n\nResetRobotPosition := setPosition.Done;", "title": "Robotics_DynamicModel-PRG\\PLC_PRG_ResetRobotPosition.st"}, {"text": "\t\t\n\t\tIF setLoad.Done THEN\n\t\t\tsetLoad.Execute := FALSE;\n\t\t\tstate := InitializeUnlimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tInitializeUnlimitedTorqueMovement:\n\t\tsetAxisLimits.AxisLimits[0] := DEFAULT_REVOLUTE_AXIS_LIMITS;\n\t\tsetAxisLimits.AxisLimits[1] := DEFAULT_REVOLUTE_AXIS_LIMITS;\n\t\tsetAxisLimits.AxisLimits[2] := DEFAULT_PRISMATIC_AXIS_LIMITS;\n\t\t\n\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteUnlimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteUnlimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tInitializeLimitedTorqueMovement:\n\t\t/// Torque limit for axis 2 in [Nm]\n\t\tsetAxisLimits.AxisLimits[1].maxTorque := 2;\n\t\tsetAxisLimits.Execute := TRUE;\n\t\t\n\t\tIF setAxisLimits.Done AND_THEN ResetRobotPosition() THEN\n\t\t\tsetAxisLimits.Execute := FALSE;\n\t\t\tstate := ExecuteLimitedTorqueMovement;\n\t\tEND_IF\n\t\n\tExecuteLimitedTorqueMovement:\n\t\tmoveDirectAbs.Position := destination;\n\t\tmoveDirectAbs.Execute := TRUE;\n\t\t\n\t\tIF moveDirectAbs.Done THEN\n\t\t\tmoveDirectAbs.Execute := FALSE;\n\t\t\tstate := InitializeMovementWithLoad;\n\t\tEND_IF\n\t\n\tInitializeMovementWithLoad:\n\t\tsetLoad.Load := LOAD;\n\t\tsetLoad.Execute := TRUE;\n\t\t\n", "title": "Robotics_DynamicModel-PRG\\PLC_PRG.st"}], "metadata": {"task_id": "Robotics_DynamicModel/1", "ground_truth": "METHOD CheckStandstillTorque : BOOL\nVAR\n\texpectedTorque : SM3M.SMC_Vec;\n\tcalculatedTorque : SM3M.SMC_Vec;\n\taxesState : SM3M.SMC_DynVecState;\n\taddParams : SMDYN.DynamicsParams;\n\ti : DINT;\nEND_VAR\nVAR CONSTANT\n\tEPSILON : LREAL := 1E-10;\nEND_VAR\n\nm_dynModel.Init();\n\n/// All axes in zero position.\naxesState.v.a[0] := 0;\naxesState.v.a[1] := 0;\naxesState.v.a[2] := 0;\naxesState.v.n := axesState.v_s.n := axesState.v_ss.n := 3;\n\n/// Gravitational acceleration in [m/s\u00b2]\naddParams.g.dZ := 9.81;\n\n/// Expected torque of the revolute axis of arm 1 in [Nm]\nexpectedTorque.a[0] := 0;\n/// Expected torque of the revolute axis of arm 2 in [Nm]\nexpectedTorque.a[1] := 0;\n/// Expected force of the prismatic z-axis in [N]\nexpectedTorque.a[2] := - m_dynModel.zAxisMass * 9.81;\nexpectedTorque.n := 3;\n\nm_dynModel.AxesStateToTorque(\n\ttorque:= calculatedTorque,\n\taxesState:= axesState,\n\taddParams:= addParams);\n\nCheckStandstillTorque := calculatedTorque.n = expectedTorque.n;\nFOR i := 0 TO calculatedTorque.n - 1 DO\n\tCheckStandstillTorque := CheckStandstillTorque\n\t\t\t\t\t\t\t AND_THEN ABS(calculatedTorque.a[i] - expectedTorque.a[i]) <= EPSILON;\nEND_FOR", "fpath_tuple": ["Help_functions", "Test_DynModel_Scara2_Z_CheckStandstillTorque.st"], "context_start_lineno": 0, "lineno": 2, "function_name": "CheckStandstillTorque"}}
