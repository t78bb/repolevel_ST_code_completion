{"prompt": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR", "reference": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "docs": [{"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "title": "healthydata-FUN\\fileSave.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "title": "healthydata-FUN\\fileSave_close.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "title": "healthydata-FUN\\fileSave_createDir.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// \u5199\u5165\u6570\u636e\n\nEND_IF", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "END_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "PROGRAM FileSaver\nVAR\n\tpath \t\t\t:STRING:='D:/log';\n\tintervalMs\t\t:INT := 10;\t\t//\u95f4\u9694\u65f6\u95f4\n\t\n\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "PROGRAM FileSaver\nVAR\n\tpath \t\t\t:STRING:='D:/log';\n\tintervalMs\t\t:INT := 10;\t\t//\u95f4\u9694\u65f6\u95f4\n\t\n\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n\t\t IF flag[2, si] = 0 THEN\n\t\t\t sav[2, si].new(devName := gUI.sky[si].name);\n\t\t\t flag[2, si] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getSkyData();\n\t\t //write\n\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t ELSE\n\t\t IF flag[2, si] = 1 THEN\n\t\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t\t\t sav[2, si].close();\n\t\t\t flag[2, si] := 0;\n", "title": "healthydata-PRG\\FileSaver.st"}], "metadata": {"task_id": "healthydata/0", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "fpath_tuple": ["FUN", "fileSave_close.st"], "context_start_lineno": 0, "lineno": 6, "function_name": "fileSave"}}
{"prompt": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR", "reference": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "docs": [{"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "title": "healthydata-FUN\\fileSave.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "title": "healthydata-FUN\\fileSave_close.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "title": "healthydata-FUN\\fileSave_createDir.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// \u5199\u5165\u6570\u636e\n\nEND_IF", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "END_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "PROGRAM FileSaver\nVAR\n\tpath \t\t\t:STRING:='D:/log';\n\tintervalMs\t\t:INT := 10;\t\t//\u95f4\u9694\u65f6\u95f4\n\t\n\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n\t\t IF flag[2, si] = 0 THEN\n\t\t\t sav[2, si].new(devName := gUI.sky[si].name);\n\t\t\t flag[2, si] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getSkyData();\n\t\t //write\n\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t ELSE\n\t\t IF flag[2, si] = 1 THEN\n\t\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t\t\t sav[2, si].close();\n\t\t\t flag[2, si] := 0;\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n", "title": "healthydata-PRG\\FileSaver.st"}], "metadata": {"task_id": "healthydata/1", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "fpath_tuple": ["FUN", "fileSave_createDir.st"], "context_start_lineno": 0, "lineno": 7, "function_name": "fileSave"}}
{"prompt": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR", "reference": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "docs": [{"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "title": "healthydata-FUN\\fileSave.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "title": "healthydata-FUN\\fileSave_close.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "title": "healthydata-FUN\\fileSave_createDir.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// \u5199\u5165\u6570\u636e\n\nEND_IF", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "END_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "PROGRAM FileSaver\nVAR\n\tpath \t\t\t:STRING:='D:/log';\n\tintervalMs\t\t:INT := 10;\t\t//\u95f4\u9694\u65f6\u95f4\n\t\n\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n\t\t IF flag[2, si] = 0 THEN\n\t\t\t sav[2, si].new(devName := gUI.sky[si].name);\n\t\t\t flag[2, si] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getSkyData();\n\t\t //write\n\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t ELSE\n\t\t IF flag[2, si] = 1 THEN\n\t\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t\t\t sav[2, si].close();\n\t\t\t flag[2, si] := 0;\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n", "title": "healthydata-PRG\\FileSaver.st"}], "metadata": {"task_id": "healthydata/2", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n\n\tfileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_WRITE, pResult:= ADR(F_err));\n\tlineCount := -1;\n\t//fileHandle := SysFileOpen(szFile:= fileName, am:=ACCESS_MODE.AM_APPEND, pResult:= ADR(F_err));", "fpath_tuple": ["FUN", "fileSave_new.st"], "context_start_lineno": 0, "lineno": 7, "function_name": "fileSave"}}
{"prompt": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR", "reference": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// \u5199\u5165\u6570\u636e\n\nEND_IF", "docs": [{"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "title": "healthydata-FUN\\fileSave.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tSysFileClose(hFile := fileHandle);\n\tfileHandle := 0;\nEND_IF", "title": "healthydata-FUN\\fileSave_close.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tdevName\t\t: STRING ;\n\tintervalt\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfilePath1\t:STRING;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nfilePath1 := FilePath;\nfilePath1 := concat(filePath1,'/');\nfilePath1 := concat(filePath1,devName);\nSysDirCreate2(filePath1, TRUE);", "title": "healthydata-FUN\\fileSave_createDir.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tdevName\t\t: STRING ;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// \u5199\u5165\u6570\u636e\n\nEND_IF", "title": "healthydata-FUN\\fileSave_write.st"}, {"text": "END_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n", "title": "healthydata-FUN\\fileSave_new.st"}, {"text": "\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n\tinit := FALSE;\n\tFOR gi := 1 TO 10 DO\n\t\t sav[1, gi](filePath := path, intervalt := intervalMs);\n\t\t sav[1, gi].createDir(gUI.grd[gi].name);\n\t\t init := FALSE;\n\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "PROGRAM FileSaver\nVAR\n\tpath \t\t\t:STRING:='D:/log';\n\tintervalMs\t\t:INT := 10;\t\t//\u95f4\u9694\u65f6\u95f4\n\t\n\tinit\t\t\t:BOOL:= TRUE;\n\tgi\t\t\t\t:INT;\n\tsi\t\t\t\t:INT;\t\n\tcCtrl\t\t\t:INT;\n\n\tsav\t\t\t\t:ARRAY[1..2, 0..10] OF fileSave;\n\tspeed\t\t\t:INT;\n\tnowCmd\t\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tcanWrite\t\t:ARRAY[1..2, 0..10] OF BOOL;\n\tnowPosition\t\t:ARRAY[1..2, 0..10] OF INT;\n\tlastPosition\t:ARRAY[1..2, 0..10] OF INT;\n\tstate\t\t\t:ARRAY[1..2, 0..10] OF INT;\n\tflag\t\t\t:ARRAY[1..2, 0..10] OF INT;\nEND_VAR\nVAR CONSTANT\n\taOil\t:ARRAY [1..7] OF INT :=[9,11,8,8,8,8,23];\t\t\nEND_VAR\n\n//initialize\nIF init THEN\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tEND_FOR\n\tFOR si := 0 TO 10 DO\n\t\t sav[2, si](filePath := path, intervalt := intervalMs);\n\t\t sav[2, si].createDir(gUI.sky[si].name);\n\t\t init := FALSE;\n\tEND_FOR\nEND_IF\n\n//detect and record ground and sky\nFOR gi := 1 TO 10 DO\n\t nowCmd[1, gi] := gUI.grd[gi].btnExtend OR gUI.grd[gi].btnRetract;\n\t IF nowCmd[1, gi] THEN\n\t\t IF flag[1, gi] = 0 THEN\n\t\t\t sav[1, gi].new(devName := gUI.grd[gi].name);\n\t\t\t flag[1, gi] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getGrdData();\n\t\t //write\n\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t ELSE\n\t\t IF flag[1, gi] = 1 THEN\n\t\t\t sav[1, gi].write(positionInt := nowPosition[1, gi],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[1, gi]);\n\t\t\t sav[1, gi].close();\n\t\t\t flag[1, gi] := 0;\n\t\t END_IF\n\t END_IF\nEND_FOR\n\n\nFOR si := 0 TO 10 DO\n\t nowCmd[2, si] := gUI.sky[si].btnExtend OR gUI.sky[si].btnRetract;\n\t IF nowCmd[2, si] THEN\n\t\t IF flag[2, si] = 0 THEN\n\t\t\t sav[2, si].new(devName := gUI.sky[si].name);\n\t\t\t flag[2, si] := 1;\n\t\t END_IF\n\t\t //prepare data\n\t\t getSkyData();\n\t\t //write\n\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t ELSE\n\t\t IF flag[2, si] = 1 THEN\n\t\t\t sav[2, si].write(positionInt := nowPosition[2, si],speedInt := speed,\n\t\t\t\t \t\t\t\t stateInt := state[2, si]);\n\t\t\t sav[2, si].close();\n\t\t\t flag[2, si] := 0;\n", "title": "healthydata-PRG\\FileSaver.st"}, {"text": "\tfileHandle0 : DWORD;\n\tdatetime\t: DATE_AND_TIME;\n\tUdIntms \t: UDINT;\n\tUdMsOffset  : UDINT;\n\tDTimer_Str  : STRING;\n\tuiYear \t\t: UINT; \n    uiMonth \t: UINT; \n    uiDay \t\t: UINT; \n    uiHour \t\t: UINT; \n    uiMinute \t: UINT; \n    uiSecond \t: UINT;\t\n\tuiMsSecond\t: UINT;\n\n\tS_Time64\t\t:  SysTime64;\n\tSTT\t\t\t:  CurTimeEx;\n\tS_Time\t\t\t:  SystemTimeDate;\n\tTime_Str\t\t:  STRING;\n\tF_err\t\t: DWORD;\n\tF_HANDL\t\t: DWORD;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\n\n\tSTT(SystemTime:= S_Time64, TimeDate:= S_Time);\n\tTime_Str :='';\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Year));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Month));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Day));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Hour));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Minute));\n\tTime_Str := concat(Time_Str,'-');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Second));\n\tTime_Str := concat(Time_Str,'_');\n\tTime_Str := concat(Time_Str,UINT_TO_STRING(S_Time.Milliseconds));\n\n\tfileName := FilePath;\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\n\t\n\tfileName := concat(fileName,'/');\n\tfileName := concat(fileName,devName);\n\tfileName := concat(fileName,'-');\n\tfileName := concat(fileName,Time_Str);\n    fileName := concat(fileName,'.txt');\n", "title": "healthydata-FUN\\fileSave_new.st"}], "metadata": {"task_id": "healthydata/3", "ground_truth": "FUNCTION_BLOCK fileSave\nVAR_INPUT\n\tfilePath \t:STRING;\n\tintervalt\t:INT;\n\tpositionInt \t:INT;\n\tspeedInt \t\t:INT;\n\tstateInt\t\t:INT;\nEND_VAR\nVAR\n\tlineCount\t: INT;\n\tfileHandle  : DWORD;\n\tfileName\t: STRING;\n\tdata\t\t: STRING;\n\tF_err\t\t: DWORD;\n\ttempInt\t\t: INT;\nEND_VAR\nVAR_OUTPUT\nEND_VAR\n\nIF fileHandle <> 0 THEN\n\tlineCount := lineCount + 1;\n\ttempInt\t:= lineCount * intervalt;\n\tdata := INT_TO_STRING(lineCount);\n\tdata := concat(data,'$T$T');\n\tdata := concat(data, INT_TO_STRING(tempInt));\n\tIF tempInt < 1000 THEN\n\t\tdata := concat(data,'$T');\n\tEND_IF\n\tdata := concat(data,'$T$T');\n\tdata := concat(data,INT_TO_STRING(positionInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(speedInt));\n\tdata := concat(data,'$T');\n\tdata := concat(data,INT_TO_STRING(stateInt));\n\tdata := concat(data,'$R');\n\t\n\tSysFileWrite(hFile:=fileHandle , pbyBuffer:= ADR(data) , ulSize:= DINT_TO_DWORD(SysStrLen(data)) , pResult:= ADR(F_err));\t\t// \u5199\u5165\u6570\u636e\n\nEND_IF", "fpath_tuple": ["FUN", "fileSave_write.st"], "context_start_lineno": 0, "lineno": 9, "function_name": "fileSave"}}
