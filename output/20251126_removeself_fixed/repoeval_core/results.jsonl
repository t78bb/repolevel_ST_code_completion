{"prompt": "FUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "reference": "FUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\nEND_IF", "docs": [{"text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n", "title": "core-FUN\\CommandExecutor.st"}, {"text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\nEND_IF", "title": "core-FUN\\CommandExecutor.st"}, {"text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\n", "title": "core-FUN\\CommandExecutor.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\t\nEND_CASE\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION percentCalc : REAL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\nEND_VAR\nVAR\n\tc\t\t\t:REAL;\n\tp\t\t\t:REAL;\nEND_VAR\n\n\n//\u4f38\u51fa\u767e\u5206\u6bd4\u8ba1\u7b97\nCASE level OF\n\t1:\n\t\tIF gDev.grd[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.grd[idx].sensor.position - gDev.grd[idx].sensor.retractVal;\n\t\tp := gDev.grd[idx].sensor.extendVal - gDev.grd[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\n\t2:\n\t\tIF gDev.sky[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.sky[idx].sensor.position - gDev.sky[idx].sensor.retractVal;\n", "title": "core-FUN\\percentCalc.st"}, {"text": "FUNCTION percentCalc : REAL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\nEND_VAR\nVAR\n\tc\t\t\t:REAL;\n\tp\t\t\t:REAL;\nEND_VAR\n\n\n//\u4f38\u51fa\u767e\u5206\u6bd4\u8ba1\u7b97\nCASE level OF\n\t1:\n\t\tIF gDev.grd[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.grd[idx].sensor.position - gDev.grd[idx].sensor.retractVal;\n\t\tp := gDev.grd[idx].sensor.extendVal - gDev.grd[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\n\t2:\n\t\tIF gDev.sky[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.sky[idx].sensor.position - gDev.sky[idx].sensor.retractVal;\n\t\tp := gDev.sky[idx].sensor.extendVal - gDev.sky[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\nEND_CASE\n", "title": "core-FUN\\percentCalc.st"}, {"text": "FUNCTION_BLOCK BasePIDCtrl\nVAR_INPUT\n\tAct_Val \t:REAL;\t\t\t//\u5b9e\u9645\u503c\n\tSet_Val\t\t:REAL;\t\t\t//\u8bbe\u5b9a\u503c\n\tKp\t\t\t:REAL;\t\t\t\n\tKi\t\t\t:REAL;\n\tKd\t\t\t:REAL;\n\tY_MAX\t\t:REAL;\n\tY_MIN\t\t:REAL;\n\trCycle\t\t:REAL;\t\t\t//\u5355\u4f4d/s\n\tReset\t\t:BOOL;\nEND_VAR\nVAR_OUTPUT\n\tY\t\t\t:REAL;\n\tLimitActive\t:BOOL;\nEND_VAR\nVAR\n\tfCycle\t\t\t:REAL;    \n\tCycleTime\t\t:TIME ;\n\tErr\t\t\t\t:REAL;    \t\t//\u672c\u6b21\u8bef\u5dee\n\tLastErr\t\t\t:REAL;    \t\t//\u4e0a\u6b21\u8bef\u5dee\n\tKiErrSum\t\t:REAL;\t\t\t//\u79ef\u5206\u7d2f\u8ba1\u8bef\u5dee\n\tKdErr\t\t\t:REAL;\t\t\t//\u5fae\u5206\u8bef\u5dee\n\tResult\t\t\t:REAL;\t\t\t//\u8ba1\u7b97\u7ed3\u679c\n\tResult_OUT\t\t:REAL;\t\t    //\u9650\u5236\u7ed3\u679c\n\ttrig\t\t\t:R_TRIG ;\n\tton\t\t\t\t:TON ;\nEND_VAR\n\nIF  rCycle < 0.01 THEN  //10ms\u6700\u5c0f\n\tfCycle := 0.01;\nELSE\n\tfCycle := rCycle;\nEND_IF\n\nCycleTime := REAL_TO_TIME (TIME_TO_REAL(T#1S) * fCycle);\nton (IN := NOT ton.Q ,PT := CycleTime ,Q =>);\ntrig (CLK := ton.Q  ,Q =>);\n\nIF trig.Q THEN \t\t\t//PID\u8ba1\u7b97\n", "title": "core-FUN\\BasePIDCtrl.st"}, {"text": "FUNCTION_BLOCK BasePIDCtrl\nVAR_INPUT\n\tAct_Val \t:REAL;\t\t\t//\u5b9e\u9645\u503c\n\tSet_Val\t\t:REAL;\t\t\t//\u8bbe\u5b9a\u503c\n\tKp\t\t\t:REAL;\t\t\t\n\tKi\t\t\t:REAL;\n\tKd\t\t\t:REAL;\n\tY_MAX\t\t:REAL;\n\tY_MIN\t\t:REAL;\n\trCycle\t\t:REAL;\t\t\t//\u5355\u4f4d/s\n\tReset\t\t:BOOL;\nEND_VAR\nVAR_OUTPUT\n\tY\t\t\t:REAL;\n\tLimitActive\t:BOOL;\nEND_VAR\nVAR\n\tfCycle\t\t\t:REAL;    \n\tCycleTime\t\t:TIME ;\n\tErr\t\t\t\t:REAL;    \t\t//\u672c\u6b21\u8bef\u5dee\n\tLastErr\t\t\t:REAL;    \t\t//\u4e0a\u6b21\u8bef\u5dee\n\tKiErrSum\t\t:REAL;\t\t\t//\u79ef\u5206\u7d2f\u8ba1\u8bef\u5dee\n\tKdErr\t\t\t:REAL;\t\t\t//\u5fae\u5206\u8bef\u5dee\n\tResult\t\t\t:REAL;\t\t\t//\u8ba1\u7b97\u7ed3\u679c\n\tResult_OUT\t\t:REAL;\t\t    //\u9650\u5236\u7ed3\u679c\n\ttrig\t\t\t:R_TRIG ;\n\tton\t\t\t\t:TON ;\nEND_VAR\n\nIF  rCycle < 0.01 THEN  //10ms\u6700\u5c0f\n\tfCycle := 0.01;\nELSE\n\tfCycle := rCycle;\nEND_IF\n\nCycleTime := REAL_TO_TIME (TIME_TO_REAL(T#1S) * fCycle);\nton (IN := NOT ton.Q ,PT := CycleTime ,Q =>);\ntrig (CLK := ton.Q  ,Q =>);\n\nIF trig.Q THEN \t\t\t//PID\u8ba1\u7b97\n\tErr := Set_Val - Act_Val;  //\u8bef\u5dee\u8ba1\u7b97\n\tKiErrSum := KiErrSum + Err ;   //\u79ef\u5206\u8ba1\u7b97\n\tKdErr := Err -LastErr;    //\u5fae\u5206\u8ba1\u7b97\n\tLastErr := Err;\n\t(*IF ABS(Err) < 10 THEN\t\t//\u8bef\u5dee\u8f83\u4f4e\u65f6\u624d\u5f00\u542f\u79ef\u5206\n", "title": "core-FUN\\BasePIDCtrl.st"}, {"text": "METHOD pidExecute\nVAR_INPUT\nEND_VAR\nVAR\n\tvector \t\t:TargetDirect;\nEND_VAR\n\nFOR gi := 1 TO 10 DO\n\tIF gDev.grd[gi].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 1, idx := gi, percent := grdPid[gi].res);\nEND_FOR\n\n\nFOR si := 1 TO 10 DO\n\tIF gDev.sky[si].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 2, idx := si, percent := skyPid[si].res);\nEND_FOR\n\n//\u8d77\u7ad6\u6321\u677f\u6267\u884c\u5f00\u5173\u91cf\nIF NOT gDev.sky[0].ctrl.isError THEN\n\tIF gDev.sky[0].vector = TargetDirect.extend THEN\n\t\tcmdExecutor(level := 2, idx := 0, percent := gDev.sky[0].ctrl.exPct);\n\tEND_IF\n\tIF gDev.sky[0].vector = TargetDirect.retract THEN\n\t\tcmdExecutor(level := 2, idx := 0, percent := -gDev.sky[0].ctrl.rtPct);\n\tEND_IF\n", "title": "core-PRG\\Barrier_pidExecute_method.st"}, {"text": "FUNCTION_BLOCK BasePIDCtrl\nVAR_INPUT\n\tAct_Val \t:REAL;\t\t\t//\u5b9e\u9645\u503c\n\tSet_Val\t\t:REAL;\t\t\t//\u8bbe\u5b9a\u503c\n\tKp\t\t\t:REAL;\t\t\t\n\tKi\t\t\t:REAL;\n\tKd\t\t\t:REAL;\n\tY_MAX\t\t:REAL;\n\tY_MIN\t\t:REAL;\n\trCycle\t\t:REAL;\t\t\t//\u5355\u4f4d/s\n\tReset\t\t:BOOL;\nEND_VAR\nVAR_OUTPUT\n\tY\t\t\t:REAL;\n\tLimitActive\t:BOOL;\nEND_VAR\nVAR\n\tfCycle\t\t\t:REAL;    \n\tCycleTime\t\t:TIME ;\n\tErr\t\t\t\t:REAL;    \t\t//\u672c\u6b21\u8bef\u5dee\n\tLastErr\t\t\t:REAL;    \t\t//\u4e0a\u6b21\u8bef\u5dee\n\tKiErrSum\t\t:REAL;\t\t\t//\u79ef\u5206\u7d2f\u8ba1\u8bef\u5dee\n\tKdErr\t\t\t:REAL;\t\t\t//\u5fae\u5206\u8bef\u5dee\n\tResult\t\t\t:REAL;\t\t\t//\u8ba1\u7b97\u7ed3\u679c\n\tResult_OUT\t\t:REAL;\t\t    //\u9650\u5236\u7ed3\u679c\n\ttrig\t\t\t:R_TRIG ;\n\tton\t\t\t\t:TON ;\nEND_VAR\n\nIF  rCycle < 0.01 THEN  //10ms\u6700\u5c0f\n\tfCycle := 0.01;\nELSE\n\tfCycle := rCycle;\nEND_IF\n\nCycleTime := REAL_TO_TIME (TIME_TO_REAL(T#1S) * fCycle);\nton (IN := NOT ton.Q ,PT := CycleTime ,Q =>);\ntrig (CLK := ton.Q  ,Q =>);\n\nIF trig.Q THEN \t\t\t//PID\u8ba1\u7b97\n\tErr := Set_Val - Act_Val;  //\u8bef\u5dee\u8ba1\u7b97\n\tKiErrSum := KiErrSum + Err ;   //\u79ef\u5206\u8ba1\u7b97\n\tKdErr := Err -LastErr;    //\u5fae\u5206\u8ba1\u7b97\n\tLastErr := Err;\n\t(*IF ABS(Err) < 10 THEN\t\t//\u8bef\u5dee\u8f83\u4f4e\u65f6\u624d\u5f00\u542f\u79ef\u5206\n\t\tKiErrSum := KiErrSum + Err ;   //\u79ef\u5206\u8ba1\u7b97\n\tEND_IF*)\n\tResult :=  Kp * Err + Ki * KiErrSum + Kd * KdErr;  \nEND_IF\n\n", "title": "core-FUN\\BasePIDCtrl.st"}, {"text": "METHOD pidExecute\nVAR_INPUT\nEND_VAR\nVAR\n\tvector \t\t:TargetDirect;\nEND_VAR\n\nFOR gi := 1 TO 10 DO\n\tIF gDev.grd[gi].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 1, idx := gi, percent := grdPid[gi].res);\nEND_FOR\n\n\nFOR si := 1 TO 10 DO\n\tIF gDev.sky[si].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 2, idx := si, percent := skyPid[si].res);\nEND_FOR\n\n//\u8d77\u7ad6\u6321\u677f\u6267\u884c\u5f00\u5173\u91cf\nIF NOT gDev.sky[0].ctrl.isError THEN\n\tIF gDev.sky[0].vector = TargetDirect.extend THEN\n", "title": "core-PRG\\Barrier_pidExecute_method.st"}, {"text": "FUNCTION_BLOCK BasePIDCtrl\nVAR_INPUT\n\tAct_Val \t:REAL;\t\t\t//\u5b9e\u9645\u503c\n\tSet_Val\t\t:REAL;\t\t\t//\u8bbe\u5b9a\u503c\n\tKp\t\t\t:REAL;\t\t\t\n\tKi\t\t\t:REAL;\n\tKd\t\t\t:REAL;\n\tY_MAX\t\t:REAL;\n\tY_MIN\t\t:REAL;\n\trCycle\t\t:REAL;\t\t\t//\u5355\u4f4d/s\n\tReset\t\t:BOOL;\nEND_VAR\nVAR_OUTPUT\n\tY\t\t\t:REAL;\n\tLimitActive\t:BOOL;\nEND_VAR\nVAR\n\tfCycle\t\t\t:REAL;    \n\tCycleTime\t\t:TIME ;\n\tErr\t\t\t\t:REAL;    \t\t//\u672c\u6b21\u8bef\u5dee\n\tLastErr\t\t\t:REAL;    \t\t//\u4e0a\u6b21\u8bef\u5dee\n\tKiErrSum\t\t:REAL;\t\t\t//\u79ef\u5206\u7d2f\u8ba1\u8bef\u5dee\n\tKdErr\t\t\t:REAL;\t\t\t//\u5fae\u5206\u8bef\u5dee\n\tResult\t\t\t:REAL;\t\t\t//\u8ba1\u7b97\u7ed3\u679c\n\tResult_OUT\t\t:REAL;\t\t    //\u9650\u5236\u7ed3\u679c\n\ttrig\t\t\t:R_TRIG ;\n\tton\t\t\t\t:TON ;\nEND_VAR\n\nIF  rCycle < 0.01 THEN  //10ms\u6700\u5c0f\n\tfCycle := 0.01;\nELSE\n\tfCycle := rCycle;\nEND_IF\n\n", "title": "core-FUN\\BasePIDCtrl.st"}, {"text": "\ttimeexe\t\t\t:INT:= 100 * 8;\t\t//\u9700\u8981\u505c\u6b62\u65f6\uff0c\u989d\u5916\u6267\u884c\u6307\u4ee4\u65f6\u95f4\n\tcmdExecutor0\t:CommandExecutor0;\n\tcmdExecutor\t\t:CommandExecutor;\n\tgrdPid\t\t\t:ARRAY[1..10] OF grdPosCtrl;\n\tskyPid\t\t\t:ARRAY[0..10] OF skyPosCtrl;\n\tresetPidParam\t:BOOL;\t\t\t\t\t\t\t//pid\u53c2\u6570\u590d\u4f4d\n\tpidMode\t\t\t:BOOL;\t\t\t\t\t\t\t//\u4f7f\u7528pid\u63a7\u5236\n\tautoButtonMode\t:BOOL;\t\t\t\t\t\t\t//\u624b\u52a8\u590d\u4f4d\u6309\u94ae\n\tautoEnableMode\t:BOOL;\t\t\t\t\t\t\t//\u6709\u52a8\u4f5c\u65f6\u4f7f\u80fd\u81ea\u52a8\u5f00\u542f\n\tautoPctMode\t\t:BOOL;\n\tmanualPidPrmSet\t:BOOL;\t\t\t\t\t\t\t//manualPidParamSet,\u624b\u52a8\u8bbe\u5b9apid\u4f4d\u7f6e\u53c2\u6570\n\n\tgi\t\t\t\t:INT;\t\t\t//ground-i\n\tsi\t\t\t\t:INT;\t\t\t//sky-i\n\n\tlevel\t\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t\t:INT := -1 ;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\nEND_VAR\n\n//\u521d\u59cb\u5316\nIF initCount = 0 THEN\n\tIF bInit THEN\n\t\tinitialize();\n\t\tinitializePid();\n\t\tbInit := FALSE;\n\tEND_IF\nELSE\n\tinitCount := initCount - 1;\n\tRETURN;\t\nEND_IF\n\n//\u6307\u4ee4\u6267\u884c\npidTestUi();\n\nIF pidMode THEN\n\tpidCalc();\n\tpidExecute();\nELSE\n\tIF autoPctMode THEN setExecutePercent(); END_IF\n\tmanualExecute();\nEND_IF\t\n\n//\u754c\u9762\u4ea4\u4e92  \ninterfaceAct();\n\n//\u72b6\u6001\u66f4\u65b0\nupdateStatus(error := 1);\n\n//\u590d\u4f4d\u6309\u94ae\u6a21\u5f0f/\nIF autoButtonMode THEN\n", "title": "core-PRG\\Barrier.st"}, {"text": "METHOD pidExecute\nVAR_INPUT\nEND_VAR\nVAR\n\tvector \t\t:TargetDirect;\nEND_VAR\n\nFOR gi := 1 TO 10 DO\n\tIF gDev.grd[gi].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 1, idx := gi, percent := grdPid[gi].res);\nEND_FOR\n\n\nFOR si := 1 TO 10 DO\n\tIF gDev.sky[si].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 2, idx := si, percent := skyPid[si].res);\nEND_FOR\n\n//\u8d77\u7ad6\u6321\u677f\u6267\u884c\u5f00\u5173\u91cf\nIF NOT gDev.sky[0].ctrl.isError THEN\n\tIF gDev.sky[0].vector = TargetDirect.extend THEN\n\t\tcmdExecutor(level := 2, idx := 0, percent := gDev.sky[0].ctrl.exPct);\n\tEND_IF\n\tIF gDev.sky[0].vector = TargetDirect.retract THEN\n\t\tcmdExecutor(level := 2, idx := 0, percent := -gDev.sky[0].ctrl.rtPct);\n\tEND_IF\nEND_IF\n(*\nIF NOT gDev.grd[7].ctrl.isError THEN\n\tIF gDev.grd[7].vector = TargetDirect.extend THEN\n\t\tcmdExecutor(level := 1, idx := 7, percent := gDev.grd[7].ctrl.exPct);\n", "title": "core-PRG\\Barrier_pidExecute_method.st"}], "metadata": {"task_id": "core/0", "ground_truth": "FUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\nEND_IF", "fpath_tuple": ["FUN", "CommandExecutor.st"], "context_start_lineno": 0, "lineno": 10, "function_name": "CommandExecutor"}}
{"prompt": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR", "reference": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\t\nEND_CASE", "docs": [{"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n", "title": "core-FUN\\CommandExecutor.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\n", "title": "core-FUN\\CommandExecutor.st"}, {"text": "\nFUNCTION_BLOCK CommandExecutor\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u5165-100~+100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nIF percent > 0 THEN\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\tgController.sky[idx].retractPercent := 0;\n\tEND_CASE\nELSE\n\tCASE level OF\n\t\t1:\n\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\t\t2:\n\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(ABS(percent) * 65535 / 100);\n\tEND_CASE\nEND_IF", "title": "core-FUN\\CommandExecutor.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\t\nEND_CASE\n", "title": "core-FUN\\CommandExecutor0.st"}, {"text": "FUNCTION percentCalc : REAL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\nEND_VAR\nVAR\n\tc\t\t\t:REAL;\n\tp\t\t\t:REAL;\nEND_VAR\n\n\n//\u4f38\u51fa\u767e\u5206\u6bd4\u8ba1\u7b97\nCASE level OF\n\t1:\n\t\tIF gDev.grd[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.grd[idx].sensor.position - gDev.grd[idx].sensor.retractVal;\n\t\tp := gDev.grd[idx].sensor.extendVal - gDev.grd[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\n\t2:\n\t\tIF gDev.sky[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.sky[idx].sensor.position - gDev.sky[idx].sensor.retractVal;\n", "title": "core-FUN\\percentCalc.st"}, {"text": "FUNCTION percentCalc : REAL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\nEND_VAR\nVAR\n\tc\t\t\t:REAL;\n\tp\t\t\t:REAL;\nEND_VAR\n\n\n//\u4f38\u51fa\u767e\u5206\u6bd4\u8ba1\u7b97\nCASE level OF\n\t1:\n\t\tIF gDev.grd[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.grd[idx].sensor.position - gDev.grd[idx].sensor.retractVal;\n\t\tp := gDev.grd[idx].sensor.extendVal - gDev.grd[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\n\t2:\n\t\tIF gDev.sky[idx].sensor.position < 3 THEN \n\t\t\tRETURN;\n\t\tEND_IF\n\t\tc := gDev.sky[idx].sensor.position - gDev.sky[idx].sensor.retractVal;\n\t\tp := gDev.sky[idx].sensor.extendVal - gDev.sky[idx].sensor.retractVal;\n\t\tpercentCalc := c * 100 / p;\nEND_CASE\n", "title": "core-FUN\\percentCalc.st"}, {"text": "METHOD pidExecute\nVAR_INPUT\nEND_VAR\nVAR\n\tvector \t\t:TargetDirect;\nEND_VAR\n\nFOR gi := 1 TO 10 DO\n\tIF gDev.grd[gi].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 1, idx := gi, percent := grdPid[gi].res);\nEND_FOR\n\n\nFOR si := 1 TO 10 DO\n\tIF gDev.sky[si].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 2, idx := si, percent := skyPid[si].res);\nEND_FOR\n\n//\u8d77\u7ad6\u6321\u677f\u6267\u884c\u5f00\u5173\u91cf\nIF NOT gDev.sky[0].ctrl.isError THEN\n\tIF gDev.sky[0].vector = TargetDirect.extend THEN\n\t\tcmdExecutor(level := 2, idx := 0, percent := gDev.sky[0].ctrl.exPct);\n\tEND_IF\n\tIF gDev.sky[0].vector = TargetDirect.retract THEN\n\t\tcmdExecutor(level := 2, idx := 0, percent := -gDev.sky[0].ctrl.rtPct);\n\tEND_IF\n", "title": "core-PRG\\Barrier_pidExecute_method.st"}, {"text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t\u672c\u51fd\u6570\u7528\u4e8e\u6839\u636e\u8f93\u5165\u53c2\u6570 \u64cd\u4f5cUI\u754c\u9762\u7684\u6309\u94ae\u53d8\u91cf\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n", "title": "core-FUN\\setButtonByDirect.st"}, {"text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t\u672c\u51fd\u6570\u7528\u4e8e\u6839\u636e\u8f93\u5165\u53c2\u6570 \u64cd\u4f5cUI\u754c\u9762\u7684\u6309\u94ae\u53d8\u91cf\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n", "title": "core-FUN\\setButtonByDirect.st"}, {"text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t\u672c\u51fd\u6570\u7528\u4e8e\u6839\u636e\u8f93\u5165\u53c2\u6570 \u64cd\u4f5cUI\u754c\u9762\u7684\u6309\u94ae\u53d8\u91cf\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := TRUE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n", "title": "core-FUN\\setButtonByDirect.st"}, {"text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t\u672c\u51fd\u6570\u7528\u4e8e\u6839\u636e\u8f93\u5165\u53c2\u6570 \u64cd\u4f5cUI\u754c\u9762\u7684\u6309\u94ae\u53d8\u91cf\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := TRUE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t\t\nEND_CASE;", "title": "core-FUN\\setButtonByDirect.st"}, {"text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t\u672c\u51fd\u6570\u7528\u4e8e\u6839\u636e\u8f93\u5165\u53c2\u6570 \u64cd\u4f5cUI\u754c\u9762\u7684\u6309\u94ae\u53d8\u91cf\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := TRUE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.sky[idx].btnStop := FALSE;\n\t\t\t\tgUI.sky[idx].btnExtend := FALSE;\n\t\t\t\tgUI.sky[idx].btnRetract := FALSE;\n", "title": "core-FUN\\setButtonByDirect.st"}, {"text": "METHOD pidExecute\nVAR_INPUT\nEND_VAR\nVAR\n\tvector \t\t:TargetDirect;\nEND_VAR\n\nFOR gi := 1 TO 10 DO\n\tIF gDev.grd[gi].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 1, idx := gi, percent := grdPid[gi].res);\nEND_FOR\n\n\nFOR si := 1 TO 10 DO\n\tIF gDev.sky[si].ctrl.isError THEN\n\t\tCONTINUE;\n\tEND_IF\n\tcmdExecutor(level := 2, idx := si, percent := skyPid[si].res);\nEND_FOR\n\n//\u8d77\u7ad6\u6321\u677f\u6267\u884c\u5f00\u5173\u91cf\nIF NOT gDev.sky[0].ctrl.isError THEN\n\tIF gDev.sky[0].vector = TargetDirect.extend THEN\n", "title": "core-PRG\\Barrier_pidExecute_method.st"}, {"text": "FUNCTION setButtonByDirect : BOOL\nVAR_INPUT\n\tlevel\t\t:INT;\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\nEND_VAR\nVAR\nEND_VAR\n//\t\u672c\u51fd\u6570\u7528\u4e8e\u6839\u636e\u8f93\u5165\u53c2\u6570 \u64cd\u4f5cUI\u754c\u9762\u7684\u6309\u94ae\u53d8\u91cf\nCASE level OF\n\t1:\n\t\tIF idx = 0 OR idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n\t\t\tRETURN;\n\t\tEND_IF\n\t\tCASE direct OF\n\t\t\tTargetDirect.extend:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := TRUE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\t\tTargetDirect.retract:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := TRUE;\n\t\t\tTargetDirect.stop:\n\t\t\t\tgUI.grd[idx].btnStop := FALSE;\n\t\t\t\tgUI.grd[idx].btnExtend := FALSE;\n\t\t\t\tgUI.grd[idx].btnRetract := FALSE;\n\t\tEND_CASE\n\t2:\n\t\tIF idx > 10 THEN\t\t//\u53c2\u6570\u6821\u9a8c\n", "title": "core-FUN\\setButtonByDirect.st"}], "metadata": {"task_id": "core/1", "ground_truth": "FUNCTION_BLOCK CommandExecutor0\nVAR_INPUT\n\tlevel\t\t:INT;\t\t\t//1->\u5730\u8f68\t2->\u5929\u8f68\n\tidx\t\t\t:INT;\t\t\t//\u6321\u677f\u7d22\u5f15\u7f16\u53f7\n\tdirect\t\t:TargetDirect;\t//\u65b9\u5411\n\tpercent\t\t:REAL;\t\t\t//\u6bd4\u4f8b\u9600\u767e\u5206\u6bd4 \u4f20\u51650-100\nEND_VAR\nVAR_OUTPUT\nEND_VAR\nVAR\nEND_VAR\n\nCASE direct OF\n\tTargetDirect.extend:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\tTargetDirect.retract:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := REAL_TO_WORD(percent * 65535 / 100);\n\t\tEND_CASE\n\tTargetDirect.stop:\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\n\tELSE\n\t\tCASE level OF\n\t\t\t1:\n\t\t\t\tgController.grd[idx].extendPercent := 0;\n\t\t\t\tgController.grd[idx].retractPercent := 0;\n\t\t\t2:\n\t\t\t\tgController.sky[idx].extendPercent := 0;\n\t\t\t\tgController.sky[idx].retractPercent := 0;\n\t\tEND_CASE\n\t\t\nEND_CASE", "fpath_tuple": ["FUN", "CommandExecutor0.st"], "context_start_lineno": 0, "lineno": 10, "function_name": "CommandExecutor0"}}
