[["It seems like you've provided fragments of code from a repository, specifically from files named `CommandExecutor.st` and `CommandExecutor0.st`. These fragments define a `FUNCTION_BLOCK` named `CommandExecutor` (and `CommandExecutor0`), which appears to control some kind of actuator system based on input parameters like `level`, `idx`, and `percent`.\n\nFrom the provided code:\n\n1. **Purpose of the `CommandExecutor` Function Block**:\n   - The `CommandExecutor` function block is responsible for controlling actuators (likely proportional valves) based on the input parameters.\n   - The `level` input determines whether the control is for \"\u5730\u8f68\" (ground track) or \"\u5929\u8f68\" (sky track).\n   - The `idx` input specifies the index of the actuator to control.\n   - The `percent` input specifies the percentage of the proportional valve to open or close, ranging from -100 to +100.\n\n2. **Behavior Based on `percent`**:\n   - If `percent > 0`, the function block sets the `extendPercent` for the specified actuator and resets `retractPercent` to 0.\n   - If `percent <= 0`, the function block sets the `retractPercent` for the specified actuator and resets `extendPercent` to 0.\n   - The percentage values are scaled to a 16-bit range (0 to 65535) using the formula `REAL_TO_WORD(percent * 65535 / 100)`.\n\n3. **Differences Between Fragments**:\n   - The fragments from `CommandExecutor.st` are mostly identical, with the same logic repeated multiple times.\n   - The fragment from `CommandExecutor0.st` is incomplete, but it seems to follow a similar structure.\n\n4. **Potential Improvements**:\n   - **Code Repetition**: The same logic is repeated multiple times in `CommandExecutor.st`. This could be refactored into a reusable function or procedure to improve maintainability.\n   - **Error Handling**: There is no error handling for invalid `level` or `idx` values. Adding checks for valid ranges could make the code more robust.\n   - **Comments**: While there are some comments, additional explanations (e.g., what \"\u5730\u8f68\" and \"\u5929\u8f68\" represent) could make the code easier to understand for others.\n\nIf you have specific questions or need help with a particular aspect of this code, feel free to ask!"], ["It seems like you've provided code fragments from two function blocks, `CommandExecutor` and `CommandExecutor0`, which are part of a repository. Both function blocks appear to handle the control of some kind of actuator system (likely involving proportional valves) based on the input parameters `level`, `idx`, `direct`, and `percent`.\n\nHere\u2019s a summary of the differences and similarities between the two function blocks:\n\n---\n\n### **CommandExecutor**\n1. **Input Parameters:**\n   - `level`: Specifies the type of track (\u5730\u8f68 or \u5929\u8f68).\n   - `idx`: Index of the actuator or flap.\n   - `percent`: A proportional valve percentage, which can range from **-100 to +100**.\n\n2. **Logic:**\n   - If `percent > 0`, it sets the `extendPercent` and clears `retractPercent`.\n   - If `percent <= 0`, it sets the `retractPercent` and clears `extendPercent`.\n\n3. **Behavior:**\n   - Handles both positive and negative values for `percent`, which likely correspond to extending and retracting the actuator/flap.\n\n---\n\n### **CommandExecutor0**\n1. **Input Parameters:**\n   - `level`: Specifies the type of track (\u5730\u8f68 or \u5929\u8f68).\n   - `idx`: Index of the actuator or flap.\n   - `direct`: Specifies the direction (`TargetDirect.extend` or `TargetDirect.retract`).\n   - `percent`: A proportional valve percentage, which ranges from **0 to 100**.\n\n2. **Logic:**\n   - Uses the `direct` parameter to determine whether to extend or retract.\n   - For `TargetDirect.extend`, it sets the `extendPercent` and clears `retractPercent`.\n   - For `TargetDirect.retract`, it sets the `retractPercent` and clears `extendPercent`.\n\n3. **Behavior:**\n   - Does not handle negative values for `percent`.\n   - Relies on the `direct` parameter to determine the direction of movement.\n\n---\n\n### **Key Differences**\n1. **Input Range for `percent`:**\n   - `CommandExecutor` accepts values from **-100 to +100**, where negative values likely indicate retraction.\n   - `CommandExecutor0` accepts values from **0 to 100**, and the direction is explicitly specified using the `direct` parameter.\n\n2. **Direction Handling:**\n   - `CommandExecutor` infers the direction based on the sign of `percent`.\n   - `CommandExecutor0` explicitly uses the `direct` parameter to determine the direction.\n\n3. **Flexibility:**\n   - `CommandExecutor` combines direction and percentage into a single parameter (`percent`), making it simpler but less explicit.\n   - `CommandExecutor0` separates direction (`direct`) and percentage (`percent`), making it more explicit but requiring additional input.\n\n---\n\n### **Potential Use Cases**\n- **CommandExecutor** might be used in scenarios where the direction can be inferred directly from the `percent` value, simplifying the input requirements.\n- **CommandExecutor0** might be used in scenarios where the direction needs to be explicitly specified, providing more control and clarity.\n\n---\n\nIf you need further clarification or have specific questions about these function blocks, feel free to ask!"]]