[["It seems like you have provided a partial code snippet for the `F_iScaleOutput` function, which appears to be a scaling function for converting physical output values into a terminal-specific range. However, the code snippet is incomplete, and it seems to repeat itself in parts.\n\nFrom the provided fragments, here is a summary of what the function does:\n\n### Function Purpose\nThe `F_iScaleOutput` function appears to scale a physical output value (`rOutput`) from a specified physical range (`rPhyMin` to `rPhyMax`) into a terminal-specific range (`rTerMin` to `rTerMax`). The terminal type is determined by the `eTerminal` input, which specifies the type of terminal (e.g., 0-20 mA, 4-20 mA, 0-10 V, etc.).\n\n### Key Steps in the Function\n1. **Set Terminal Range**:\n   - `rTerMax` is set to a constant value of `32768.0`.\n   - `rTerMin` is determined based on the `eTerminal` type using a `CASE` statement. For example:\n     - For `eTerminal_0mA_20mA`, `rTerMin` is `0.0`.\n     - For `eTerminal_m10V_10V`, `rTerMin` is `-32768.0`.\n\n2. **Calculate Ranges**:\n   - `rPhyRange` is the difference between `rPhyMax` and `rPhyMin`.\n   - `rTerRange` is the difference between `rTerMax` and `rTerMin`.\n\n3. **Scale the Output**:\n   - If both `rPhyRange` and `rTerRange` are greater than `0.0`, the function calculates the scaled terminal output (`rTerOutput`) using the formula:\n     ```\n     rTerOutput := rTerMin + (rTerRange * (rOutput - rPhyMin) / rPhyRange);\n     ```\n   - If either range is invalid (e.g., `rPhyRange <= 0.0` or `rTerRange <= 0.0`), the function sets `rTerOutput` to `0.0`.\n\n### Missing Code\nThe provided code fragments are incomplete, and the following parts are missing:\n- The final `ELSE` block for the `IF` statement that handles invalid ranges.\n- The return statement or assignment of the scaled value (`rTerOutput`) to the function's output.\n\n### Complete Function (Reconstructed)\nHere is a reconstructed version of the `F_iScaleOutput` function based on the provided fragments:\n\n```pascal\nFUNCTION F_iScaleOutput : INT\nVAR_INPUT\n\trOutput: REAL; (* [] Physical output *)\n\trPhyMin: REAL; (* [] Physical minimum *)\n\trPhyMax: REAL; (* [] Physical maximum *)\n\teTerminal: E_Ctrl_TerminalType; (* [] Terminal type. *)\nEND_VAR\nVAR\n\trTerMin: REAL;\n\trTerMax: REAL;\n\trPhyRange: REAL;\n\trTerRange: REAL;\n\trTerOutput: REAL;\nEND_VAR\n\nrTerMax := 32768.0;\n\nCASE eTerminal OF\n\teTerminal_0mA_20mA: rTerMin := 0.0;\n\teTerminal_4mA_20mA: rTerMin := 0.0;\n\teTerminal_0V_10V: rTerMin := 0.0;\n\teTerminal_m10V_10V: rTerMin := -32768.0;\nELSE\n\trTerMin := -32768.0;\nEND_CASE;\n\nrPhyRange := rPhyMax - rPhyMin;\nrTerRange := rTerMax - rTerMin;\n\nIF rPhyRange > 0.0 AND rTerRange > 0.0 THEN\n\trTerOutput := rTerMin + (rTerRange * (rOutput - rPhyMin) / rPhyRange);\nELSE\n\trTerOutput := 0.0;\nEND_IF;\n\nF_iScaleOutput := INT(rTerOutput);\n```\n\n### Notes\n1. **Input Validation**: The function does not validate the inputs (`rOutput`, `rPhyMin`, `rPhyMax`, etc.). You may want to add checks to ensure they are within expected ranges.\n2. **Output Type**: The function returns an `INT`, but the scaled output (`rTerOutput`) is calculated as a `REAL`. The final value is cast to an `INT` before returning.\n3. **Terminal Types**: The `eTerminal` enumeration should be defined elsewhere in your codebase. Ensure that all possible terminal types are handled in the `CASE` statement.\n\nLet me know if you need further clarification or assistance!"]]